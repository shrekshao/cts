{"version":3,"file":"oom.spec.js","names":["description","makeTestGroup","GPUTest","exhaustVramUntilUnder64MB","g","test","desc","fn","t","device","unimplemented"],"sources":["../../../src/stress/memory/oom.spec.ts"],"sourcesContent":["export const description = `\nStress tests covering robustness when available VRAM is exhausted.\n`;\n\nimport { makeTestGroup } from '../../common/framework/test_group.js';\nimport { GPUTest } from '../../webgpu/gpu_test.js';\nimport { exhaustVramUntilUnder64MB } from '../../webgpu/util/memory.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('vram_oom')\n  .desc(`Tests that we can allocate buffers until we run out of VRAM.`)\n  .fn(async t => {\n    await exhaustVramUntilUnder64MB(t.device);\n  });\n\ng.test('get_mapped_range')\n  .desc(\n    `Tests getMappedRange on a mappedAtCreation GPUBuffer that failed allocation due\nto OOM. This should throw a RangeError, but below a certain threshold may just\ncrash the page.`\n  )\n  .unimplemented();\n\ng.test('map_after_vram_oom')\n  .desc(\n    `Allocates tons of buffers and textures with varying mapping states (unmappable,\nmappable, mapAtCreation, mapAtCreation-then-unmapped) until OOM; then attempts\nto mapAsync all the mappable objects.`\n  )\n  .unimplemented();\n\ng.test('validation_vs_oom')\n  .desc(\n    `Tests that calls affected by both OOM and validation errors expose the\nvalidation error with precedence.`\n  )\n  .unimplemented();\n\ng.test('recovery')\n  .desc(\n    `Tests that after going VRAM-OOM, destroying allocated resources eventually\nallows new resources to be allocated.`\n  )\n  .unimplemented();\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,sCAAsC;AACpE,SAASC,OAAO,QAAQ,0BAA0B;AAClD,SAASC,yBAAyB,QAAQ,6BAA6B;;AAEvE,OAAO,MAAMC,CAAC,GAAGH,aAAa,CAACC,OAAO,CAAC;;AAEvCE,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC;AACfC,IAAI,CAAE,8DAA6D,CAAC;AACpEC,EAAE,CAAC,OAAMC,CAAC,KAAI;EACb,MAAML,yBAAyB,CAACK,CAAC,CAACC,MAAM,CAAC;AAC3C,CAAC,CAAC;;AAEJL,CAAC,CAACC,IAAI,CAAC,kBAAkB,CAAC;AACvBC,IAAI;AACF;AACL;AACA,gBAAgB,CACb;;AACAI,aAAa,EAAE;;AAElBN,CAAC,CAACC,IAAI,CAAC,oBAAoB,CAAC;AACzBC,IAAI;AACF;AACL;AACA,sCAAsC,CACnC;;AACAI,aAAa,EAAE;;AAElBN,CAAC,CAACC,IAAI,CAAC,mBAAmB,CAAC;AACxBC,IAAI;AACF;AACL,kCAAkC,CAC/B;;AACAI,aAAa,EAAE;;AAElBN,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC;AACfC,IAAI;AACF;AACL,sCAAsC,CACnC;;AACAI,aAAa,EAAE"}