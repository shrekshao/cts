{"version":3,"sources":["../../../../src/webgpu/web_platform/worker/worker_launcher.ts"],"names":["launchWorker","selfPath","import","meta","url","selfPathDir","substring","lastIndexOf","workerPath","worker","Worker","type","promise","Promise","resolve","addEventListener","ev","data","once","postMessage"],"mappings":";AAAA;AACA;;AAGA,OAAO,eAAeA,YAAf,GAA8B;AACnC,QAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYC,GAA7B;AACA,QAAMC,WAAW,GAAGJ,QAAQ,CAACK,SAAT,CAAmB,CAAnB,EAAsBL,QAAQ,CAACM,WAAT,CAAqB,GAArB,CAAtB,CAApB;AACA,QAAMC,UAAU,GAAGH,WAAW,GAAG,YAAjC;AACA,QAAMI,MAAM,GAAG,IAAIC,MAAJ,CAAWF,UAAX,EAAuB,EAAEG,IAAI,EAAE,QAAR,EAAvB,CAAf;;AAEA,QAAMC,OAAO,GAAG,IAAIC,OAAJ,CAAwB,CAAAC,OAAO,KAAI;AACjDL,IAAAA,MAAM,CAACM,gBAAP,CAAwB,SAAxB,EAAmC,CAAAC,EAAE,KAAIF,OAAO,CAACE,EAAE,CAACC,IAAJ,CAAhD,EAAyE,EAAEC,IAAI,EAAE,IAAR,EAAzE;AACD,GAFe,CAAhB;AAGAT,EAAAA,MAAM,CAACU,WAAP,CAAmB,EAAnB;AACA,SAAO,MAAMP,OAAb;AACD","sourcesContent":["export type TestResult = {\n  error: String | undefined;\n};\n\nexport async function launchWorker() {\n  const selfPath = import.meta.url;\n  const selfPathDir = selfPath.substring(0, selfPath.lastIndexOf('/'));\n  const workerPath = selfPathDir + '/worker.js';\n  const worker = new Worker(workerPath, { type: 'module' });\n\n  const promise = new Promise<TestResult>(resolve => {\n    worker.addEventListener('message', ev => resolve(ev.data as TestResult), { once: true });\n  });\n  worker.postMessage({});\n  return await promise;\n}\n"],"file":"worker_launcher.js"}