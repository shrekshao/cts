{"version":3,"sources":["../../../../src/webgpu/web_platform/reftests/gpu_ref_test.ts"],"names":["assert","runRefTest","fn","navigator","gpu","undefined","adapter","requestAdapter","device","requestDevice","queue","takeScreenshotDelayed"],"mappings":";AAAA;AACA,GADA,SAASA,MAAT,QAAuB,8BAAvB;;;;;;;AASA,OAAO,SAASC,UAAT,CAAoBC,EAApB,EAAgE;AACrE,OAAK,CAAC,YAAY;AAChBF,IAAAA,MAAM;AACJ,WAAOG,SAAP,KAAqB,WAArB,IAAoCA,SAAS,CAACC,GAAV,KAAkBC,SADlD;AAEJ,oCAFI,CAAN;;;AAKA,UAAMC,OAAO,GAAG,MAAMH,SAAS,CAACC,GAAV,CAAcG,cAAd,EAAtB;AACAP,IAAAA,MAAM,CAACM,OAAO,KAAK,IAAb,CAAN;AACA,UAAME,MAAM,GAAG,MAAMF,OAAO,CAACG,aAAR,EAArB;AACAT,IAAAA,MAAM,CAACQ,MAAM,KAAK,IAAZ,CAAN;AACA,UAAME,KAAK,GAAGF,MAAM,CAACE,KAArB;;AAEA,UAAMR,EAAE,CAAC,EAAEM,MAAF,EAAUE,KAAV,EAAD,CAAR;;AAEAC,IAAAA,qBAAqB,CAAC,EAAD,CAArB;AACD,GAfI,GAAL;AAgBD","sourcesContent":["import { assert } from '../../../common/util/util.js';\n\ndeclare function takeScreenshotDelayed(ms: number): void;\n\ninterface GPURefTest {\n  readonly device: GPUDevice;\n  readonly queue: GPUQueue;\n}\n\nexport function runRefTest(fn: (t: GPURefTest) => Promise<void>): void {\n  void (async () => {\n    assert(\n      typeof navigator !== 'undefined' && navigator.gpu !== undefined,\n      'No WebGPU implementation found'\n    );\n\n    const adapter = await navigator.gpu.requestAdapter();\n    assert(adapter !== null);\n    const device = await adapter.requestDevice();\n    assert(device !== null);\n    const queue = device.queue;\n\n    await fn({ device, queue });\n\n    takeScreenshotDelayed(50);\n  })();\n}\n"],"file":"gpu_ref_test.js"}