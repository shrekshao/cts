{"version":3,"sources":["../../../../../src/webgpu/shader/execution/builtin/atan.spec.ts"],"names":["description","makeTestGroup","GPUTest","f32","f32Bits","TypeF32","kBit","run","ulpThreshold","g","test","uniqueId","specURL","desc","params","u","combine","undefined","fn","t","truthFunc","x","Math","atan","manual","input","infinity","negative","expected","PI","sqrt","positive","min","max","zero","automatic","Array","f32Min","value","f32Max","increment","length","i","cfg","cmpFloats","concat"],"mappings":"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","sourcesContent":["export const description = `\nExecution Tests for the 'atan' builtin function\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../gpu_test.js';\nimport { f32, f32Bits, TypeF32 } from '../../../util/conversion.js';\n\nimport { Case, Config, kBit, run, ulpThreshold } from './builtin.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('float_builtin_functions,atan')\n  .uniqueId('b13828d6243d13dd')\n  .specURL('https://www.w3.org/TR/2021/WD-WGSL-20210929/#float-builtin-functions')\n  .desc(\n    `\natan:\nT is f32 or vecN<f32> atan(e: T ) -> T Returns the arc tangent of e. Component-wise when T is a vector. (GLSLstd450Atan)\n\nTODO(#792): Decide what the ground-truth is for these tests. [1]\n`\n  )\n  .params(u =>\n    u\n      .combine('storageClass', ['uniform', 'storage_r', 'storage_rw'] as const)\n      .combine('vectorize', [undefined, 2, 3, 4] as const)\n  )\n  .fn(async t => {\n    // [1]: Need to decide what the ground-truth is.\n    const truthFunc = (x: number): number => {\n      return Math.atan(x);\n    };\n\n    // Well defined/border cases\n    const manual: Array<Case> = [\n      { input: f32Bits(kBit.f32.infinity.negative), expected: f32(-Math.PI / 2) },\n      { input: f32(-Math.sqrt(3)), expected: f32(-Math.PI / 3) },\n      { input: f32(-1), expected: f32(-Math.PI / 4) },\n      { input: f32(-Math.sqrt(3) / 3), expected: f32(-Math.PI / 6) },\n      { input: f32(Math.sqrt(3) / 3), expected: f32(Math.PI / 6) },\n      { input: f32(1), expected: f32(Math.PI / 4) },\n      { input: f32(Math.sqrt(3)), expected: f32(Math.PI / 3) },\n      { input: f32Bits(kBit.f32.infinity.positive), expected: f32(Math.PI / 2) },\n      // Zero-like cases\n      { input: f32(0), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32(0) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32(0) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32Bits(kBit.f32.positive.min) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32Bits(kBit.f32.negative.max) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32Bits(kBit.f32.negative.max) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32Bits(kBit.f32.positive.min) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32Bits(kBit.f32.positive.zero) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32Bits(kBit.f32.negative.zero) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32Bits(kBit.f32.negative.zero) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32Bits(kBit.f32.positive.zero) },\n    ];\n\n    // Spread of cases over wide domain\n    const automatic = new Array<Case>(1000);\n    const f32Min = f32Bits(kBit.f32.positive.min).value as number;\n    const f32Max = f32Bits(kBit.f32.positive.max).value as number;\n    const increment = (f32Max - f32Min) / automatic.length;\n    for (let i = 0; i < automatic.length; i++) {\n      const x = f32Min + increment * i;\n      automatic[i] = { input: f32(x), expected: f32(truthFunc(x)) };\n    }\n\n    const cfg: Config = t.params;\n    cfg.cmpFloats = ulpThreshold(4096);\n    run(t, 'atan', [TypeF32], TypeF32, cfg, manual.concat(automatic));\n  });\n"],"file":"atan.spec.js"}