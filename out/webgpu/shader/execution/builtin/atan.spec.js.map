{"version":3,"sources":["../../../../../src/webgpu/shader/execution/builtin/atan.spec.ts"],"names":["description","makeTestGroup","GPUTest","f32","f32Bits","TypeF32","biasedRange","linearRange","kBit","kValue","run","ulpThreshold","g","test","uniqueId","specURL","desc","params","u","combine","undefined","fn","t","truthFunc","x","input","expected","Math","atan","cases","infinity","negative","PI","sqrt","positive","min","max","zero","concat","map","cfg","cmpFloats"],"mappings":";AAAA;AACA,GADA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA,CAFO,CAIP,SAASC,aAAT,QAA8B,4CAA9B;AACA,SAASC,OAAT,QAAwB,sBAAxB;AACA,SAASC,GAAT,EAAcC,OAAd,EAAuBC,OAAvB,QAAsC,6BAAtC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,uBAAzC;;AAEA,SAAuBC,IAAvB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,YAA1C,QAA8D,cAA9D;;AAEA,OAAO,MAAMC,CAAC,GAAGX,aAAa,CAACC,OAAD,CAAvB;;AAEPU,CAAC,CAACC,IAAF,CAAO,8BAAP;AACGC,QADH,CACY,kBADZ;AAEGC,OAFH,CAEW,sEAFX;AAGGC,IAHH;AAIK;AACL;AACA;AACA;AACA;AACA,CATA;;AAWGC,MAXH,CAWU,CAAAC,CAAC;AACPA,CAAC;AACEC,OADH,CACW,cADX,EAC2B,CAAC,SAAD,EAAY,WAAZ,EAAyB,YAAzB,CAD3B;AAEGA,OAFH,CAEW,WAFX,EAEwB,CAACC,SAAD,EAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAFxB,CAZJ;;AAgBGC,EAhBH,CAgBM,OAAMC,CAAN,KAAW;AACb;AACA,QAAMC,SAAS,GAAG,CAACC,CAAD,KAAqB;AACrC,WAAO,EAAEC,KAAK,EAAEtB,GAAG,CAACqB,CAAD,CAAZ,EAAiBE,QAAQ,EAAEvB,GAAG,CAACwB,IAAI,CAACC,IAAL,CAAUJ,CAAV,CAAD,CAA9B,EAAP;AACD,GAFD;;AAIA;AACA,MAAIK,KAAkB,GAAG;AACvB,IAAEJ,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS2B,QAAT,CAAkBC,QAAnB,CAAhB,EAA8CL,QAAQ,EAAEvB,GAAG,CAAC,CAACwB,IAAI,CAACK,EAAN,GAAW,CAAZ,CAA3D,EADuB;AAEvB,IAAEP,KAAK,EAAEtB,GAAG,CAAC,CAACwB,IAAI,CAACM,IAAL,CAAU,CAAV,CAAF,CAAZ,EAA6BP,QAAQ,EAAEvB,GAAG,CAAC,CAACwB,IAAI,CAACK,EAAN,GAAW,CAAZ,CAA1C,EAFuB;AAGvB,IAAEP,KAAK,EAAEtB,GAAG,CAAC,CAAC,CAAF,CAAZ,EAAkBuB,QAAQ,EAAEvB,GAAG,CAAC,CAACwB,IAAI,CAACK,EAAN,GAAW,CAAZ,CAA/B,EAHuB;AAIvB,IAAEP,KAAK,EAAEtB,GAAG,CAAC,CAACwB,IAAI,CAACM,IAAL,CAAU,CAAV,CAAD,GAAgB,CAAjB,CAAZ,EAAiCP,QAAQ,EAAEvB,GAAG,CAAC,CAACwB,IAAI,CAACK,EAAN,GAAW,CAAZ,CAA9C,EAJuB;AAKvB,IAAEP,KAAK,EAAEtB,GAAG,CAACwB,IAAI,CAACM,IAAL,CAAU,CAAV,IAAe,CAAhB,CAAZ,EAAgCP,QAAQ,EAAEvB,GAAG,CAACwB,IAAI,CAACK,EAAL,GAAU,CAAX,CAA7C,EALuB;AAMvB,IAAEP,KAAK,EAAEtB,GAAG,CAAC,CAAD,CAAZ,EAAiBuB,QAAQ,EAAEvB,GAAG,CAACwB,IAAI,CAACK,EAAL,GAAU,CAAX,CAA9B,EANuB;AAOvB,IAAEP,KAAK,EAAEtB,GAAG,CAACwB,IAAI,CAACM,IAAL,CAAU,CAAV,CAAD,CAAZ,EAA4BP,QAAQ,EAAEvB,GAAG,CAACwB,IAAI,CAACK,EAAL,GAAU,CAAX,CAAzC,EAPuB;AAQvB,IAAEP,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS2B,QAAT,CAAkBI,QAAnB,CAAhB,EAA8CR,QAAQ,EAAEvB,GAAG,CAACwB,IAAI,CAACK,EAAL,GAAU,CAAX,CAA3D,EARuB;;AAUvB;AACA,IAAEP,KAAK,EAAEtB,GAAG,CAAC,CAAD,CAAZ,EAAiBuB,QAAQ,EAAEvB,GAAG,CAAC,CAAD,CAA9B,EAXuB;AAYvB,IAAEsB,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBC,GAAnB,CAAhB,EAAyCT,QAAQ,EAAEvB,GAAG,CAAC,CAAD,CAAtD,EAZuB;AAavB,IAAEsB,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBK,GAAnB,CAAhB,EAAyCV,QAAQ,EAAEvB,GAAG,CAAC,CAAD,CAAtD,EAbuB;AAcvB,IAAEsB,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBG,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEvB,GAAG,CAAC,CAAD,CAAvD,EAduB;AAevB,IAAEsB,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBM,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEvB,GAAG,CAAC,CAAD,CAAvD,EAfuB;AAgBvB,IAAEsB,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBC,GAAnB,CAAhB,EAAyCT,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBC,GAAnB,CAA1D,EAhBuB;AAiBvB,IAAEV,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBK,GAAnB,CAAhB,EAAyCV,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBK,GAAnB,CAA1D,EAjBuB;AAkBvB,IAAEX,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBC,GAAnB,CAAhB,EAAyCT,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBK,GAAnB,CAA1D,EAlBuB;AAmBvB,IAAEX,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBK,GAAnB,CAAhB,EAAyCV,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBC,GAAnB,CAA1D,EAnBuB;AAoBvB,IAAEV,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBG,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBG,IAAnB,CAA3D,EApBuB;AAqBvB,IAAEZ,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBM,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBM,IAAnB,CAA3D,EArBuB;AAsBvB,IAAEZ,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBG,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBM,IAAnB,CAA3D,EAtBuB;AAuBvB,IAAEZ,KAAK,EAAErB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS4B,QAAT,CAAkBM,IAAnB,CAAhB,EAA0CX,QAAQ,EAAEtB,OAAO,CAACI,IAAI,CAACL,GAAL,CAAS+B,QAAT,CAAkBG,IAAnB,CAA3D,EAvBuB,CAAzB;;;AA0BA;AACAR,EAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAahC,WAAW,CAAC,CAAC,CAAF,EAAK,EAAE,KAAK,EAAP,CAAL,EAAiB,IAAjB,CAAX,CAAkCiC,GAAlC,CAAsC,CAAAf,CAAC,KAAID,SAAS,CAACC,CAAD,CAApD,CAAb,CAAR;AACA;AACAK,EAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAa/B,WAAW,CAAC,CAAC,CAAF,EAAKE,MAAM,CAACN,GAAP,CAAW4B,QAAX,CAAoBK,GAAzB,EAA8B,GAA9B,CAAX,CAA8CG,GAA9C,CAAkD,CAAAf,CAAC,KAAID,SAAS,CAACC,CAAD,CAAhE,CAAb,CAAR;AACA;AACAK,EAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAa/B,WAAW,CAACE,MAAM,CAACN,GAAP,CAAW+B,QAAX,CAAoBC,GAArB,EAA0B,CAA1B,EAA6B,GAA7B,CAAX,CAA6CI,GAA7C,CAAiD,CAAAf,CAAC,KAAID,SAAS,CAACC,CAAD,CAA/D,CAAb,CAAR;AACA;AACAK,EAAAA,KAAK,GAAGA,KAAK,CAACS,MAAN,CAAahC,WAAW,CAAC,CAAD,EAAI,KAAK,EAAT,EAAa,IAAb,CAAX,CAA8BiC,GAA9B,CAAkC,CAAAf,CAAC,KAAID,SAAS,CAACC,CAAD,CAAhD,CAAb,CAAR;;AAEA,QAAMgB,GAAW,GAAGlB,CAAC,CAACL,MAAtB;AACAuB,EAAAA,GAAG,CAACC,SAAJ,GAAgB9B,YAAY,CAAC,IAAD,CAA5B;AACAD,EAAAA,GAAG,CAACY,CAAD,EAAI,MAAJ,EAAY,CAACjB,OAAD,CAAZ,EAAuBA,OAAvB,EAAgCmC,GAAhC,EAAqCX,KAArC,CAAH;AACD,CA7DH","sourcesContent":["export const description = `\nExecution Tests for the 'atan' builtin function\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { GPUTest } from '../../../gpu_test.js';\nimport { f32, f32Bits, TypeF32 } from '../../../util/conversion.js';\nimport { biasedRange, linearRange } from '../../../util/math.js';\n\nimport { Case, Config, kBit, kValue, run, ulpThreshold } from './builtin.js';\n\nexport const g = makeTestGroup(GPUTest);\n\ng.test('float_builtin_functions,atan')\n  .uniqueId('b13828d6243d13dd')\n  .specURL('https://www.w3.org/TR/2021/WD-WGSL-20210929/#float-builtin-functions')\n  .desc(\n    `\natan:\nT is f32 or vecN<f32> atan(e: T ) -> T Returns the arc tangent of e. Component-wise when T is a vector. (GLSLstd450Atan)\n\nTODO(#792): Decide what the ground-truth is for these tests. [1]\n`\n  )\n  .params(u =>\n    u\n      .combine('storageClass', ['uniform', 'storage_r', 'storage_rw'] as const)\n      .combine('vectorize', [undefined, 2, 3, 4] as const)\n  )\n  .fn(async t => {\n    // [1]: Need to decide what the ground-truth is.\n    const truthFunc = (x: number): Case => {\n      return { input: f32(x), expected: f32(Math.atan(x)) };\n    };\n\n    // Well defined/border cases\n    let cases: Array<Case> = [\n      { input: f32Bits(kBit.f32.infinity.negative), expected: f32(-Math.PI / 2) },\n      { input: f32(-Math.sqrt(3)), expected: f32(-Math.PI / 3) },\n      { input: f32(-1), expected: f32(-Math.PI / 4) },\n      { input: f32(-Math.sqrt(3) / 3), expected: f32(-Math.PI / 6) },\n      { input: f32(Math.sqrt(3) / 3), expected: f32(Math.PI / 6) },\n      { input: f32(1), expected: f32(Math.PI / 4) },\n      { input: f32(Math.sqrt(3)), expected: f32(Math.PI / 3) },\n      { input: f32Bits(kBit.f32.infinity.positive), expected: f32(Math.PI / 2) },\n\n      // Zero-like cases\n      { input: f32(0), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32(0) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32(0) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32(0) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32Bits(kBit.f32.positive.min) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32Bits(kBit.f32.negative.max) },\n      { input: f32Bits(kBit.f32.positive.min), expected: f32Bits(kBit.f32.negative.max) },\n      { input: f32Bits(kBit.f32.negative.max), expected: f32Bits(kBit.f32.positive.min) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32Bits(kBit.f32.positive.zero) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32Bits(kBit.f32.negative.zero) },\n      { input: f32Bits(kBit.f32.positive.zero), expected: f32Bits(kBit.f32.negative.zero) },\n      { input: f32Bits(kBit.f32.negative.zero), expected: f32Bits(kBit.f32.positive.zero) },\n    ];\n\n    //  -2^32 < x <= -1, biased towards -1\n    cases = cases.concat(biasedRange(-1, -(2 ** 32), 1000).map(x => truthFunc(x)));\n    // -1 <= x < 0, linearly spread\n    cases = cases.concat(linearRange(-1, kValue.f32.negative.max, 100).map(x => truthFunc(x)));\n    // 0 < x <= 1, linearly spread\n    cases = cases.concat(linearRange(kValue.f32.positive.min, 1, 100).map(x => truthFunc(x)));\n    // 1 <= x < 2^32, biased towards 1\n    cases = cases.concat(biasedRange(1, 2 ** 32, 1000).map(x => truthFunc(x)));\n\n    const cfg: Config = t.params;\n    cfg.cmpFloats = ulpThreshold(4096);\n    run(t, 'atan', [TypeF32], TypeF32, cfg, cases);\n  });\n"],"file":"atan.spec.js"}