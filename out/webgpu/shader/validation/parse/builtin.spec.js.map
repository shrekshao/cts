{"version":3,"file":"builtin.spec.js","names":["description","makeTestGroup","ShaderValidationTest","g","kValidBuiltin","Set","kInvalidBuiltin","test","desc","params","u","combine","fn","t","v","builtin","replace","code","expectCompileResult","has"],"sources":["../../../../../src/webgpu/shader/validation/parse/builtin.spec.ts"],"sourcesContent":["export const description = `Validation tests for @builtin`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { ShaderValidationTest } from '../shader_validation_test.js';\n\nexport const g = makeTestGroup(ShaderValidationTest);\n\nconst kValidBuiltin = new Set([\n  `@builtin(position)`,\n  `@builtin(position,)`,\n  `@ \\n builtin(position)`,\n  `@/^ comment ^/builtin/^ comment ^/\\n\\n(\\t/^comment^/position/^comment^/)`,\n]);\nconst kInvalidBuiltin = new Set([\n  `@abuiltin(position)`,\n  `@builtin`,\n  `@builtin()`,\n  `@builtin position`,\n  `@builtin position)`,\n  `@builtin(position`,\n  `@builtin(position, frag_depth)`,\n  `@builtin(identifier)`,\n  `@builtin(2)`,\n]);\n\ng.test('parse')\n  .desc(`Test that @builtin is parsed correctly.`)\n  .params(u => u.combine('builtin', new Set([...kValidBuiltin, ...kInvalidBuiltin])))\n  .fn(t => {\n    const v = t.params.builtin.replace(/\\^/g, '*');\n    const code = `\n@vertex\nfn main() -> ${v} vec4<f32> {\n  return vec4<f32>(.4, .2, .3, .1);\n}`;\n    t.expectCompileResult(kValidBuiltin.has(t.params.builtin), code);\n  });\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI,+BAA8B,CAE1D,SAASC,aAAa,QAAQ,4CAA4C;AAC1E,SAASC,oBAAoB,QAAQ,8BAA8B;;AAEnE,OAAO,MAAMC,CAAC,GAAGF,aAAa,CAACC,oBAAoB,CAAC;;AAEpD,MAAME,aAAa,GAAG,IAAIC,GAAG,CAAC;AAC3B,oBAAmB;AACnB,qBAAoB;AACpB,wBAAuB;AACvB,0EAAyE,CAC3E,CAAC;;AACF,MAAMC,eAAe,GAAG,IAAID,GAAG,CAAC;AAC7B,qBAAoB;AACpB,UAAS;AACT,YAAW;AACX,mBAAkB;AAClB,oBAAmB;AACnB,mBAAkB;AAClB,gCAA+B;AAC/B,sBAAqB;AACrB,aAAY,CACd,CAAC;;;AAEFF,CAAC,CAACI,IAAI,CAAC,OAAO,CAAC;AACZC,IAAI,CAAE,yCAAwC,CAAC;AAC/CC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,SAAS,EAAE,IAAIN,GAAG,CAAC,CAAC,GAAGD,aAAa,EAAE,GAAGE,eAAe,CAAC,CAAC,CAAC,CAAC;AAClFM,EAAE,CAAC,CAAAC,CAAC,KAAI;EACP,MAAMC,CAAC,GAAGD,CAAC,CAACJ,MAAM,CAACM,OAAO,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;EAC9C,MAAMC,IAAI,GAAI;AAClB;AACA,eAAeH,CAAE;AACjB;AACA,EAAE;EACED,CAAC,CAACK,mBAAmB,CAACd,aAAa,CAACe,GAAG,CAACN,CAAC,CAACJ,MAAM,CAACM,OAAO,CAAC,EAAEE,IAAI,CAAC;AAClE,CAAC,CAAC"}