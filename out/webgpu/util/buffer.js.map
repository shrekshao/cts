{"version":3,"sources":["../../../src/webgpu/util/buffer.ts"],"names":["memcpy","align","makeBufferWithContents","device","dataArray","usage","opts","buffer","createBuffer","mappedAtCreation","size","byteLength","padToMultipleOf4","src","dst","getMappedRange","unmap"],"mappings":";AAAA;AACA,GADA,SAASA,MAAT,QAA6C,2BAA7C,CAEA,SAASC,KAAT,QAAsB,WAAtB;;AAEA;AACA;AACA;AACA,OAAO,SAASC,sBAAT;AACLC,MADK;AAELC,SAFK;AAGLC,KAHK;AAILC,IAAoC,GAAG,EAJlC;AAKM;AACX,QAAMC,MAAM,GAAGJ,MAAM,CAACK,YAAP,CAAoB;AACjCC,IAAAA,gBAAgB,EAAE,IADe;AAEjCC,IAAAA,IAAI,EAAET,KAAK,CAACG,SAAS,CAACO,UAAX,EAAuBL,IAAI,CAACM,gBAAL,GAAwB,CAAxB,GAA4B,CAAnD,CAFsB;AAGjCP,IAAAA,KAHiC,EAApB,CAAf;;AAKAL,EAAAA,MAAM,CAAC,EAAEa,GAAG,EAAET,SAAP,EAAD,EAAqB,EAAEU,GAAG,EAAEP,MAAM,CAACQ,cAAP,EAAP,EAArB,CAAN;AACAR,EAAAA,MAAM,CAACS,KAAP;AACA,SAAOT,MAAP;AACD","sourcesContent":["import { memcpy, TypedArrayBufferView } from '../../common/util/util.js';\n\nimport { align } from './math.js';\n\n/**\n * Creates a buffer with the contents of some TypedArray.\n */\nexport function makeBufferWithContents(\n  device: GPUDevice,\n  dataArray: TypedArrayBufferView,\n  usage: GPUBufferUsageFlags,\n  opts: { padToMultipleOf4?: boolean } = {}\n): GPUBuffer {\n  const buffer = device.createBuffer({\n    mappedAtCreation: true,\n    size: align(dataArray.byteLength, opts.padToMultipleOf4 ? 4 : 1),\n    usage,\n  });\n  memcpy({ src: dataArray }, { dst: buffer.getMappedRange() });\n  buffer.unmap();\n  return buffer;\n}\n"],"file":"buffer.js"}