{"version":3,"sources":["../../../src/webgpu/util/buffer.ts"],"names":["memcpy","align","makeBufferWithContents","device","dataArray","usage","buffer","createBuffer","mappedAtCreation","size","byteLength","src","dst","getMappedRange","unmap"],"mappings":";AAAA;AACA,GADA,SAASA,MAAT,QAA6C,2BAA7C,CAEA,SAASC,KAAT,QAAsB,WAAtB;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,sBAAT;AACLC,MADK;AAELC,SAFK;AAGLC,KAHK;AAIM;AACX,QAAMC,MAAM,GAAGH,MAAM,CAACI,YAAP,CAAoB;AACjCC,IAAAA,gBAAgB,EAAE,IADe;AAEjCC,IAAAA,IAAI,EAAER,KAAK,CAACG,SAAS,CAACM,UAAX,EAAuB,CAAvB,CAFsB;AAGjCL,IAAAA,KAHiC,EAApB,CAAf;;AAKAL,EAAAA,MAAM,CAAC,EAAEW,GAAG,EAAEP,SAAP,EAAD,EAAqB,EAAEQ,GAAG,EAAEN,MAAM,CAACO,cAAP,EAAP,EAArB,CAAN;AACAP,EAAAA,MAAM,CAACQ,KAAP;AACA,SAAOR,MAAP;AACD","sourcesContent":["import { memcpy, TypedArrayBufferView } from '../../common/util/util.js';\n\nimport { align } from './math.js';\n\n/**\n * Creates a buffer with the contents of some TypedArray.\n * The buffer size will always be aligned to 4 as we set mappedAtCreation === true when creating the\n * buffer.\n */\nexport function makeBufferWithContents(\n  device: GPUDevice,\n  dataArray: TypedArrayBufferView,\n  usage: GPUBufferUsageFlags\n): GPUBuffer {\n  const buffer = device.createBuffer({\n    mappedAtCreation: true,\n    size: align(dataArray.byteLength, 4),\n    usage,\n  });\n  memcpy({ src: dataArray }, { dst: buffer.getMappedRange() });\n  buffer.unmap();\n  return buffer;\n}\n"],"file":"buffer.js"}