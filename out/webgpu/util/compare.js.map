{"version":3,"file":"compare.js","names":["getIsBuildingDataCache","Colors","deserializeExpectation","serializeExpectation","toComparator","isFloatValue","Scalar","Vector","F32Interval","compareValue","got","expected","gTy","type","eTy","bothFloatTypes","matched","red","toString","g","e","isFloat","kind","value","green","gLen","elements","length","eLen","gElements","Array","eElements","i","Math","max","cmp","compare","join","Error","compareInterval","contains","compareVector","elementType","results","map","_","idx","match","index","failures","filter","v","expected_string","anyOf","expectations","comparator","failed","Set","add","data","skipUndefined","expectation","undefined","deserializeComparator"],"sources":["../../../src/webgpu/util/compare.ts"],"sourcesContent":["import { getIsBuildingDataCache } from '../../common/framework/data_cache.js';\nimport { Colors } from '../../common/util/colors.js';\nimport {\n  deserializeExpectation,\n  SerializedExpectation,\n  serializeExpectation,\n} from '../shader/execution/expression/case_cache.js';\nimport { Expectation, toComparator } from '../shader/execution/expression/expression.js';\n\nimport { isFloatValue, Scalar, Value, Vector } from './conversion.js';\nimport { F32Interval } from './f32_interval.js';\n\n/** Comparison describes the result of a Comparator function. */\nexport interface Comparison {\n  matched: boolean; // True if the two values were considered a match\n  got: string; // The string representation of the 'got' value (possibly with markup)\n  expected: string; // The string representation of the 'expected' value (possibly with markup)\n}\n\n/** Comparator is a function that compares whether the provided value matches an expectation. */\nexport interface Comparator {\n  (got: Value): Comparison;\n}\n\n/**\n * compares 'got' Value  to 'expected' Value, returning the Comparison information.\n * @param got the Value obtained from the test\n * @param expected the expected Value\n * @returns the comparison results\n */\nfunction compareValue(got: Value, expected: Value): Comparison {\n  {\n    // Check types\n    const gTy = got.type;\n    const eTy = expected.type;\n    const bothFloatTypes = isFloatValue(got) && isFloatValue(expected);\n    if (gTy !== eTy && !bothFloatTypes) {\n      return {\n        matched: false,\n        got: `${Colors.red(gTy.toString())}(${got})`,\n        expected: `${Colors.red(eTy.toString())}(${expected})`,\n      };\n    }\n  }\n\n  if (got instanceof Scalar) {\n    const g = got;\n    const e = expected as Scalar;\n    const isFloat = g.type.kind === 'f64' || g.type.kind === 'f32' || g.type.kind === 'f16';\n    const matched =\n      (isFloat && (g.value as number) === (e.value as number)) || (!isFloat && g.value === e.value);\n    return {\n      matched,\n      got: g.toString(),\n      expected: matched ? Colors.green(e.toString()) : Colors.red(e.toString()),\n    };\n  }\n\n  if (got instanceof Vector) {\n    const gLen = got.elements.length;\n    const eLen = (expected as Vector).elements.length;\n    let matched = gLen === eLen;\n    const gElements = new Array<string>(gLen);\n    const eElements = new Array<string>(eLen);\n    for (let i = 0; i < Math.max(gLen, eLen); i++) {\n      if (i < gLen && i < eLen) {\n        const g = got.elements[i];\n        const e = (expected as Vector).elements[i];\n        const cmp = compare(g, e);\n        matched = matched && cmp.matched;\n        gElements[i] = cmp.got;\n        eElements[i] = cmp.expected;\n        continue;\n      }\n      matched = false;\n      if (i < gLen) {\n        gElements[i] = got.elements[i].toString();\n      }\n      if (i < eLen) {\n        eElements[i] = (expected as Vector).elements[i].toString();\n      }\n    }\n    return {\n      matched,\n      got: `${got.type}(${gElements.join(', ')})`,\n      expected: `${expected.type}(${eElements.join(', ')})`,\n    };\n  }\n  throw new Error(`unhandled type '${typeof got}`);\n}\n\n/**\n * Tests it a 'got' Value is contained in 'expected' interval, returning the Comparison information.\n * @param got the Value obtained from the test\n * @param expected the expected F32Interval\n * @returns the comparison results\n */\nfunction compareInterval(got: Value, expected: F32Interval): Comparison {\n  {\n    // Check type\n    const gTy = got.type;\n    if (!isFloatValue(got)) {\n      return {\n        matched: false,\n        got: `${Colors.red(gTy.toString())}(${got})`,\n        expected: `floating point value`,\n      };\n    }\n  }\n\n  if (got instanceof Scalar) {\n    const g = got.value as number;\n    const matched = expected.contains(g);\n    return {\n      matched,\n      got: g.toString(),\n      expected: matched ? Colors.green(expected.toString()) : Colors.red(expected.toString()),\n    };\n  }\n\n  // Vector results are currently not handled\n  throw new Error(`unhandled type '${typeof got}`);\n}\n\n/**\n * Tests it a 'got' Value is contained in 'expected' vector, returning the Comparison information.\n * @param got the Value obtained from the test, is expected to be a Vector\n * @param expected the expected array of F32Intervals, one for each element of the vector\n * @returns the comparison results\n */\nfunction compareVector(got: Value, expected: F32Interval[]): Comparison {\n  // Check got type\n  if (!(got instanceof Vector)) {\n    return {\n      matched: false,\n      got: `${Colors.red((typeof got).toString())}(${got})`,\n      expected: `Vector`,\n    };\n  }\n\n  // Check element type\n  {\n    const gTy = got.type.elementType;\n    if (!isFloatValue(got.elements[0])) {\n      return {\n        matched: false,\n        got: `${Colors.red(gTy.toString())}(${got})`,\n        expected: `floating point elements`,\n      };\n    }\n  }\n\n  if (got.elements.length !== expected.length) {\n    return {\n      matched: false,\n      got: `Vector of ${got.elements.length} elements`,\n      expected: `${expected.length} elements`,\n    };\n  }\n\n  const results = got.elements.map((_, idx) => {\n    const g = got.elements[idx].value as number;\n    return { match: expected[idx].contains(g), index: idx };\n  });\n\n  const failures = results.filter(v => !v.match).map(v => v.index);\n  if (failures.length !== 0) {\n    const expected_string = expected.map((v, idx) =>\n      idx in failures ? Colors.red(`[${v}]`) : Colors.green(`[${v}]`)\n    );\n    return {\n      matched: false,\n      got: `[${got.elements}]`,\n      expected: `[${expected_string}]`,\n    };\n  }\n\n  return {\n    matched: true,\n    got: `[${got.elements}]`,\n    expected: `[${Colors.green(expected.toString())}]`,\n  };\n}\n\n/**\n * compare() compares 'got' to 'expected', returning the Comparison information.\n * @param got the result obtained from the test\n * @param expected the expected result\n * @returns the comparison results\n */\nexport function compare(got: Value, expected: Value | F32Interval | F32Interval[]): Comparison {\n  if (expected instanceof Array) {\n    return compareVector(got, expected);\n  }\n\n  if (expected instanceof F32Interval) {\n    return compareInterval(got, expected);\n  }\n\n  return compareValue(got, expected);\n}\n\n/** @returns a Comparator that checks whether a test value matches any of the provided options */\nexport function anyOf(\n  ...expectations: Expectation[]\n): Comparator | (Comparator & SerializedComparator) {\n  const comparator = (got: Value) => {\n    const failed = new Set<string>();\n    for (const e of expectations) {\n      const cmp = toComparator(e)(got);\n      if (cmp.matched) {\n        return cmp;\n      }\n      failed.add(cmp.expected);\n    }\n    return { matched: false, got: got.toString(), expected: [...failed].join(' or ') };\n  };\n\n  if (getIsBuildingDataCache()) {\n    // If there's an active DataCache, and it supports storing, then append the\n    // comparator kind and serialized expectations to the comparator, so it can\n    // be serialized.\n    comparator.kind = 'anyOf';\n    comparator.data = expectations.map(e => serializeExpectation(e));\n  }\n  return comparator;\n}\n\n/** @returns a Comparator that skips the test if the expectation is undefined */\nexport function skipUndefined(\n  expectation: Expectation | undefined\n): Comparator | (Comparator & SerializedComparator) {\n  const comparator = (got: Value) => {\n    if (expectation !== undefined) {\n      return toComparator(expectation)(got);\n    }\n    return { matched: true, got: got.toString(), expected: `Treating 'undefined' as Any` };\n  };\n\n  if (getIsBuildingDataCache()) {\n    // If there's an active DataCache, and it supports storing, then append the\n    // comparator kind and serialized expectations to the comparator, so it can\n    // be serialized.\n    comparator.kind = 'skipUndefined';\n    if (expectation !== undefined) {\n      comparator.data = serializeExpectation(expectation);\n    }\n  }\n  return comparator;\n}\n\n/** SerializedComparatorAnyOf is the serialized type of an `anyOf` comparator. */\ntype SerializedComparatorAnyOf = {\n  kind: 'anyOf';\n  data: SerializedExpectation[];\n};\n\n/** SerializedComparatorSkipUndefined is the serialized type of an `skipUndefined` comparator. */\ntype SerializedComparatorSkipUndefined = {\n  kind: 'skipUndefined';\n  data?: SerializedExpectation;\n};\n\n/** SerializedComparator is a union of all the possible serialized comparator types. */\nexport type SerializedComparator = SerializedComparatorAnyOf | SerializedComparatorSkipUndefined;\n\n/**\n * Deserializes a comparator from a SerializedComparator.\n * @param data the SerializedComparator\n * @returns the deserialized Comparator.\n */\nexport function deserializeComparator(data: SerializedComparator): Comparator {\n  switch (data.kind) {\n    case 'anyOf': {\n      return anyOf(...data.data.map(e => deserializeExpectation(e)));\n    }\n    case 'skipUndefined': {\n      return skipUndefined(data.data !== undefined ? deserializeExpectation(data.data) : undefined);\n    }\n  }\n  throw `unhandled comparator kind`;\n}\n"],"mappings":"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"}