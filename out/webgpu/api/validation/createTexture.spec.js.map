{"version":3,"sources":["../../../../src/webgpu/api/validation/createTexture.spec.ts"],"names":["description","SkipTestCase","makeTestGroup","assert","kTextureFormats","kTextureFormatInfo","kCompressedTextureFormats","kTextureDimensions","kTextureUsages","kUncompressedTextureFormats","kRegularTextureFormats","kFeaturesForFormats","textureDimensionAndFormatCompatible","kLimitInfo","viewCompatible","filterFormatsByFeature","GPUConst","maxMipLevelCount","ValidationTest","g","test","desc","params","u","combine","undefined","beginSubcases","filter","dimension","format","beforeAllSubcases","t","info","selectDeviceOrSkipTestCase","feature","fn","zeroArgument","size","blockWidth","blockHeight","mipLevelCount","usage","GPUTextureUsage","TEXTURE_BINDING","descriptor","success","expectValidationError","device","createTexture","unless","largestDimension","kTargetMipLevelCount","kTargetLargeSize","largeSize","Math","floor","combineWithParams","sampleCount","RENDER_ATTACHMENT","multisample","renderable","arrayLayerCount","expand","p","usageSet","Set","usage0","usage1","add","TextureUsage","STORAGE_BINDING","storage","expandWithParams","_success","maxTextureDimension1D","default","width","height","depthOrArrayLayers","maxTextureDimension2D","maxTextureArrayLayers","maxTextureDimension3D","appliedDimension","formatFeature","viewFormatFeature","viewFormat","compatible","viewFormats"],"mappings":"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","sourcesContent":["export const description = `createTexture validation tests.`;\n\nimport { SkipTestCase } from '../../../common/framework/fixture.js';\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert } from '../../../common/util/util.js';\nimport {\n  kTextureFormats,\n  kTextureFormatInfo,\n  kCompressedTextureFormats,\n  kTextureDimensions,\n  kTextureUsages,\n  kUncompressedTextureFormats,\n  kRegularTextureFormats,\n  kFeaturesForFormats,\n  textureDimensionAndFormatCompatible,\n  kLimitInfo,\n  viewCompatible,\n  filterFormatsByFeature,\n} from '../../capability_info.js';\nimport { GPUConst } from '../../constants.js';\nimport { maxMipLevelCount } from '../../util/texture/base.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('zero_size_and_usage')\n  .desc(\n    `Test texture creation with zero or nonzero size of\n    width, height, depthOrArrayLayers and mipLevelCount, usage for every dimension, and\n    representative formats.\n  `\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .combine('format', [\n        'rgba8unorm',\n        'rgb10a2unorm',\n        'bc1-rgba-unorm',\n        'depth24plus-stencil8',\n      ] as const)\n      .beginSubcases()\n      .combine('zeroArgument', [\n        'none',\n        'width',\n        'height',\n        'depthOrArrayLayers',\n        'mipLevelCount',\n        'usage',\n      ] as const)\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, zeroArgument, format } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const size = [info.blockWidth, info.blockHeight, 1];\n    let mipLevelCount = 1;\n    let usage = GPUTextureUsage.TEXTURE_BINDING;\n\n    switch (zeroArgument) {\n      case 'width':\n        size[0] = 0;\n        break;\n      case 'height':\n        size[1] = 0;\n        break;\n      case 'depthOrArrayLayers':\n        size[2] = 0;\n        break;\n      case 'mipLevelCount':\n        mipLevelCount = 0;\n        break;\n      case 'usage':\n        usage = 0;\n        break;\n      default:\n        break;\n    }\n\n    const descriptor = {\n      size,\n      mipLevelCount,\n      dimension,\n      format,\n      usage,\n    };\n\n    const success = zeroArgument === 'none';\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('dimension_type_and_format_compatibility')\n  .desc(\n    `Test every dimension type on every format. Note that compressed formats and depth/stencil formats are not valid for 1D/3D dimension types.`\n  )\n  .params(u =>\n    u.combine('dimension', [undefined, ...kTextureDimensions]).combine('format', kTextureFormats)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const descriptor: GPUTextureDescriptor = {\n      size: [info.blockWidth, info.blockHeight, 1],\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !textureDimensionAndFormatCompatible(dimension, format));\n  });\n\ng.test('mipLevelCount,format')\n  .desc(\n    `Test texture creation with no mipmap chain, partial mipmap chain, full mipmap chain, out-of-bounds mipmap chain\n    for every format with different texture dimension types.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .combine('format', kTextureFormats)\n      .beginSubcases()\n      .combine('mipLevelCount', [1, 2, 3, 6, 7])\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n      .combine('largestDimension', [0, 1, 2])\n      .unless(({ dimension, largestDimension }) => dimension === '1d' && largestDimension > 0)\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, mipLevelCount, largestDimension } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    // Compute dimensions such that the dimensions are in range [17, 32] and aligned with the\n    // format block size so that there will be exactly 6 mip levels.\n    const kTargetMipLevelCount = 5;\n    const kTargetLargeSize = (1 << kTargetMipLevelCount) - 1;\n    const largeSize = [\n      Math.floor(kTargetLargeSize / info.blockWidth) * info.blockWidth,\n      Math.floor(kTargetLargeSize / info.blockHeight) * info.blockHeight,\n      kTargetLargeSize,\n    ];\n    assert(17 <= largeSize[0] && largeSize[0] <= 32);\n    assert(17 <= largeSize[1] && largeSize[1] <= 32);\n\n    // Note that compressed formats are not valid for 1D. They have already been filtered out for 1D\n    // in this test. So there is no dilemma about size.width equals 1 vs\n    // size.width % info.blockHeight equals 0 for 1D compressed formats.\n    const size = [info.blockWidth, info.blockHeight, 1];\n    size[largestDimension] = largeSize[largestDimension];\n\n    const descriptor = {\n      size,\n      mipLevelCount,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success = mipLevelCount <= maxMipLevelCount(descriptor);\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('mipLevelCount,bound_check')\n  .desc(\n    `Test mip level count bound check upon different texture size and different texture dimension types.\n    The cases below test: 1) there must be no mip levels after a 1 level (1D texture), or 1x1 level (2D texture), or 1x1x1 level (3D texture), 2) array layers are not mip-mapped, 3) power-of-two, non-power-of-two, and non-square sizes.`\n  )\n  .params(u =>\n    u //\n      .combine('format', ['rgba8unorm', 'bc1-rgba-unorm'] as const)\n      .beginSubcases()\n      .combineWithParams([\n        { size: [32, 32] }, // Mip level sizes: 32x32, 16x16, 8x8, 4x4, 2x2, 1x1\n        { size: [31, 32] }, // Mip level sizes: 31x32, 15x16, 7x8, 3x4, 1x2, 1x1\n        { size: [28, 32] }, // Mip level sizes: 28x32, 14x16, 7x8, 3x4, 1x2, 1x1\n        { size: [32, 31] }, // Mip level sizes: 32x31, 16x15, 8x7, 4x3, 2x1, 1x1\n        { size: [32, 28] }, // Mip level sizes: 32x28, 16x14, 8x7, 4x3, 2x1, 1x1\n        { size: [31, 31] }, // Mip level sizes: 31x31, 15x15, 7x7, 3x3, 1x1\n        { size: [32], dimension: '1d' as const }, // Mip level sizes: 32, 16, 8, 4, 2, 1\n        { size: [31], dimension: '1d' as const }, // Mip level sizes: 31, 15, 7, 3, 1\n        { size: [32, 32, 32], dimension: '3d' as const }, // Mip level sizes: 32x32x32, 16x16x16, 8x8x8, 4x4x4, 2x2x2, 1x1x1\n        { size: [32, 31, 31], dimension: '3d' as const }, // Mip level sizes: 32x31x31, 16x15x15, 8x7x7, 4x3x3, 2x1x1, 1x1x1\n        { size: [31, 32, 31], dimension: '3d' as const }, // Mip level sizes: 31x32x31, 15x16x15, 7x8x7, 3x4x3, 1x2x1, 1x1x1\n        { size: [31, 31, 32], dimension: '3d' as const }, // Mip level sizes: 31x31x32, 15x15x16, 7x7x8, 3x3x4, 1x1x2, 1x1x1\n        { size: [31, 31, 31], dimension: '3d' as const }, // Mip level sizes: 31x31x31, 15x15x15, 7x7x7, 3x3x3, 1x1x1\n        { size: [32, 8] }, // Mip levels: 32x8, 16x4, 8x2, 4x1, 2x1, 1x1\n        { size: [32, 32, 64] }, // Mip levels: 32x32x64, 16x16x64, 8x8x64, 4x4x64, 2x2x64, 1x1x64\n        { size: [32, 32, 64], dimension: '3d' as const }, // Mip levels: 32x32x64, 16x16x32, 8x8x16, 4x4x8, 2x2x4, 1x1x2, 1x1x1\n      ])\n      .unless(\n        ({ format, size, dimension }) =>\n          format === 'bc1-rgba-unorm' &&\n          (dimension === '1d' ||\n            dimension === '3d' ||\n            size[0] % kTextureFormatInfo[format].blockWidth !== 0 ||\n            size[1] % kTextureFormatInfo[format].blockHeight !== 0)\n      )\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { format, size, dimension } = t.params;\n\n    const descriptor = {\n      size,\n      mipLevelCount: 0,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const mipLevelCount = maxMipLevelCount(descriptor);\n    descriptor.mipLevelCount = mipLevelCount;\n    t.device.createTexture(descriptor);\n\n    descriptor.mipLevelCount = mipLevelCount + 1;\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    });\n  });\n\ng.test('mipLevelCount,bound_check,bigger_than_integer_bit_width')\n  .desc(`Test mip level count bound check when mipLevelCount is bigger than integer bit width`)\n  .fn(async t => {\n    const descriptor = {\n      size: [32, 32],\n      mipLevelCount: 100,\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    });\n  });\n\ng.test('sampleCount,various_sampleCount_with_all_formats')\n  .desc(\n    `Test texture creation with various (valid or invalid) sample count and all formats. Note that 1D and 3D textures can't support multisample.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kTextureFormats)\n      .beginSubcases()\n      .combine('sampleCount', [0, 1, 2, 4, 8, 16, 32, 256])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, sampleCount, format } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n    const usage =\n      sampleCount > 1\n        ? GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT\n        : GPUTextureUsage.TEXTURE_BINDING;\n    const descriptor = {\n      size: [32 * blockWidth, 32 * blockHeight, 1],\n      sampleCount,\n      dimension,\n      format,\n      usage,\n    };\n\n    const success =\n      sampleCount === 1 ||\n      (sampleCount === 4 &&\n        kTextureFormatInfo[format].multisample &&\n        kTextureFormatInfo[format].renderable);\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('sampleCount,valid_sampleCount_with_other_parameter_varies')\n  .desc(\n    `Test texture creation with valid sample count when dimensions, arrayLayerCount, mipLevelCount,\n     format, and usage varies. Texture can be single sample (sampleCount is 1) or multi-sample\n     (sampleCount is 4). Multisample texture requires that\n     1) its dimension is 2d or undefined,\n     2) its format supports multisample,\n     3) its mipLevelCount and arrayLayerCount are 1,\n     4) its usage doesn't include STORAGE_BINDING,\n     5) its usage includes RENDER_ATTACHMENT.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .combine('format', kTextureFormats)\n      .beginSubcases()\n      .combine('sampleCount', [1, 4])\n      .combine('arrayLayerCount', [1, 2])\n      .unless(\n        ({ dimension, arrayLayerCount }) =>\n          arrayLayerCount === 2 && dimension !== '2d' && dimension !== undefined\n      )\n      .combine('mipLevelCount', [1, 2])\n      .expand('usage', p => {\n        const usageSet = new Set<number>();\n        for (const usage0 of kTextureUsages) {\n          for (const usage1 of kTextureUsages) {\n            usageSet.add(usage0 | usage1);\n          }\n        }\n        return usageSet;\n      })\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n      .unless(({ usage, format, mipLevelCount, dimension }) => {\n        const info = kTextureFormatInfo[format];\n        return (\n          ((usage & GPUConst.TextureUsage.RENDER_ATTACHMENT) !== 0 &&\n            (!info.renderable || dimension !== '2d')) ||\n          ((usage & GPUConst.TextureUsage.STORAGE_BINDING) !== 0 && !info.storage) ||\n          (mipLevelCount !== 1 && dimension === '1d')\n        );\n      })\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, sampleCount, format, mipLevelCount, arrayLayerCount, usage } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n    const size =\n      dimension === '1d'\n        ? [32 * blockWidth, 1 * blockHeight, 1]\n        : dimension === '2d' || dimension === undefined\n        ? [32 * blockWidth, 32 * blockHeight, arrayLayerCount]\n        : [32 * blockWidth, 32 * blockHeight, 32];\n    const descriptor = {\n      size,\n      mipLevelCount,\n      sampleCount,\n      dimension,\n      format,\n      usage,\n    };\n\n    const success =\n      sampleCount === 1 ||\n      (sampleCount === 4 &&\n        (dimension === '2d' || dimension === undefined) &&\n        kTextureFormatInfo[format].multisample &&\n        mipLevelCount === 1 &&\n        arrayLayerCount === 1 &&\n        (usage & GPUConst.TextureUsage.RENDER_ATTACHMENT) !== 0 &&\n        (usage & GPUConst.TextureUsage.STORAGE_BINDING) === 0);\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,default_value_and_smallest_size,uncompressed_format')\n  .desc(\n    `Test default values for height and depthOrArrayLayers for every dimension type and every uncompressed format.\n\t  It also tests smallest size (lower bound) for every dimension type and every uncompressed format, while other texture_size tests are testing the upper bound.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .combine('format', kUncompressedTextureFormats)\n      .beginSubcases()\n      .combine('size', [[1], [1, 1], [1, 1, 1]])\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.device.createTexture(descriptor);\n  });\n\ng.test('texture_size,default_value_and_smallest_size,compressed_format')\n  .desc(\n    `Test default values for height and depthOrArrayLayers for every dimension type and every compressed format.\n\t  It also tests smallest size (lower bound) for every dimension type and every compressed format, while other texture_size tests are testing the upper bound.`\n  )\n  .params(u =>\n    u\n      // Compressed formats are invalid for 1D and 3D.\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .expandWithParams(p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          { size: [1], _success: false },\n          { size: [blockWidth], _success: false },\n          { size: [1, 1], _success: false },\n          { size: [blockWidth, blockHeight], _success: true },\n          { size: [1, 1, 1], _success: false },\n          { size: [blockWidth, blockHeight, 1], _success: true },\n        ];\n      })\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, size, _success } = t.params;\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !_success);\n  });\n\ng.test('texture_size,1d_texture')\n  .desc(`Test texture size requirement for 1D texture`)\n  .params(u =>\n    u //\n      // Compressed and depth-stencil textures are invalid for 1D.\n      .combine('format', kRegularTextureFormats)\n      .beginSubcases()\n      .combine('width', [\n        kLimitInfo.maxTextureDimension1D.default - 1,\n        kLimitInfo.maxTextureDimension1D.default,\n        kLimitInfo.maxTextureDimension1D.default + 1,\n      ])\n      .combine('height', [1, 2])\n      .combine('depthOrArrayLayers', [1, 2])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { format, width, height, depthOrArrayLayers } = t.params;\n\n    const descriptor: GPUTextureDescriptor = {\n      size: [width, height, depthOrArrayLayers],\n      dimension: '1d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      width <= kLimitInfo.maxTextureDimension1D.default && height === 1 && depthOrArrayLayers === 1;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,2d_texture,uncompressed_format')\n  .desc(`Test texture size requirement for 2D texture with uncompressed format.`)\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kUncompressedTextureFormats)\n      .combine('size', [\n        // Test the bound of width\n        [kLimitInfo.maxTextureDimension2D.default - 1, 1, 1],\n        [kLimitInfo.maxTextureDimension2D.default, 1, 1],\n        [kLimitInfo.maxTextureDimension2D.default + 1, 1, 1],\n        // Test the bound of height\n        [1, kLimitInfo.maxTextureDimension2D.default - 1, 1],\n        [1, kLimitInfo.maxTextureDimension2D.default, 1],\n        [1, kLimitInfo.maxTextureDimension2D.default + 1, 1],\n        // Test the bound of array layers\n        [1, 1, kLimitInfo.maxTextureArrayLayers.default - 1],\n        [1, 1, kLimitInfo.maxTextureArrayLayers.default],\n        [1, 1, kLimitInfo.maxTextureArrayLayers.default + 1],\n      ])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] <= kLimitInfo.maxTextureDimension2D.default &&\n      size[1] <= kLimitInfo.maxTextureDimension2D.default &&\n      size[2] <= kLimitInfo.maxTextureArrayLayers.default;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,2d_texture,compressed_format')\n  .desc(`Test texture size requirement for 2D texture with compressed format.`)\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kCompressedTextureFormats)\n      .expand('size', p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          // Test the bound of width\n          [kLimitInfo.maxTextureDimension2D.default - 1, 1, 1],\n          [kLimitInfo.maxTextureDimension2D.default - blockWidth, 1, 1],\n          [kLimitInfo.maxTextureDimension2D.default - blockWidth, blockHeight, 1],\n          [kLimitInfo.maxTextureDimension2D.default, 1, 1],\n          [kLimitInfo.maxTextureDimension2D.default, blockHeight, 1],\n          [kLimitInfo.maxTextureDimension2D.default + 1, 1, 1],\n          [kLimitInfo.maxTextureDimension2D.default + blockWidth, 1, 1],\n          [kLimitInfo.maxTextureDimension2D.default + blockWidth, blockHeight, 1],\n          // Test the bound of height\n          [1, kLimitInfo.maxTextureDimension2D.default - 1, 1],\n          [1, kLimitInfo.maxTextureDimension2D.default - blockHeight, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension2D.default - blockHeight, 1],\n          [1, kLimitInfo.maxTextureDimension2D.default, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension2D.default, 1],\n          [1, kLimitInfo.maxTextureDimension2D.default + 1, 1],\n          [1, kLimitInfo.maxTextureDimension2D.default + blockWidth, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension2D.default + blockHeight, 1],\n          // Test the bound of array layers\n          [1, 1, kLimitInfo.maxTextureArrayLayers.default - 1],\n          [blockWidth, 1, kLimitInfo.maxTextureArrayLayers.default - 1],\n          [1, blockHeight, kLimitInfo.maxTextureArrayLayers.default - 1],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureArrayLayers.default - 1],\n          [1, 1, kLimitInfo.maxTextureArrayLayers.default],\n          [blockWidth, 1, kLimitInfo.maxTextureArrayLayers.default],\n          [1, blockHeight, kLimitInfo.maxTextureArrayLayers.default],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureArrayLayers.default],\n          [1, 1, kLimitInfo.maxTextureArrayLayers.default + 1],\n          [blockWidth, 1, kLimitInfo.maxTextureArrayLayers.default + 1],\n          [1, blockHeight, kLimitInfo.maxTextureArrayLayers.default + 1],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureArrayLayers.default + 1],\n        ];\n      })\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] % info.blockWidth === 0 &&\n      size[1] % info.blockHeight === 0 &&\n      size[0] <= kLimitInfo.maxTextureDimension2D.default &&\n      size[1] <= kLimitInfo.maxTextureDimension2D.default &&\n      size[2] <= kLimitInfo.maxTextureArrayLayers.default;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,3d_texture,uncompressed_format')\n  .desc(\n    `Test texture size requirement for 3D texture with uncompressed format. Note that depth/stencil formats are invalid for 3D textures, so we only test regular formats.`\n  )\n  .params(u =>\n    u //\n      .combine('format', kRegularTextureFormats)\n      .beginSubcases()\n      .combine('size', [\n        // Test the bound of width\n        [kLimitInfo.maxTextureDimension3D.default - 1, 1, 1],\n        [kLimitInfo.maxTextureDimension3D.default, 1, 1],\n        [kLimitInfo.maxTextureDimension3D.default + 1, 1, 1],\n        // Test the bound of height\n        [1, kLimitInfo.maxTextureDimension3D.default - 1, 1],\n        [1, kLimitInfo.maxTextureDimension3D.default, 1],\n        [1, kLimitInfo.maxTextureDimension3D.default + 1, 1],\n        // Test the bound of depth\n        [1, 1, kLimitInfo.maxTextureDimension3D.default - 1],\n        [1, 1, kLimitInfo.maxTextureDimension3D.default],\n        [1, 1, kLimitInfo.maxTextureDimension3D.default + 1],\n      ])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { format, size } = t.params;\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension: '3d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] <= kLimitInfo.maxTextureDimension3D.default &&\n      size[1] <= kLimitInfo.maxTextureDimension3D.default &&\n      size[2] <= kLimitInfo.maxTextureDimension3D.default;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,3d_texture,compressed_format')\n  .desc(`Test texture size requirement for 3D texture with compressed format.`)\n  .params(u =>\n    u //\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .expand('size', p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          // Test the bound of width\n          [kLimitInfo.maxTextureDimension3D.default - 1, 1, 1],\n          [kLimitInfo.maxTextureDimension3D.default - blockWidth, 1, 1],\n          [kLimitInfo.maxTextureDimension3D.default - blockWidth, blockHeight, 1],\n          [kLimitInfo.maxTextureDimension3D.default, 1, 1],\n          [kLimitInfo.maxTextureDimension3D.default, blockHeight, 1],\n          [kLimitInfo.maxTextureDimension3D.default + 1, 1, 1],\n          [kLimitInfo.maxTextureDimension3D.default + blockWidth, 1, 1],\n          [kLimitInfo.maxTextureDimension3D.default + blockWidth, blockHeight, 1],\n          // Test the bound of height\n          [1, kLimitInfo.maxTextureDimension3D.default - 1, 1],\n          [1, kLimitInfo.maxTextureDimension3D.default - blockHeight, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension3D.default - blockHeight, 1],\n          [1, kLimitInfo.maxTextureDimension3D.default, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension3D.default, 1],\n          [1, kLimitInfo.maxTextureDimension3D.default + 1, 1],\n          [1, kLimitInfo.maxTextureDimension3D.default + blockWidth, 1],\n          [blockWidth, kLimitInfo.maxTextureDimension3D.default + blockHeight, 1],\n          // Test the bound of depth\n          [1, 1, kLimitInfo.maxTextureDimension3D.default - 1],\n          [blockWidth, 1, kLimitInfo.maxTextureDimension3D.default - 1],\n          [1, blockHeight, kLimitInfo.maxTextureDimension3D.default - 1],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureDimension3D.default - 1],\n          [1, 1, kLimitInfo.maxTextureDimension3D.default],\n          [blockWidth, 1, kLimitInfo.maxTextureDimension3D.default],\n          [1, blockHeight, kLimitInfo.maxTextureDimension3D.default],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureDimension3D.default],\n          [1, 1, kLimitInfo.maxTextureDimension3D.default + 1],\n          [blockWidth, 1, kLimitInfo.maxTextureDimension3D.default + 1],\n          [1, blockHeight, kLimitInfo.maxTextureDimension3D.default + 1],\n          [blockWidth, blockHeight, kLimitInfo.maxTextureDimension3D.default + 1],\n        ];\n      })\n  )\n  .beforeAllSubcases(t => {\n    // Compressed formats are not supported in 3D in WebGPU v1 because they are complicated but not very useful for now.\n    throw new SkipTestCase('Compressed 3D texture is not supported');\n\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { format, size } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    assert(\n      kLimitInfo.maxTextureDimension3D.default % info.blockWidth === 0 &&\n        kLimitInfo.maxTextureDimension3D.default % info.blockHeight === 0\n    );\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension: '3d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] % info.blockWidth === 0 &&\n      size[1] % info.blockHeight === 0 &&\n      size[0] <= kLimitInfo.maxTextureDimension3D.default &&\n      size[1] <= kLimitInfo.maxTextureDimension3D.default &&\n      size[2] <= kLimitInfo.maxTextureDimension3D.default;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_usage')\n  .desc(\n    `Test texture usage (single usage or combined usages) for every texture format and every dimension type`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .combine('format', kTextureFormats)\n      .beginSubcases()\n      // If usage0 and usage1 are the same, then the usage being test is a single usage. Otherwise, it is a combined usage.\n      .combine('usage0', kTextureUsages)\n      .combine('usage1', kTextureUsages)\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    const info = kTextureFormatInfo[format];\n    t.selectDeviceOrSkipTestCase(info.feature);\n  })\n  .fn(async t => {\n    const { dimension, format, usage0, usage1 } = t.params;\n    const info = kTextureFormatInfo[format];\n\n    const size = [info.blockWidth, info.blockHeight, 1];\n    const usage = usage0 | usage1;\n    const descriptor = {\n      size,\n      dimension,\n      format,\n      usage,\n    };\n\n    let success = true;\n    const appliedDimension = dimension ?? '2d';\n    // Note that we unconditionally test copy usages for all formats. We don't check copySrc/copyDst in kTextureFormatInfo in capability_info.js\n    // if (!info.copySrc && (usage & GPUTextureUsage.COPY_SRC) !== 0) success = false;\n    // if (!info.copyDst && (usage & GPUTextureUsage.COPY_DST) !== 0) success = false;\n    if (!info.storage && (usage & GPUTextureUsage.STORAGE_BINDING) !== 0) success = false;\n    if (\n      (!info.renderable || appliedDimension !== '2d') &&\n      (usage & GPUTextureUsage.RENDER_ATTACHMENT) !== 0\n    )\n      success = false;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('viewFormats')\n  .desc(\n    `Test creating a texture with viewFormats list for all {texture format}x{view format}. Only compatible view formats should be valid.`\n  )\n  .params(u =>\n    u\n      .combine('formatFeature', kFeaturesForFormats)\n      .combine('viewFormatFeature', kFeaturesForFormats)\n      .beginSubcases()\n      .expand('format', ({ formatFeature }) =>\n        filterFormatsByFeature(formatFeature, kTextureFormats)\n      )\n      .expand('viewFormat', ({ viewFormatFeature }) =>\n        filterFormatsByFeature(viewFormatFeature, kTextureFormats)\n      )\n  )\n  .beforeAllSubcases(t => {\n    const { formatFeature, viewFormatFeature } = t.params;\n    t.selectDeviceOrSkipTestCase([formatFeature, viewFormatFeature]);\n  })\n  .fn(async t => {\n    const { format, viewFormat } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n    const compatible = viewCompatible(format, viewFormat);\n\n    // Test the viewFormat in the list.\n    t.expectValidationError(() => {\n      t.device.createTexture({\n        format,\n        size: [blockWidth, blockHeight],\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n        viewFormats: [viewFormat],\n      });\n    }, !compatible);\n\n    // Test the viewFormat and the texture format in the list.\n    t.expectValidationError(() => {\n      t.device.createTexture({\n        format,\n        size: [blockWidth, blockHeight],\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n        viewFormats: [viewFormat, format],\n      });\n    }, !compatible);\n\n    // Test the viewFormat multiple times in the list.\n    t.expectValidationError(() => {\n      t.device.createTexture({\n        format,\n        size: [blockWidth, blockHeight],\n        usage: GPUTextureUsage.TEXTURE_BINDING,\n        viewFormats: [viewFormat, viewFormat],\n      });\n    }, !compatible);\n  });\n"],"file":"createTexture.spec.js"}