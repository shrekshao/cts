{"version":3,"sources":["../../../../src/webgpu/api/validation/createTexture.spec.ts"],"names":["description","makeTestGroup","assert","kTextureFormats","kTextureFormatInfo","kCompressedTextureFormats","kTextureDimensions","kTextureUsages","kUncompressedTextureFormats","kRegularTextureFormats","textureDimensionAndFormatCompatible","DefaultLimits","GPUConst","maxMipLevelCount","ValidationTest","g","test","desc","params","u","combine","undefined","beginSubcases","filter","dimension","format","fn","t","zeroArgument","info","selectDeviceOrSkipTestCase","feature","size","blockWidth","blockHeight","mipLevelCount","descriptor","usage","GPUTextureUsage","TEXTURE_BINDING","success","expectValidationError","device","createTexture","textureWidth","Math","floor","textureHeight","paramsSubcasesOnly","combineWithParams","unless","sampleCount","multisample","arrayLayerCount","TextureUsage","RENDER_ATTACHMENT","renderable","STORAGE_BINDING","storage","expandWithParams","p","_success","maxTextureDimension1D","width","height","depthOrArrayLayers","maxTextureDimension2D","maxTextureArrayLayers","expand","maxTextureDimension3D","skip","usage0","usage1"],"mappings":"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","sourcesContent":["export const description = `createTexture validation tests.`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { assert } from '../../../common/util/util.js';\nimport {\n  kTextureFormats,\n  kTextureFormatInfo,\n  kCompressedTextureFormats,\n  kTextureDimensions,\n  kTextureUsages,\n  kUncompressedTextureFormats,\n  kRegularTextureFormats,\n  textureDimensionAndFormatCompatible,\n} from '../../capability_info.js';\nimport { DefaultLimits, GPUConst } from '../../constants.js';\nimport { maxMipLevelCount } from '../../util/texture/base.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nexport const g = makeTestGroup(ValidationTest);\n\ng.test('zero_size')\n  .desc(\n    `Test texture creation with zero or nonzero size of\n    width, height, depthOrArrayLayers and mipLevelCount for every dimension, and representative formats.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('zeroArgument', [\n        'none',\n        'width',\n        'height',\n        'depthOrArrayLayers',\n        'mipLevelCount',\n      ] as const)\n      .combine('format', [\n        'rgba8unorm',\n        'rgb10a2unorm',\n        'bc1-rgba-unorm',\n        'depth24plus-stencil8',\n      ] as const)\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .fn(async t => {\n    const { dimension, zeroArgument, format } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    const size = [info.blockWidth, info.blockHeight, 1];\n    let mipLevelCount = 1;\n\n    switch (zeroArgument) {\n      case 'width':\n        size[0] = 0;\n        break;\n      case 'height':\n        size[1] = 0;\n        break;\n      case 'depthOrArrayLayers':\n        size[2] = 0;\n        break;\n      case 'mipLevelCount':\n        mipLevelCount = 0;\n        break;\n      default:\n        break;\n    }\n\n    const descriptor = {\n      size,\n      mipLevelCount,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success = zeroArgument === 'none';\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('dimension_type_and_format_compatibility')\n  .desc(\n    `Test every dimension type on every format. Note that compressed formats and depth/stencil formats are not valid for 1D/3D dimension types.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('format', kTextureFormats)\n  )\n  .fn(async t => {\n    const { dimension, format } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size: [info.blockWidth, info.blockHeight, 1],\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !textureDimensionAndFormatCompatible(dimension, format));\n  });\n\ng.test('mipLevelCount,format')\n  .desc(\n    `Test texture creation with no mipmap chain, partial mipmap chain, full mipmap chain, out-of-bounds mipmap chain\n    for every format with different texture dimension types.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('format', kTextureFormats)\n      .combine('mipLevelCount', [1, 3, 6, 7])\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .fn(async t => {\n    const { dimension, format, mipLevelCount } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    // Compute dimensions such that the dimensions are in range [17, 32] and aligned with the\n    // format block size so that there will be exactly 6 mip levels.\n    const maxMipLevelCount = 5;\n    const textureWidth =\n      Math.floor(((1 << maxMipLevelCount) - 1) / info.blockWidth) * info.blockWidth;\n    const textureHeight =\n      Math.floor(((1 << maxMipLevelCount) - 1) / info.blockHeight) * info.blockHeight;\n    assert(17 <= textureWidth && textureWidth <= 32);\n    assert(17 <= textureHeight && textureHeight <= 32);\n\n    // Note that compressed formats are not valid for 1D. They have already been filtered out for 1D\n    // in this test. So there is no dilemma about size.width equals 1 vs\n    // size.width % info.blockHeight equals 0 for 1D compressed formats.\n    const size = dimension === '1d' ? [textureWidth, 1, 1] : [textureWidth, textureHeight, 1];\n    const descriptor = {\n      size,\n      mipLevelCount,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success = mipLevelCount <= maxMipLevelCount;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('mipLevelCount,bound_check')\n  .desc(\n    `Test mip level count bound check upon different texture size and different texture dimension types.\n    The cases below test: 1) there must be no mip levels after a 1 level (1D texture), or 1x1 level (2D texture), or 1x1x1 level (3D texture), 2) array layers are not mip-mapped, 3) power-of-two, non-power-of-two, and non-square sizes.`\n  )\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('format', ['rgba8unorm', 'bc1-rgba-unorm'] as const)\n      .combineWithParams([\n        { size: [32, 32] }, // Mip level sizes: 32x32, 16x16, 8x8, 4x4, 2x2, 1x1\n        { size: [31, 32] }, // Mip level sizes: 31x32, 15x16, 7x8, 3x4, 1x2, 1x1\n        { size: [28, 32] }, // Mip level sizes: 28x32, 14x16, 7x8, 3x4, 1x2, 1x1\n        { size: [32, 31] }, // Mip level sizes: 32x31, 16x15, 8x7, 4x3, 2x1, 1x1\n        { size: [32, 28] }, // Mip level sizes: 32x28, 16x14, 8x7, 4x3, 2x1, 1x1\n        { size: [31, 31] }, // Mip level sizes: 31x31, 15x15, 7x7, 3x3, 1x1\n        { size: [32], dimension: '1d' as const }, // Mip level sizes: 32, 16, 8, 4, 2, 1\n        { size: [31], dimension: '1d' as const }, // Mip level sizes: 31, 15, 7, 3, 1\n        { size: [32, 32, 32], dimension: '3d' as const }, // Mip level sizes: 32x32x32, 16x16x16, 8x8x8, 4x4x4, 2x2x2, 1x1x1\n        { size: [32, 31, 31], dimension: '3d' as const }, // Mip level sizes: 32x31x31, 16x15x15, 8x7x7, 4x3x3, 2x1x1, 1x1x1\n        { size: [31, 32, 31], dimension: '3d' as const }, // Mip level sizes: 31x32x31, 15x16x15, 7x8x7, 3x4x3, 1x2x1, 1x1x1\n        { size: [31, 31, 32], dimension: '3d' as const }, // Mip level sizes: 31x31x32, 15x15x16, 7x7x8, 3x3x4, 1x1x2, 1x1x1\n        { size: [31, 31, 31], dimension: '3d' as const }, // Mip level sizes: 31x31x31, 15x15x15, 7x7x7, 3x3x3, 1x1x1\n        { size: [32, 8] }, // Mip levels: 32x8, 16x4, 8x2, 4x1, 2x1, 1x1\n        { size: [32, 32, 64] }, // Mip levels: 32x32x64, 16x16x64, 8x8x64, 4x4x64, 2x2x64, 1x1x64\n        { size: [32, 32, 64], dimension: '3d' as const }, // Mip levels: 32x32x64, 16x16x32, 8x8x16, 4x4x8, 2x2x4, 1x1x2, 1x1x1\n      ])\n      .unless(\n        ({ format, size, dimension }) =>\n          format === 'bc1-rgba-unorm' &&\n          (dimension === '1d' ||\n            dimension === '3d' ||\n            size[0] % kTextureFormatInfo[format].blockWidth !== 0 ||\n            size[1] % kTextureFormatInfo[format].blockHeight !== 0)\n      )\n  )\n  .fn(async t => {\n    const { format, size, dimension } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const descriptor = {\n      size,\n      mipLevelCount: 0,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const mipLevelCount = maxMipLevelCount(descriptor);\n    descriptor.mipLevelCount = mipLevelCount;\n    t.device.createTexture(descriptor);\n\n    descriptor.mipLevelCount = mipLevelCount + 1;\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    });\n  });\n\ng.test('mipLevelCount,bound_check,bigger_than_integer_bit_width')\n  .desc(`Test mip level count bound check when mipLevelCount is bigger than integer bit width`)\n  .fn(async t => {\n    const descriptor = {\n      size: [32, 32],\n      mipLevelCount: 100,\n      format: 'rgba8unorm' as const,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    });\n  });\n\ng.test('sampleCount,various_sampleCount_with_all_formats')\n  .desc(\n    `Test texture creation with various (valid or invalid) sample count and all formats. Note that 1D and 3D textures can't support multisample.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .beginSubcases()\n      .combine('sampleCount', [0, 1, 2, 4, 8, 16, 32, 256])\n      .combine('format', kTextureFormats)\n  )\n  .fn(async t => {\n    const { dimension, sampleCount, format } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n    const descriptor = {\n      size: [32 * blockWidth, 32 * blockHeight, 1],\n      sampleCount,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      sampleCount === 1 || (sampleCount === 4 && kTextureFormatInfo[format].multisample);\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('sampleCount,valid_sampleCount_with_other_parameter_varies')\n  .desc(\n    `Test texture creation with valid sample count when dimensions, arrayLayerCount, mipLevelCount, format, and usage varies.\n     Texture can be single sample (sampleCount is 1) or multi-sample (sampleCount is 4).\n     Multisample texture requires that 1) its dimension is 2d or undefined, 2) its format supports multisample, 3) its mipLevelCount and arrayLayerCount are 1, 4) its usage doesn't include STORAGE_BINDING.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('sampleCount', [1, 4])\n      .combine('arrayLayerCount', [1, 2])\n      .unless(\n        ({ dimension, arrayLayerCount }) =>\n          arrayLayerCount === 2 && dimension !== '2d' && dimension !== undefined\n      )\n      .combine('mipLevelCount', [1, 2])\n      .combine('format', kTextureFormats)\n      .combine('usage', kTextureUsages)\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n      .unless(({ usage, format }) => {\n        const info = kTextureFormatInfo[format];\n        return (\n          ((usage & GPUConst.TextureUsage.RENDER_ATTACHMENT) !== 0 && !info.renderable) ||\n          ((usage & GPUConst.TextureUsage.STORAGE_BINDING) !== 0 && !info.storage)\n        );\n      })\n  )\n  .fn(async t => {\n    const { dimension, sampleCount, format, mipLevelCount, arrayLayerCount, usage } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n\n    const size =\n      dimension === '1d'\n        ? [32 * blockWidth, 1 * blockHeight, 1]\n        : dimension === '2d' || dimension === undefined\n        ? [32 * blockWidth, 32 * blockHeight, arrayLayerCount]\n        : [32 * blockWidth, 32 * blockHeight, 32];\n    const descriptor = {\n      size,\n      mipLevelCount,\n      sampleCount,\n      dimension,\n      format,\n      usage,\n    };\n\n    const success =\n      sampleCount === 1 ||\n      (sampleCount === 4 &&\n        (dimension === '2d' || dimension === undefined) &&\n        kTextureFormatInfo[format].multisample &&\n        mipLevelCount === 1 &&\n        arrayLayerCount === 1 &&\n        (usage & GPUConst.TextureUsage.STORAGE_BINDING) === 0);\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,default_value_and_smallest_size,uncompressed_format')\n  .desc(\n    `Test default values for height and depthOrArrayLayers for every dimension type and every uncompressed format.\n\t  It also tests smallest size (lower bound) for every dimension type and every uncompressed format, while other texture_size tests are testing the upper bound.`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('format', kUncompressedTextureFormats)\n      .combine('size', [[1], [1, 1], [1, 1, 1]])\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.device.createTexture(descriptor);\n  });\n\ng.test('texture_size,default_value_and_smallest_size,compressed_format')\n  .desc(\n    `Test default values for height and depthOrArrayLayers for every dimension type and every compressed format.\n\t  It also tests smallest size (lower bound) for every dimension type and every compressed format, while other texture_size tests are testing the upper bound.`\n  )\n  .params(u =>\n    u\n      // Compressed formats are invalid for 1D and 3D.\n      .combine('dimension', [undefined, '2d'] as const)\n      .beginSubcases()\n      .combine('format', kCompressedTextureFormats)\n      .expandWithParams(p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          { size: [1], _success: false },\n          { size: [blockWidth], _success: false },\n          { size: [1, 1], _success: false },\n          { size: [blockWidth, blockHeight], _success: true },\n          { size: [1, 1, 1], _success: false },\n          { size: [blockWidth, blockHeight, 1], _success: true },\n        ];\n      })\n  )\n  .fn(async t => {\n    const { dimension, format, size, _success } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !_success);\n  });\n\ng.test('texture_size,1d_texture')\n  .desc(`Test texture size requirement for 1D texture`)\n  .paramsSubcasesOnly(u =>\n    u //\n      // Compressed textures are invalid for 1D.\n      .combine('format', kUncompressedTextureFormats)\n      .combine('width', [\n        DefaultLimits.maxTextureDimension1D - 1,\n        DefaultLimits.maxTextureDimension1D,\n        DefaultLimits.maxTextureDimension1D + 1,\n      ])\n      .combine('height', [1, 2])\n      .combine('depthOrArrayLayers', [1, 2])\n  )\n  .fn(async t => {\n    const { format, width, height, depthOrArrayLayers } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size: [width, height, depthOrArrayLayers],\n      dimension: '1d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      width <= DefaultLimits.maxTextureDimension1D && height === 1 && depthOrArrayLayers === 1;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,2d_texture,uncompressed_format')\n  .desc(`Test texture size requirement for 2D texture with uncompressed format.`)\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kUncompressedTextureFormats)\n      .combine('size', [\n        // Test the bound of width\n        [DefaultLimits.maxTextureDimension2D - 1, 1, 1],\n        [DefaultLimits.maxTextureDimension2D, 1, 1],\n        [DefaultLimits.maxTextureDimension2D + 1, 1, 1],\n        // Test the bound of height\n        [1, DefaultLimits.maxTextureDimension2D - 1, 1],\n        [1, DefaultLimits.maxTextureDimension2D, 1],\n        [1, DefaultLimits.maxTextureDimension2D + 1, 1],\n        // Test the bound of array layers\n        [1, 1, DefaultLimits.maxTextureArrayLayers - 1],\n        [1, 1, DefaultLimits.maxTextureArrayLayers],\n        [1, 1, DefaultLimits.maxTextureArrayLayers + 1],\n      ])\n  )\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] <= DefaultLimits.maxTextureDimension2D &&\n      size[1] <= DefaultLimits.maxTextureDimension2D &&\n      size[2] <= DefaultLimits.maxTextureArrayLayers;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,2d_texture,compressed_format')\n  .desc(`Test texture size requirement for 2D texture with compressed format.`)\n  .params(u =>\n    u\n      .combine('dimension', [undefined, '2d'] as const)\n      .combine('format', kCompressedTextureFormats)\n      .expand('size', p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          // Test the bound of width\n          [DefaultLimits.maxTextureDimension2D - 1, 1, 1],\n          [DefaultLimits.maxTextureDimension2D - blockWidth, 1, 1],\n          [DefaultLimits.maxTextureDimension2D - blockWidth, blockHeight, 1],\n          [DefaultLimits.maxTextureDimension2D, 1, 1],\n          [DefaultLimits.maxTextureDimension2D, blockHeight, 1],\n          [DefaultLimits.maxTextureDimension2D + 1, 1, 1],\n          [DefaultLimits.maxTextureDimension2D + blockWidth, 1, 1],\n          [DefaultLimits.maxTextureDimension2D + blockWidth, blockHeight, 1],\n          // Test the bound of height\n          [1, DefaultLimits.maxTextureDimension2D - 1, 1],\n          [1, DefaultLimits.maxTextureDimension2D - blockHeight, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension2D - blockHeight, 1],\n          [1, DefaultLimits.maxTextureDimension2D, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension2D, 1],\n          [1, DefaultLimits.maxTextureDimension2D + 1, 1],\n          [1, DefaultLimits.maxTextureDimension2D + blockWidth, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension2D + blockHeight, 1],\n          // Test the bound of array layers\n          [1, 1, DefaultLimits.maxTextureArrayLayers - 1],\n          [blockWidth, 1, DefaultLimits.maxTextureArrayLayers - 1],\n          [1, blockHeight, DefaultLimits.maxTextureArrayLayers - 1],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureArrayLayers - 1],\n          [1, 1, DefaultLimits.maxTextureArrayLayers],\n          [blockWidth, 1, DefaultLimits.maxTextureArrayLayers],\n          [1, blockHeight, DefaultLimits.maxTextureArrayLayers],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureArrayLayers],\n          [1, 1, DefaultLimits.maxTextureArrayLayers + 1],\n          [blockWidth, 1, DefaultLimits.maxTextureArrayLayers + 1],\n          [1, blockHeight, DefaultLimits.maxTextureArrayLayers + 1],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureArrayLayers + 1],\n        ];\n      })\n  )\n  .fn(async t => {\n    const { dimension, format, size } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] % info.blockWidth === 0 &&\n      size[1] % info.blockHeight === 0 &&\n      size[0] <= DefaultLimits.maxTextureDimension2D &&\n      size[1] <= DefaultLimits.maxTextureDimension2D &&\n      size[2] <= DefaultLimits.maxTextureArrayLayers;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,3d_texture,uncompressed_format')\n  .desc(\n    `Test texture size requirement for 3D texture with uncompressed format. Note that depth/stencil formats are invalid for 3D textures, so we only test regular formats.`\n  )\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('format', kRegularTextureFormats)\n      .combine('size', [\n        // Test the bound of width\n        [DefaultLimits.maxTextureDimension3D - 1, 1, 1],\n        [DefaultLimits.maxTextureDimension3D, 1, 1],\n        [DefaultLimits.maxTextureDimension3D + 1, 1, 1],\n        // Test the bound of height\n        [1, DefaultLimits.maxTextureDimension3D - 1, 1],\n        [1, DefaultLimits.maxTextureDimension3D, 1],\n        [1, DefaultLimits.maxTextureDimension3D + 1, 1],\n        // Test the bound of depth\n        [1, 1, DefaultLimits.maxTextureDimension3D - 1],\n        [1, 1, DefaultLimits.maxTextureDimension3D],\n        [1, 1, DefaultLimits.maxTextureDimension3D + 1],\n      ])\n  )\n  .fn(async t => {\n    const { format, size } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension: '3d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] <= DefaultLimits.maxTextureDimension3D &&\n      size[1] <= DefaultLimits.maxTextureDimension3D &&\n      size[2] <= DefaultLimits.maxTextureDimension3D;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_size,3d_texture,compressed_format')\n  .desc(`Test texture size requirement for 3D texture with compressed format.`)\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('format', kCompressedTextureFormats)\n      .expand('size', p => {\n        const { blockWidth, blockHeight } = kTextureFormatInfo[p.format];\n        return [\n          // Test the bound of width\n          [DefaultLimits.maxTextureDimension3D - 1, 1, 1],\n          [DefaultLimits.maxTextureDimension3D - blockWidth, 1, 1],\n          [DefaultLimits.maxTextureDimension3D - blockWidth, blockHeight, 1],\n          [DefaultLimits.maxTextureDimension3D, 1, 1],\n          [DefaultLimits.maxTextureDimension3D, blockHeight, 1],\n          [DefaultLimits.maxTextureDimension3D + 1, 1, 1],\n          [DefaultLimits.maxTextureDimension3D + blockWidth, 1, 1],\n          [DefaultLimits.maxTextureDimension3D + blockWidth, blockHeight, 1],\n          // Test the bound of height\n          [1, DefaultLimits.maxTextureDimension3D - 1, 1],\n          [1, DefaultLimits.maxTextureDimension3D - blockHeight, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension3D - blockHeight, 1],\n          [1, DefaultLimits.maxTextureDimension3D, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension3D, 1],\n          [1, DefaultLimits.maxTextureDimension3D + 1, 1],\n          [1, DefaultLimits.maxTextureDimension3D + blockWidth, 1],\n          [blockWidth, DefaultLimits.maxTextureDimension3D + blockHeight, 1],\n          // Test the bound of depth\n          [1, 1, DefaultLimits.maxTextureDimension3D - 1],\n          [blockWidth, 1, DefaultLimits.maxTextureDimension3D - 1],\n          [1, blockHeight, DefaultLimits.maxTextureDimension3D - 1],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureDimension3D - 1],\n          [1, 1, DefaultLimits.maxTextureDimension3D],\n          [blockWidth, 1, DefaultLimits.maxTextureDimension3D],\n          [1, blockHeight, DefaultLimits.maxTextureDimension3D],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureDimension3D],\n          [1, 1, DefaultLimits.maxTextureDimension3D + 1],\n          [blockWidth, 1, DefaultLimits.maxTextureDimension3D + 1],\n          [1, blockHeight, DefaultLimits.maxTextureDimension3D + 1],\n          [blockWidth, blockHeight, DefaultLimits.maxTextureDimension3D + 1],\n        ];\n      })\n  )\n  .fn(async t => {\n    const { format, size } = t.params;\n\n    // Compressed formats are not supported in 3D in WebGPU v1 because they are complicated but not very useful for now.\n    t.skip('Compressed 3D texture is not supported');\n\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    assert(\n      DefaultLimits.maxTextureDimension3D % info.blockWidth === 0 &&\n        DefaultLimits.maxTextureDimension3D % info.blockHeight === 0\n    );\n\n    const descriptor: GPUTextureDescriptor = {\n      size,\n      dimension: '3d' as const,\n      format,\n      usage: GPUTextureUsage.TEXTURE_BINDING,\n    };\n\n    const success =\n      size[0] % info.blockWidth === 0 &&\n      size[1] % info.blockHeight === 0 &&\n      size[0] <= DefaultLimits.maxTextureDimension3D &&\n      size[1] <= DefaultLimits.maxTextureDimension3D &&\n      size[2] <= DefaultLimits.maxTextureDimension3D;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n\ng.test('texture_usage')\n  .desc(\n    `Test texture usage (single usage or combined usages) for every texture format and every dimension type`\n  )\n  .params(u =>\n    u\n      .combine('dimension', [undefined, ...kTextureDimensions])\n      .beginSubcases()\n      .combine('format', kTextureFormats)\n      // If usage0 and usage1 are the same, then the usage being test is a single usage. Otherwise, it is a combined usage.\n      .combine('usage0', kTextureUsages)\n      .combine('usage1', kTextureUsages)\n      // Filter out incompatible dimension type and format combinations.\n      .filter(({ dimension, format }) => textureDimensionAndFormatCompatible(dimension, format))\n  )\n  .fn(async t => {\n    const { dimension, format, usage0, usage1 } = t.params;\n    const info = kTextureFormatInfo[format];\n    await t.selectDeviceOrSkipTestCase(info.feature);\n\n    const size = [info.blockWidth, info.blockHeight, 1];\n    const usage = usage0 | usage1;\n    const descriptor = {\n      size,\n      dimension,\n      format,\n      usage,\n    };\n\n    let success = true;\n    // Note that we unconditionally test copy usages for all formats. We don't check copySrc/copyDst in kTextureFormatInfo in capability_info.js\n    // if (!info.copySrc && (usage & GPUTextureUsage.COPY_SRC) !== 0) success = false;\n    // if (!info.copyDst && (usage & GPUTextureUsage.COPY_DST) !== 0) success = false;\n    if (!info.storage && (usage & GPUTextureUsage.STORAGE_BINDING) !== 0) success = false;\n    if (!info.renderable && (usage & GPUTextureUsage.RENDER_ATTACHMENT) !== 0) success = false;\n\n    t.expectValidationError(() => {\n      t.device.createTexture(descriptor);\n    }, !success);\n  });\n"],"file":"createTexture.spec.js"}