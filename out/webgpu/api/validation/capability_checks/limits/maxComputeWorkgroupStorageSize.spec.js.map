{"version":3,"file":"maxComputeWorkgroupStorageSize.spec.js","names":["keysOf","assert","align","roundDown","kMaximumLimitBaseParams","makeLimitTestGroup","limit","g","description","kSmallestWorkgroupVarSize","wgslF16Types","f16","alignOf","sizeOf","wgslBaseTypes","f32","i32","u32","S1","S2","S3","wgslTypes","kWGSLTypes","getModuleForWorkgroupStorageSize","device","wgslType","size","unitSize","units","Math","floor","extra","code","module","createShaderModule","getDeviceLimitToRequest","limitValueTest","defaultLimit","maximumLimit","getTestValue","testValueName","requestedLimit","getDeviceLimitToRequestAndValueToTest","testValue","test","desc","params","combine","fn","t","limitTest","adapterLimit","hasF16","adapter","features","has","testDeviceWithSpecificLimits","actualLimit","shouldError","expectValidationError","createComputePipeline","layout","compute","entryPoint","promise","createComputePipelineAsync","msg","shouldRejectConditionally"],"sources":["../../../../../../src/webgpu/api/validation/capability_checks/limits/maxComputeWorkgroupStorageSize.spec.ts"],"sourcesContent":["import { keysOf } from '../../../../../common/util/data_tables.js';\nimport { assert } from '../../../../../common/util/util.js';\nimport { align, roundDown } from '../../../../util/math.js';\n\nimport {\n  MaximumLimitValueTest,\n  MaximumTestValue,\n  kMaximumLimitBaseParams,\n  makeLimitTestGroup,\n} from './limit_utils.js';\n\nconst limit = 'maxComputeWorkgroupStorageSize';\nexport const { g, description } = makeLimitTestGroup(limit);\n\nconst kSmallestWorkgroupVarSize = 4;\n\nconst wgslF16Types = {\n  f16: { alignOf: 2, sizeOf: 2 },\n  'vec2<f16>': { alignOf: 4, sizeOf: 4 },\n  'vec3<f16>': { alignOf: 8, sizeOf: 6 },\n  'vec4<f16>': { alignOf: 8, sizeOf: 8 },\n  'mat2x2<f16>': { alignOf: 4, sizeOf: 8 },\n  'mat3x2<f16>': { alignOf: 4, sizeOf: 12 },\n  'mat4x2<f16>': { alignOf: 4, sizeOf: 16 },\n  'mat2x3<f16>': { alignOf: 8, sizeOf: 16 },\n  'mat3x3<f16>': { alignOf: 8, sizeOf: 24 },\n  'mat4x3<f16>': { alignOf: 8, sizeOf: 32 },\n  'mat2x4<f16>': { alignOf: 8, sizeOf: 16 },\n  'mat3x4<f16>': { alignOf: 8, sizeOf: 24 },\n  'mat4x4<f16>': { alignOf: 8, sizeOf: 32 },\n};\n\nconst wgslBaseTypes = {\n  f32: { alignOf: 4, sizeOf: 4 },\n  i32: { alignOf: 4, sizeOf: 4 },\n  u32: { alignOf: 4, sizeOf: 4 },\n\n  'vec2<f32>': { alignOf: 8, sizeOf: 8 },\n  'vec2<i32>': { alignOf: 8, sizeOf: 8 },\n  'vec2<u32>': { alignOf: 8, sizeOf: 8 },\n\n  'vec3<f32>': { alignOf: 16, sizeOf: 12 },\n  'vec3<i32>': { alignOf: 16, sizeOf: 12 },\n  'vec3<u32>': { alignOf: 16, sizeOf: 12 },\n\n  'vec4<f32>': { alignOf: 16, sizeOf: 16 },\n  'vec4<i32>': { alignOf: 16, sizeOf: 16 },\n  'vec4<u32>': { alignOf: 16, sizeOf: 16 },\n\n  'mat2x2<f32>': { alignOf: 8, sizeOf: 16 },\n  'mat3x2<f32>': { alignOf: 8, sizeOf: 24 },\n  'mat4x2<f32>': { alignOf: 8, sizeOf: 32 },\n  'mat2x3<f32>': { alignOf: 16, sizeOf: 32 },\n  'mat3x3<f32>': { alignOf: 16, sizeOf: 48 },\n  'mat4x3<f32>': { alignOf: 16, sizeOf: 64 },\n  'mat2x4<f32>': { alignOf: 16, sizeOf: 32 },\n  'mat3x4<f32>': { alignOf: 16, sizeOf: 48 },\n  'mat4x4<f32>': { alignOf: 16, sizeOf: 64 },\n\n  S1: { alignOf: 16, sizeOf: 48 },\n  S2: { alignOf: 4, sizeOf: 16 * 7 },\n  S3: { alignOf: 16, sizeOf: 32 },\n};\n\nconst wgslTypes = { ...wgslF16Types, ...wgslBaseTypes };\ntype WGSLType = keyof typeof wgslTypes;\nconst kWGSLTypes = keysOf(wgslTypes);\n\nfunction getModuleForWorkgroupStorageSize(device: GPUDevice, wgslType: WGSLType, size: number) {\n  assert(size % kSmallestWorkgroupVarSize === 0);\n  const { sizeOf, alignOf } = wgslTypes[wgslType];\n  const unitSize = align(sizeOf, alignOf);\n  const units = Math.floor(size / unitSize);\n  const extra = (size - units * unitSize) / kSmallestWorkgroupVarSize;\n\n  const code = `\n    struct S1 {\n      a: f32,\n      b: vec4f,\n      c: u32,\n    };\n    struct S2 {\n      a: array<vec3f, 7>,\n    };\n    struct S3 {\n      a: vec3f,\n      b: vec2f,\n    };\n    var<workgroup> d0: array<${wgslType}, ${units}>;\n    ${extra ? `var<workgroup> d1: array<f32, ${extra}>;` : ''}\n    @compute @workgroup_size(1) fn main() {\n      _ = d0;\n      ${extra ? '_ = d1;' : ''}\n    }\n  `;\n  return { module: device.createShaderModule({ code }), code };\n}\n\nfunction getDeviceLimitToRequest(\n  limitValueTest: MaximumLimitValueTest,\n  defaultLimit: number,\n  maximumLimit: number\n) {\n  switch (limitValueTest) {\n    case 'atDefault':\n      return defaultLimit;\n    case 'underDefault':\n      return defaultLimit - kSmallestWorkgroupVarSize;\n    case 'betweenDefaultAndMaximum':\n      return roundDown(Math.floor((defaultLimit + maximumLimit) / 2), kSmallestWorkgroupVarSize);\n    case 'atMaximum':\n      return maximumLimit;\n    case 'overMaximum':\n      return maximumLimit + kSmallestWorkgroupVarSize;\n  }\n}\n\nfunction getTestValue(testValueName: MaximumTestValue, requestedLimit: number) {\n  switch (testValueName) {\n    case 'atLimit':\n      return requestedLimit;\n    case 'overLimit':\n      return requestedLimit + kSmallestWorkgroupVarSize;\n  }\n}\n\nfunction getDeviceLimitToRequestAndValueToTest(\n  limitValueTest: MaximumLimitValueTest,\n  testValueName: MaximumTestValue,\n  defaultLimit: number,\n  maximumLimit: number\n) {\n  const requestedLimit = getDeviceLimitToRequest(limitValueTest, defaultLimit, maximumLimit);\n  const testValue = getTestValue(testValueName, requestedLimit);\n  return {\n    requestedLimit,\n    testValue,\n  };\n}\n\ng.test('createComputePipeline,at_over')\n  .desc(`Test using createComputePipeline at and over ${limit} limit`)\n  .params(kMaximumLimitBaseParams.combine('wgslType', kWGSLTypes))\n  .fn(async t => {\n    const { limitTest, testValueName, wgslType } = t.params;\n    const { defaultLimit, adapterLimit: maximumLimit } = t;\n\n    const hasF16 = t.adapter.features.has('shader-f16');\n    if (!hasF16 && wgslType in wgslF16Types) {\n      return;\n    }\n\n    const features: GPUFeatureName[] = hasF16 ? ['shader-f16'] : [];\n\n    const { requestedLimit, testValue } = getDeviceLimitToRequestAndValueToTest(\n      limitTest,\n      testValueName,\n      defaultLimit,\n      maximumLimit\n    );\n    await t.testDeviceWithSpecificLimits(\n      requestedLimit,\n      testValue,\n      async ({ device, testValue, actualLimit, shouldError }) => {\n        const { module, code } = getModuleForWorkgroupStorageSize(device, wgslType, testValue);\n\n        await t.expectValidationError(\n          () => {\n            device.createComputePipeline({\n              layout: 'auto',\n              compute: {\n                module,\n                entryPoint: 'main',\n              },\n            });\n          },\n          shouldError,\n          `size: ${testValue}, limit: ${actualLimit}\\n${code}`\n        );\n      },\n      {},\n      features\n    );\n  });\n\ng.test('createComputePipelineAsync,at_over')\n  .desc(`Test using createComputePipeline at and over ${limit} limit`)\n  .params(kMaximumLimitBaseParams.combine('wgslType', kWGSLTypes))\n  .fn(async t => {\n    const { limitTest, testValueName, wgslType } = t.params;\n    const { defaultLimit, adapterLimit: maximumLimit } = t;\n\n    const hasF16 = t.adapter.features.has('shader-f16');\n    if (!hasF16 && wgslType in wgslF16Types) {\n      return;\n    }\n\n    const features: GPUFeatureName[] = hasF16 ? ['shader-f16'] : [];\n\n    const { requestedLimit, testValue } = getDeviceLimitToRequestAndValueToTest(\n      limitTest,\n      testValueName,\n      defaultLimit,\n      maximumLimit\n    );\n\n    await t.testDeviceWithSpecificLimits(\n      requestedLimit,\n      testValue,\n      async ({ device, testValue, actualLimit, shouldError }) => {\n        const { module, code } = getModuleForWorkgroupStorageSize(device, wgslType, testValue);\n\n        const promise = device.createComputePipelineAsync({\n          layout: 'auto',\n          compute: {\n            module,\n            entryPoint: 'main',\n          },\n        });\n\n        const msg = `size: ${testValue}, limit: ${actualLimit}\\n${code}`;\n        await t.shouldRejectConditionally('OperationError', promise, shouldError, msg);\n      },\n      {},\n      features\n    );\n  });\n"],"mappings":"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"}