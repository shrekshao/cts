{"version":3,"sources":["../../../../../../src/webgpu/api/validation/encoding/cmds/copyTextureToTexture.spec.ts"],"names":["description","makeTestGroup","kTextureFormatInfo","kTextureFormats","kCompressedTextureFormats","kDepthStencilFormats","kTextureUsages","align","ValidationTest","F","TestCopyTextureToTexture","source","destination","copySize","isSuccess","commandEncoder","device","createCommandEncoder","copyTextureToTexture","expectValidationError","finish","GetPhysicalSubresourceSize","textureSize","format","mipLevel","virtualWidthAtLevel","Math","max","width","virtualHeightAtLevel","height","physicalWidthAtLevel","blockWidth","physicalHeightAtLevel","blockHeight","depthOrArrayLayers","g","test","fn","t","validTexture","createTexture","size","usage","GPUTextureUsage","COPY_SRC","COPY_DST","errorTexture","getErrorTexture","texture","paramsSubcasesOnly","srcLevelCount","dstLevelCount","srcCopyLevel","dstCopyLevel","params","srcTexture","mipLevelCount","dstTexture","u","combine","srcUsage","dstUsage","srcSampleCount","dstSampleCount","sampleCount","x","y","z","expand","p","srcCopyOrigin","dstCopyOrigin","copyWidth","copyHeight","kWidth","kHeight","origin","srcFormat","dstFormat","srcFormatInfo","dstFormatInfo","selectDeviceOrSkipTestCase","feature","kTextureSize","beginSubcases","copyBoxOffsets","srcTextureSize","dstTextureSize","kMipLevelCount","srcSizeAtLevel","dstSizeAtLevel","copyOrigin","min","kFormat","copyDepth","srcCopyOriginZ","dstCopyOriginZ","copyExtentDepth","kArrayLayerCount","testTexture","desc","sourceAspect","destinationAspect","kValidAspectsForFormat","rgba8unorm","depth24plus","depth32float","stencil8","depth16unorm","isSourceAspectValid","includes","isDestinationAspectValid","aspect","texelBlockWidth","texelBlockHeight","isSuccessForCompressedFormats"],"mappings":";AAAA;AACA,GADA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CApCO,CAsCP,SAASC,aAAT,QAA8B,+CAA9B;AACA;AACEC,kBADF;AAEEC,eAFF;AAGEC,yBAHF;AAIEC,oBAJF;AAKEC,cALF;AAMO,gCANP;AAOA,SAASC,KAAT,QAAsB,0BAAtB;AACA,SAASC,cAAT,QAA+B,0BAA/B;;AAEA,MAAMC,CAAN,SAAgBD,cAAhB,CAA+B;AAC7BE,EAAAA,wBAAwB;AACtBC,EAAAA,MADsB;AAEtBC,EAAAA,WAFsB;AAGtBC,EAAAA,QAHsB;AAItBC,EAAAA,SAJsB;AAKhB;AACN,UAAMC,cAAc,GAAG,KAAKC,MAAL,CAAYC,oBAAZ,EAAvB;AACAF,IAAAA,cAAc,CAACG,oBAAf,CAAoCP,MAApC,EAA4CC,WAA5C,EAAyDC,QAAzD;;AAEA,SAAKM,qBAAL,CAA2B,MAAM;AAC/BJ,MAAAA,cAAc,CAACK,MAAf;AACD,KAFD,EAEG,CAACN,SAFJ;AAGD;;AAEDO,EAAAA,0BAA0B;AACxBC,EAAAA,WADwB;AAExBC,EAAAA,MAFwB;AAGxBC,EAAAA,QAHwB;AAIG;AAC3B,UAAMC,mBAAmB,GAAGC,IAAI,CAACC,GAAL,CAASL,WAAW,CAACM,KAAZ,IAAqBJ,QAA9B,EAAwC,CAAxC,CAA5B;AACA,UAAMK,oBAAoB,GAAGH,IAAI,CAACC,GAAL,CAASL,WAAW,CAACQ,MAAZ,IAAsBN,QAA/B,EAAyC,CAAzC,CAA7B;AACA,UAAMO,oBAAoB,GAAGxB,KAAK,CAACkB,mBAAD,EAAsBvB,kBAAkB,CAACqB,MAAD,CAAlB,CAA2BS,UAAjD,CAAlC;AACA,UAAMC,qBAAqB,GAAG1B,KAAK;AACjCsB,IAAAA,oBADiC;AAEjC3B,IAAAA,kBAAkB,CAACqB,MAAD,CAAlB,CAA2BW,WAFM,CAAnC;;AAIA,WAAO;AACLN,MAAAA,KAAK,EAAEG,oBADF;AAELD,MAAAA,MAAM,EAAEG,qBAFH;AAGLE,MAAAA,kBAAkB,EAAEb,WAAW,CAACa,kBAH3B,EAAP;;AAKD,GAhC4B;;;AAmC/B,OAAO,MAAMC,CAAC,GAAGnC,aAAa,CAACQ,CAAD,CAAvB;;AAEP2B,CAAC,CAACC,IAAF,CAAO,2BAAP,EAAoCC,EAApC,CAAuC,MAAMC,CAAN,IAAW;AAChD,QAAMC,YAAY,GAAGD,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AAC1CC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EADoC;AAE1CZ,IAAAA,MAAM,EAAE,YAFkC;AAG1CoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAAhB,GAA2BD,eAAe,CAACE,QAHR,EAAvB,CAArB;;;AAMA,QAAMC,YAAY,GAAGR,CAAC,CAACS,eAAF,EAArB;;AAEAT,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEF,YAAX,EADF;AAEE,IAAEE,OAAO,EAAET,YAAX,EAFF;AAGE,IAAEZ,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EAHF;AAIE,OAJF;;AAMAI,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAET,YAAX,EADF;AAEE,IAAES,OAAO,EAAEF,YAAX,EAFF;AAGE,IAAEnB,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EAHF;AAIE,OAJF;;AAMD,CArBD;;AAuBAC,CAAC,CAACC,IAAF,CAAO,cAAP;AACGa,kBADH,CACsB;AAClB,EAAEC,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EADkB;AAElB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EAFkB;AAGlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EAHkB;AAIlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EAJkB;AAKlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EALkB;AAMlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EANkB;AAOlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EAPkB;AAQlB,EAAEH,aAAa,EAAE,CAAjB,EAAoBC,aAAa,EAAE,CAAnC,EAAsCC,YAAY,EAAE,CAApD,EAAuDC,YAAY,EAAE,CAArE,EARkB,CADtB;;;AAYGhB,EAZH,CAYM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEY,aAAF,EAAiBC,aAAjB,EAAgCC,YAAhC,EAA8CC,YAA9C,KAA+Df,CAAC,CAACgB,MAAvE;;AAEA,QAAMC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAHiB;AAIxCY,IAAAA,aAAa,EAAEN,aAJyB,EAAvB,CAAnB;;AAMA,QAAMO,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAHiB;AAIxCW,IAAAA,aAAa,EAAEL,aAJyB,EAAvB,CAAnB;;;AAOA,QAAMtC,SAAS,GAAGuC,YAAY,GAAGF,aAAf,IAAgCG,YAAY,GAAGF,aAAjE;AACAb,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EAAuBhC,QAAQ,EAAE6B,YAAjC,EADF;AAEE,IAAEJ,OAAO,EAAES,UAAX,EAAuBlC,QAAQ,EAAE8B,YAAjC,EAFF;AAGE,IAAE1B,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EAHF;AAIErB,EAAAA,SAJF;;AAMD,CAnCH;;AAqCAsB,CAAC,CAACC,IAAF,CAAO,eAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,UADX,EACuBtD,cADvB;AAEGsD,OAFH,CAEW,UAFX,EAEuBtD,cAFvB,CAFJ;;AAMGgC,EANH,CAMM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEsB,QAAF,EAAYC,QAAZ,KAAyBvB,CAAC,CAACgB,MAAjC;;AAEA,QAAMC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEkB,QAHiC,EAAvB,CAAnB;;AAKA,QAAMH,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEmB,QAHiC,EAAvB,CAAnB;;;AAMA,QAAMhD,SAAS;AACb+C,EAAAA,QAAQ,KAAKjB,eAAe,CAACC,QAA7B,IAAyCiB,QAAQ,KAAKlB,eAAe,CAACE,QADxE;;AAGAP,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EADF;AAEE,IAAEP,OAAO,EAAES,UAAX,EAFF;AAGE,IAAE9B,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EAHF;AAIErB,EAAAA,SAJF;;AAMD,CA7BH;;AA+BAsB,CAAC,CAACC,IAAF,CAAO,cAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,gBADX,EAC6B,CAAC,CAAD,EAAI,CAAJ,CAD7B;AAEGA,OAFH,CAEW,gBAFX,EAE6B,CAAC,CAAD,EAAI,CAAJ,CAF7B,CAFJ;;AAMGtB,EANH,CAMM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEwB,cAAF,EAAkBC,cAAlB,KAAqCzB,CAAC,CAACgB,MAA7C;;AAEA,QAAMC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAHiB;AAIxCoB,IAAAA,WAAW,EAAEF,cAJ2B,EAAvB,CAAnB;;AAMA,QAAML,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAHiB;AAIxCmB,IAAAA,WAAW,EAAED,cAJ2B,EAAvB,CAAnB;;;AAOA,QAAMlD,SAAS,GAAGiD,cAAc,KAAKC,cAArC;AACAzB,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EADF;AAEE,IAAEP,OAAO,EAAES,UAAX,EAFF;AAGE,IAAE9B,KAAK,EAAE,CAAT,EAAYE,MAAM,EAAE,CAApB,EAAuBK,kBAAkB,EAAE,CAA3C,EAHF;AAIErB,EAAAA,SAJF;;AAMD,CA7BH;;AA+BAsB,CAAC,CAACC,IAAF,CAAO,gCAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,eADX,EAC4B;AACxB,EAAEM,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EADwB;AAExB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAFwB;AAGxB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAHwB;AAIxB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAJwB,CAD5B;;AAOGR,OAPH,CAOW,eAPX,EAO4B;AACxB,EAAEM,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EADwB;AAExB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAFwB;AAGxB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAHwB;AAIxB,EAAEF,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAJwB,CAP5B;;AAaGC,MAbH,CAaU,WAbV,EAauBC,CAAC,IAAI,CAAC,KAAK5C,IAAI,CAACC,GAAL,CAAS2C,CAAC,CAACC,aAAF,CAAgBL,CAAzB,EAA4BI,CAAC,CAACE,aAAF,CAAgBN,CAA5C,CAAN,EAAsD,EAAtD,CAb5B;AAcGG,MAdH,CAcU,YAdV,EAcwBC,CAAC,IAAI,CAAC,KAAK5C,IAAI,CAACC,GAAL,CAAS2C,CAAC,CAACC,aAAF,CAAgBJ,CAAzB,EAA4BG,CAAC,CAACE,aAAF,CAAgBL,CAA5C,CAAN,EAAsD,CAAtD,CAd7B,CAFJ;;AAkBG7B,EAlBH,CAkBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEgC,aAAF,EAAiBC,aAAjB,EAAgCC,SAAhC,EAA2CC,UAA3C,KAA0DnC,CAAC,CAACgB,MAAlE;;AAEA,QAAMoB,MAAM,GAAG,EAAf;AACA,QAAMC,OAAO,GAAG,EAAhB;;AAEA;AACA;AACA,QAAMpB,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE+C,MAAT,EAAiB7C,MAAM,EAAE8C,OAAzB,EAAkCzC,kBAAkB,EAAE,CAAtD,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAHiB;AAIxCoB,IAAAA,WAAW,EAAE,CAJ2B,EAAvB,CAAnB;;AAMA,QAAMP,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE+C,MAAT,EAAiB7C,MAAM,EAAE8C,OAAzB,EAAkCzC,kBAAkB,EAAE,CAAtD,EADkC;AAExCZ,IAAAA,MAAM,EAAE,YAFgC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAHiB;AAIxCmB,IAAAA,WAAW,EAAE,CAJ2B,EAAvB,CAAnB;;;AAOA,QAAMnD,SAAS,GAAG2D,SAAS,KAAKE,MAAd,IAAwBD,UAAU,KAAKE,OAAzD;AACArC,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAEN,aAA/B,EADF;AAEE,IAAEtB,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAEL,aAA/B,EAFF;AAGE,IAAE5C,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE,CAA5D,EAHF;AAIErB,EAAAA,SAJF;;AAMD,CA9CH;;AAgDAsB,CAAC,CAACC,IAAF,CAAO,yBAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,WADX,EACwBzD,eADxB;AAEGyD,OAFH,CAEW,WAFX,EAEwBzD,eAFxB,CAFJ;;AAMGmC,EANH,CAMM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEuC,SAAF,EAAaC,SAAb,KAA2BxC,CAAC,CAACgB,MAAnC;AACA,QAAMyB,aAAa,GAAG9E,kBAAkB,CAAC4E,SAAD,CAAxC;AACA,QAAMG,aAAa,GAAG/E,kBAAkB,CAAC6E,SAAD,CAAxC;AACA,QAAMxC,CAAC,CAAC2C,0BAAF,CAA6B,CAACF,aAAa,CAACG,OAAf,EAAwBF,aAAa,CAACE,OAAtC,CAA7B,CAAN;;AAEA,QAAMC,YAAY,GAAG,EAAExD,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAArB;;AAEA,QAAMqB,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAAM,EAAEuD,SAFgC;AAGxCnC,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAHiB,EAAvB,CAAnB;;;AAMA,QAAMa,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAAM,EAAEwD,SAFgC;AAGxCpC,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAHiB,EAAvB,CAAnB;;;AAMA,QAAMhC,SAAS,GAAGgE,SAAS,KAAKC,SAAhC;AACAxC,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EADF;AAEE,IAAEP,OAAO,EAAES,UAAX,EAFF;AAGE0B,EAAAA,YAHF;AAIEtE,EAAAA,SAJF;;AAMD,CAjCH;;AAmCAsB,CAAC,CAACC,IAAF,CAAO,iCAAP;AACGkB,MADH,CACU,CAAAI,CAAC;AACPA,CAAC;AACEC,OADH,CACW,QADX,EACqBvD,oBADrB;AAEGgF,aAFH;AAGGzB,OAHH,CAGW,gBAHX,EAG6B;AACzB,EAAEM,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcvC,KAAK,EAAE,CAArB,EAAwBE,MAAM,EAAE,CAAhC,EADyB;AAEzB,EAAEoC,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcvC,KAAK,EAAE,CAArB,EAAwBE,MAAM,EAAE,CAAhC,EAFyB;AAGzB,EAAEoC,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcvC,KAAK,EAAE,CAArB,EAAwBE,MAAM,EAAE,CAAhC,EAHyB;AAIzB,EAAEoC,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcvC,KAAK,EAAE,CAAC,CAAtB,EAAyBE,MAAM,EAAE,CAAjC,EAJyB;AAKzB,EAAEoC,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcvC,KAAK,EAAE,CAArB,EAAwBE,MAAM,EAAE,CAAC,CAAjC,EALyB,CAH7B;;AAUG8B,OAVH,CAUW,gBAVX,EAU6B;AACzB,EAAEhC,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EADyB;AAEzB,EAAEP,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAFyB;AAGzB,EAAEP,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAHyB,CAV7B;;AAeGyB,OAfH,CAeW,gBAfX,EAe6B;AACzB,EAAEhC,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EADyB;AAEzB,EAAEP,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAFyB;AAGzB,EAAEP,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAHyB,CAf7B;;AAoBGyB,OApBH,CAoBW,cApBX,EAoB2B,CAAC,CAAD,EAAI,CAAJ,CApB3B;AAqBGA,OArBH,CAqBW,cArBX,EAqB2B,CAAC,CAAD,EAAI,CAAJ,CArB3B,CAFJ;;AAyBGtB,EAzBH,CAyBM,MAAMC,CAAN,IAAW;AACb,QAAM;AACJhB,IAAAA,MADI;AAEJ+D,IAAAA,cAFI;AAGJC,IAAAA,cAHI;AAIJC,IAAAA,cAJI;AAKJnC,IAAAA,YALI;AAMJC,IAAAA,YANI;AAOFf,EAAAA,CAAC,CAACgB,MAPN;AAQA,QAAMhB,CAAC,CAAC2C,0BAAF,CAA6BhF,kBAAkB,CAACqB,MAAD,CAAlB,CAA2B4D,OAAxD,CAAN;;AAEA,QAAMM,cAAc,GAAG,CAAvB;;AAEA,QAAMjC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE2D,cAAc,CAAC3D,KAAxB,EAA+BE,MAAM,EAAEyD,cAAc,CAACzD,MAAtD,EAA8DK,kBAAkB,EAAE,CAAlF,EADkC;AAExCZ,IAAAA,MAFwC;AAGxCkC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAJiB,EAAvB,CAAnB;;AAMA,QAAMa,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE4D,cAAc,CAAC5D,KAAxB,EAA+BE,MAAM,EAAE0D,cAAc,CAAC1D,MAAtD,EAA8DK,kBAAkB,EAAE,CAAlF,EADkC;AAExCZ,IAAAA,MAFwC;AAGxCkC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAJiB,EAAvB,CAAnB;;;AAOA,QAAM4C,cAAc,GAAGnD,CAAC,CAAClB,0BAAF,CAA6BkE,cAA7B,EAA6ChE,MAA7C,EAAqD8B,YAArD,CAAvB;AACA,QAAMsC,cAAc,GAAGpD,CAAC,CAAClB,0BAAF,CAA6BmE,cAA7B,EAA6CjE,MAA7C,EAAqD+B,YAArD,CAAvB;;AAEA,QAAMsC,UAAU,GAAG,EAAE1B,CAAC,EAAEoB,cAAc,CAACpB,CAApB,EAAuBC,CAAC,EAAEmB,cAAc,CAACnB,CAAzC,EAA4CC,CAAC,EAAE,CAA/C,EAAnB;;AAEA,QAAMK,SAAS;AACb/C,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC9D,KAAxB,EAA+B+D,cAAc,CAAC/D,KAA9C,IAAuD0D,cAAc,CAAC1D,KAAtE,GAA8EgE,UAAU,CAAC1B,CAD3F;AAEA,QAAMQ,UAAU;AACdhD,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC5D,MAAxB,EAAgC6D,cAAc,CAAC7D,MAA/C,IAAyDwD,cAAc,CAACxD,MAAxE,GAAiF8D,UAAU,CAACzB,CAD9F;;AAGA;AACA,QAAMrD,SAAS;AACb8E,EAAAA,UAAU,CAAC1B,CAAX,KAAiB,CAAjB;AACA0B,EAAAA,UAAU,CAACzB,CAAX,KAAiB,CADjB;AAEAM,EAAAA,SAAS,KAAKiB,cAAc,CAAC9D,KAF7B;AAGA8C,EAAAA,UAAU,KAAKgB,cAAc,CAAC5D,MAH9B;AAIA2C,EAAAA,SAAS,KAAKkB,cAAc,CAAC/D,KAJ7B;AAKA8C,EAAAA,UAAU,KAAKiB,cAAc,CAAC7D,MANhC;AAOAS,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE6B,YAA/D,EADF;AAEE,IAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE8B,YAArD,EAFF;AAGE,IAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE,CAA5D,EAHF;AAIErB,EAAAA,SAJF;;AAMAyB,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE6B,YAArD,EADF;AAEE,IAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE8B,YAA/D,EAFF;AAGE,IAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE,CAA5D,EAHF;AAIErB,EAAAA,SAJF;;AAMD,CAjFH;;AAmFAsB,CAAC,CAACC,IAAF,CAAO,aAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,gBADX,EAC6B;AACzB,EAAEM,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EADyB;AAEzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAFyB;AAGzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAAC,CAA5B,EAA+BE,MAAM,EAAE,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EAHyB;AAIzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAJyB;AAKzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAC,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EALyB;AAMzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EANyB;AAOzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAA7D,EAPyB;AAQzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EARyB;AASzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EATyB;AAUzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAA7D,EAVyB;AAWzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAA7D,EAXyB;AAYzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAZyB;AAazB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAbyB,CAD7B;;AAgBGyB,OAhBH,CAgBW,cAhBX,EAgB2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAhB3B;AAiBGA,OAjBH,CAiBW,cAjBX,EAiB2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAjB3B,CAFJ;;AAqBGtB,EArBH,CAqBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAE+C,cAAF,EAAkBjC,YAAlB,EAAgCC,YAAhC,KAAiDf,CAAC,CAACgB,MAAzD;;AAEA,QAAM6B,YAAY,GAAG,EAAExD,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,CAArB,EAAwBK,kBAAkB,EAAE,CAA5C,EAArB;AACA,QAAMsD,cAAc,GAAG,CAAvB;AACA,QAAMK,OAAO,GAAG,YAAhB;;AAEA,QAAMtC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAAM,EAAEuE,OAFgC;AAGxCrC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAJiB,EAAvB,CAAnB;;AAMA,QAAMa,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAAM,EAAEuE,OAFgC;AAGxCrC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAJiB,EAAvB,CAAnB;;;AAOA,QAAM4C,cAAc,GAAGnD,CAAC,CAAClB,0BAAF,CAA6B+D,YAA7B,EAA2CU,OAA3C,EAAoDzC,YAApD,CAAvB;AACA,QAAMsC,cAAc,GAAGpD,CAAC,CAAClB,0BAAF,CAA6B+D,YAA7B,EAA2CU,OAA3C,EAAoDxC,YAApD,CAAvB;;AAEA,QAAMsC,UAAU,GAAG,EAAE1B,CAAC,EAAEoB,cAAc,CAACpB,CAApB,EAAuBC,CAAC,EAAEmB,cAAc,CAACnB,CAAzC,EAA4CC,CAAC,EAAEkB,cAAc,CAAClB,CAA9D,EAAnB;;AAEA,QAAMK,SAAS,GAAG/C,IAAI,CAACC,GAAL;AAChBD,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC9D,KAAxB,EAA+B+D,cAAc,CAAC/D,KAA9C,IAAuD0D,cAAc,CAAC1D,KAAtE,GAA8EgE,UAAU,CAAC1B,CADzE;AAEhB,GAFgB,CAAlB;;AAIA,QAAMQ,UAAU,GAAGhD,IAAI,CAACC,GAAL;AACjBD,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC5D,MAAxB,EAAgC6D,cAAc,CAAC7D,MAA/C,IAAyDwD,cAAc,CAACxD,MAAxE,GAAiF8D,UAAU,CAACzB,CAD3E;AAEjB,GAFiB,CAAnB;;AAIA,QAAM4B,SAAS;AACbX,EAAAA,YAAY,CAACjD,kBAAb,GAAkCmD,cAAc,CAACnD,kBAAjD,GAAsEyD,UAAU,CAACxB,CADnF;;AAGA;AACE,UAAMtD,SAAS;AACb2D,IAAAA,SAAS,IAAIiB,cAAc,CAAC9D,KAA5B;AACA8C,IAAAA,UAAU,IAAIgB,cAAc,CAAC5D,MAD7B;AAEA8D,IAAAA,UAAU,CAAC1B,CAAX,GAAeO,SAAf,IAA4BkB,cAAc,CAAC/D,KAF3C;AAGAgE,IAAAA,UAAU,CAACzB,CAAX,GAAeO,UAAf,IAA6BiB,cAAc,CAAC7D,MAH5C;AAIA8D,IAAAA,UAAU,CAACxB,CAAX,GAAe2B,SAAf,IAA4BX,YAAY,CAACjD,kBAL3C;;AAOAI,IAAAA,CAAC,CAAC7B,wBAAF;AACE,MAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE6B,YAA/D,EADF;AAEE,MAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE8B,YAArD,EAFF;AAGE,MAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE4D,SAA5D,EAHF;AAIEjF,IAAAA,SAJF;;AAMD;;AAED;AACE,UAAMA,SAAS;AACb8E,IAAAA,UAAU,CAAC1B,CAAX,GAAeO,SAAf,IAA4BiB,cAAc,CAAC9D,KAA3C;AACAgE,IAAAA,UAAU,CAACzB,CAAX,GAAeO,UAAf,IAA6BgB,cAAc,CAAC5D,MAD5C;AAEA2C,IAAAA,SAAS,IAAIkB,cAAc,CAAC/D,KAF5B;AAGA8C,IAAAA,UAAU,IAAIiB,cAAc,CAAC7D,MAH7B;AAIA8D,IAAAA,UAAU,CAACxB,CAAX,GAAe2B,SAAf,IAA4BX,YAAY,CAACjD,kBAL3C;;AAOAI,IAAAA,CAAC,CAAC7B,wBAAF;AACE,MAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE6B,YAArD,EADF;AAEE,MAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE8B,YAA/D,EAFF;AAGE,MAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE4D,SAA5D,EAHF;AAIEjF,IAAAA,SAJF;;AAMD;AACF,CAxFH;;AA0FAsB,CAAC,CAACC,IAAF,CAAO,0BAAP;AACGa,kBADH,CACsB,CAAAS,CAAC;AACnBA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,gBADX,EAC6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAD7B;AAEGA,OAFH,CAEW,gBAFX,EAE6B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAF7B;AAGGA,OAHH,CAGW,iBAHX,EAG8B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAH9B,CAFJ;;AAOGtB,EAPH,CAOM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEyD,cAAF,EAAkBC,cAAlB,EAAkCC,eAAlC,KAAsD3D,CAAC,CAACgB,MAA9D;;AAEA,QAAM4C,gBAAgB,GAAG,CAAzB;;AAEA,QAAMC,WAAW,GAAG7D,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACzCC,IAAAA,IAAI,EAAE,EAAEd,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAEgE,gBAA7C,EADmC;AAEzC5E,IAAAA,MAAM,EAAE,YAFiC;AAGzCoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAAhB,GAA2BD,eAAe,CAACE,QAHT,EAAvB,CAApB;;;AAMA,QAAMhC,SAAS;AACbY,EAAAA,IAAI,CAACmE,GAAL,CAASG,cAAT,EAAyBC,cAAzB,IAA2CC,eAA3C;AACAxE,EAAAA,IAAI,CAACC,GAAL,CAASqE,cAAT,EAAyBC,cAAzB,CAFF;AAGA1D,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEmD,WAAX,EAAwBvB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE4B,cAAjB,EAAhC,EADF;AAEE,IAAE/C,OAAO,EAAEmD,WAAX,EAAwBvB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE6B,cAAjB,EAAhC,EAFF;AAGE,IAAErE,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE+D,eAA7C,EAHF;AAIEpF,EAAAA,SAJF;;AAMD,CA3BH;;AA6BAsB,CAAC,CAACC,IAAF,CAAO,cAAP;AACGgE,IADH;AAEK;AACL;AACA;AACA;AACA;AACA,CAPA;;AASG9C,MATH,CASU,CAAAI,CAAC;AACPA,CAAC;AACEC,OADH,CACW,QADX,EACqB,CAAC,YAAD,EAAe,GAAGvD,oBAAlB,CADrB;AAEGgF,aAFH;AAGGzB,OAHH,CAGW,cAHX,EAG2B,CAAC,KAAD,EAAQ,YAAR,EAAsB,cAAtB,CAH3B;AAIGA,OAJH,CAIW,mBAJX,EAIgC,CAAC,KAAD,EAAQ,YAAR,EAAsB,cAAtB,CAJhC,CAVJ;;AAgBGtB,EAhBH,CAgBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEhB,MAAF,EAAU+E,YAAV,EAAwBC,iBAAxB,KAA8ChE,CAAC,CAACgB,MAAtD;AACA,QAAMhB,CAAC,CAAC2C,0BAAF,CAA6BhF,kBAAkB,CAACqB,MAAD,CAAlB,CAA2B4D,OAAxD,CAAN;;AAEA,QAAMC,YAAY,GAAG,EAAExD,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,CAArB,EAAwBK,kBAAkB,EAAE,CAA5C,EAArB;;AAEA,QAAMqB,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAFwC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAHiB,EAAvB,CAAnB;;AAKA,QAAMa,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAFwC;AAGxCoB,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAHiB,EAAvB,CAAnB;;;AAMA;AACA,QAAM0D,sBAAsB,GAAG;AAC7BC,IAAAA,UAAU,EAAE,CAAC,KAAD,CADiB;;AAG7B;AACAC,IAAAA,WAAW,EAAE,CAAC,KAAD,EAAQ,YAAR,CAJgB;AAK7B,4BAAwB,CAAC,KAAD,CALK;AAM7B,6BAAyB,CAAC,KAAD,CANI;AAO7B,6BAAyB,CAAC,KAAD,CAPI;;AAS7B;AACAC,IAAAA,YAAY,EAAE,CAAC,KAAD,EAAQ,YAAR,CAVe;AAW7BC,IAAAA,QAAQ,EAAE,CAAC,KAAD,EAAQ,cAAR,CAXmB;AAY7BC,IAAAA,YAAY,EAAE,CAAC,KAAD,EAAQ,YAAR,CAZe,EAA/B;;;AAeA,QAAMC,mBAAmB,GAAGN,sBAAsB,CAACjF,MAAD,CAAtB,CAA+BwF,QAA/B,CAAwCT,YAAxC,CAA5B;AACA,QAAMU,wBAAwB,GAAGR,sBAAsB,CAACjF,MAAD,CAAtB,CAA+BwF,QAA/B,CAAwCR,iBAAxC,CAAjC;;AAEAhE,EAAAA,CAAC,CAAC7B,wBAAF;AACE,IAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD6C,MAAM,EAAEX,YAA7D,EADF;AAEE,IAAErD,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD6C,MAAM,EAAEV,iBAA7D,EAFF;AAGEnB,EAAAA,YAHF;AAIE0B,EAAAA,mBAAmB,IAAIE,wBAJzB;;AAMD,CA1DH;;AA4DA5E,CAAC,CAACC,IAAF,CAAO,6CAAP;AACGkB,MADH,CACU,CAAAI,CAAC;AACPA,CAAC;AACEC,OADH,CACW,QADX,EACqBxD,yBADrB;AAEGiF,aAFH;AAGGzB,OAHH,CAGW,gBAHX,EAG6B;AACzB,EAAEM,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EADyB;AAEzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAFyB;AAGzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAHyB;AAIzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAAC,CAA5B,EAA+BE,MAAM,EAAE,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EAJyB;AAKzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAAC,CAA5B,EAA+BE,MAAM,EAAE,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EALyB;AAMzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EANyB;AAOzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAPyB;AAQzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAC,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EARyB;AASzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAC,CAAvC,EAA0CK,kBAAkB,EAAE,CAAC,CAA/D,EATyB;AAUzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAA7D,EAVyB;AAWzB,EAAE+B,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAAoBxC,KAAK,EAAE,CAA3B,EAA8BE,MAAM,EAAE,CAAtC,EAAyCK,kBAAkB,EAAE,CAAC,CAA9D,EAXyB,CAH7B;;AAgBGyB,OAhBH,CAgBW,cAhBX,EAgB2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAhB3B;AAiBGA,OAjBH,CAiBW,cAjBX,EAiB2B,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAjB3B,CAFJ;;AAqBGtB,EArBH,CAqBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEhB,MAAF,EAAU+D,cAAV,EAA0BjC,YAA1B,EAAwCC,YAAxC,KAAyDf,CAAC,CAACgB,MAAjE;AACA,QAAMhB,CAAC,CAAC2C,0BAAF,CAA6BhF,kBAAkB,CAACqB,MAAD,CAAlB,CAA2B4D,OAAxD,CAAN;;AAEA,QAAMC,YAAY,GAAG,EAAExD,KAAK,EAAE,EAAT,EAAaE,MAAM,EAAE,EAArB,EAAyBK,kBAAkB,EAAE,CAA7C,EAArB;AACA,QAAMsD,cAAc,GAAG,CAAvB;;AAEA,QAAMjC,UAAU,GAAGjB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAFwC;AAGxCkC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACC,QAJiB,EAAvB,CAAnB;;AAMA,QAAMa,UAAU,GAAGnB,CAAC,CAACvB,MAAF,CAASyB,aAAT,CAAuB;AACxCC,IAAAA,IAAI,EAAE0C,YADkC;AAExC7D,IAAAA,MAFwC;AAGxCkC,IAAAA,aAAa,EAAEgC,cAHyB;AAIxC9C,IAAAA,KAAK,EAAEC,eAAe,CAACE,QAJiB,EAAvB,CAAnB;;;AAOA,QAAM4C,cAAc,GAAGnD,CAAC,CAAClB,0BAAF,CAA6B+D,YAA7B,EAA2C7D,MAA3C,EAAmD8B,YAAnD,CAAvB;AACA,QAAMsC,cAAc,GAAGpD,CAAC,CAAClB,0BAAF,CAA6B+D,YAA7B,EAA2C7D,MAA3C,EAAmD+B,YAAnD,CAAvB;;AAEA,QAAMsC,UAAU,GAAG,EAAE1B,CAAC,EAAEoB,cAAc,CAACpB,CAApB,EAAuBC,CAAC,EAAEmB,cAAc,CAACnB,CAAzC,EAA4CC,CAAC,EAAEkB,cAAc,CAAClB,CAA9D,EAAnB;;AAEA,QAAMK,SAAS,GAAG/C,IAAI,CAACC,GAAL;AAChBD,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC9D,KAAxB,EAA+B+D,cAAc,CAAC/D,KAA9C,IAAuD0D,cAAc,CAAC1D,KAAtE,GAA8EgE,UAAU,CAAC1B,CADzE;AAEhB,GAFgB,CAAlB;;AAIA,QAAMQ,UAAU,GAAGhD,IAAI,CAACC,GAAL;AACjBD,EAAAA,IAAI,CAACmE,GAAL,CAASH,cAAc,CAAC5D,MAAxB,EAAgC6D,cAAc,CAAC7D,MAA/C,IAAyDwD,cAAc,CAACxD,MAAxE,GAAiF8D,UAAU,CAACzB,CAD3E;AAEjB,GAFiB,CAAnB;;AAIA,QAAM4B,SAAS;AACbX,EAAAA,YAAY,CAACjD,kBAAb,GAAkCmD,cAAc,CAACnD,kBAAjD,GAAsEyD,UAAU,CAACxB,CADnF;;AAGA,QAAM8C,eAAe,GAAGhH,kBAAkB,CAACqB,MAAD,CAAlB,CAA2BS,UAAnD;AACA,QAAMmF,gBAAgB,GAAGjH,kBAAkB,CAACqB,MAAD,CAAlB,CAA2BW,WAApD;;AAEA,QAAMkF,6BAA6B;AACjCxB,EAAAA,UAAU,CAAC1B,CAAX,GAAegD,eAAf,KAAmC,CAAnC;AACAtB,EAAAA,UAAU,CAACzB,CAAX,GAAegD,gBAAf,KAAoC,CADpC;AAEA1C,EAAAA,SAAS,GAAGyC,eAAZ,KAAgC,CAFhC;AAGAxC,EAAAA,UAAU,GAAGyC,gBAAb,KAAkC,CAJpC;;AAMA;AACE,UAAMrG,SAAS;AACbsG,IAAAA,6BAA6B;AAC7B3C,IAAAA,SAAS,IAAIiB,cAAc,CAAC9D,KAD5B;AAEA8C,IAAAA,UAAU,IAAIgB,cAAc,CAAC5D,MAF7B;AAGA8D,IAAAA,UAAU,CAAC1B,CAAX,GAAeO,SAAf,IAA4BkB,cAAc,CAAC/D,KAH3C;AAIAgE,IAAAA,UAAU,CAACzB,CAAX,GAAeO,UAAf,IAA6BiB,cAAc,CAAC7D,MAJ5C;AAKA8D,IAAAA,UAAU,CAACxB,CAAX,GAAe2B,SAAf,IAA4BX,YAAY,CAACjD,kBAN3C;;AAQAI,IAAAA,CAAC,CAAC7B,wBAAF;AACE,MAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE6B,YAA/D,EADF;AAEE,MAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE8B,YAArD,EAFF;AAGE,MAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE4D,SAA5D,EAHF;AAIEjF,IAAAA,SAJF;;AAMD;;AAED;AACE,UAAMA,SAAS;AACbsG,IAAAA,6BAA6B;AAC7BxB,IAAAA,UAAU,CAAC1B,CAAX,GAAeO,SAAf,IAA4BiB,cAAc,CAAC9D,KAD3C;AAEAgE,IAAAA,UAAU,CAACzB,CAAX,GAAeO,UAAf,IAA6BgB,cAAc,CAAC5D,MAF5C;AAGA2C,IAAAA,SAAS,IAAIkB,cAAc,CAAC/D,KAH5B;AAIA8C,IAAAA,UAAU,IAAIiB,cAAc,CAAC7D,MAJ7B;AAKA8D,IAAAA,UAAU,CAACxB,CAAX,GAAe2B,SAAf,IAA4BX,YAAY,CAACjD,kBAN3C;;AAQAI,IAAAA,CAAC,CAAC7B,wBAAF;AACE,MAAEuC,OAAO,EAAEO,UAAX,EAAuBqB,MAAM,EAAEe,UAA/B,EAA2CpE,QAAQ,EAAE6B,YAArD,EADF;AAEE,MAAEJ,OAAO,EAAES,UAAX,EAAuBmB,MAAM,EAAE,EAAEX,CAAC,EAAE,CAAL,EAAQC,CAAC,EAAE,CAAX,EAAcC,CAAC,EAAE,CAAjB,EAA/B,EAAqD5C,QAAQ,EAAE8B,YAA/D,EAFF;AAGE,MAAE1B,KAAK,EAAE6C,SAAT,EAAoB3C,MAAM,EAAE4C,UAA5B,EAAwCvC,kBAAkB,EAAE4D,SAA5D,EAHF;AAIEjF,IAAAA,SAJF;;AAMD;AACF,CAnGH","sourcesContent":["export const description = `\ncopyTextureToTexture tests.\n\nTest Plan: (TODO(jiawei.shao@intel.com): add tests on 1D/3D textures)\n* the source and destination texture\n  - the {source, destination} texture is {invalid, valid}.\n  - mipLevel {>, =, <} the mipmap level count of the {source, destination} texture.\n  - the source texture is created {with, without} GPUTextureUsage::CopySrc.\n  - the destination texture is created {with, without} GPUTextureUsage::CopyDst.\n* sample count\n  - the sample count of the source texture {is, isn't} equal to the one of the destination texture\n  - when the sample count is greater than 1:\n    - it {is, isn't} a copy of the whole subresource of the source texture.\n    - it {is, isn't} a copy of the whole subresource of the destination texture.\n* texture format\n  - the format of the source texture {is, isn't} equal to the one of the destination texture.\n    - including: depth24plus-stencil8 to/from {depth24plus, stencil8}.\n  - for each depth and/or stencil format: a copy between two textures with same format:\n    - it {is, isn't} a copy of the whole subresource of the {source, destination} texture.\n* copy ranges\n  - if the texture dimension is 2D:\n    - (srcOrigin.x + copyExtent.width) {>, =, <} the width of the subresource size of source\n      textureCopyView.\n    - (srcOrigin.y + copyExtent.height) {>, =, <} the height of the subresource size of source\n      textureCopyView.\n    - (srcOrigin.z + copyExtent.depthOrArrayLayers) {>, =, <} the depthOrArrayLayers of the subresource size of source\n      textureCopyView.\n    - (dstOrigin.x + copyExtent.width) {>, =, <} the width of the subresource size of destination\n      textureCopyView.\n    - (dstOrigin.y + copyExtent.height) {>, =, <} the height of the subresource size of destination\n      textureCopyView.\n    - (dstOrigin.z + copyExtent.depthOrArrayLayers) {>, =, <} the depthOrArrayLayers of the subresource size of destination\n      textureCopyView.\n* when the source and destination texture are the same one:\n  - the set of source texture subresources {has, doesn't have} overlaps with the one of destination\n    texture subresources.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport {\n  kTextureFormatInfo,\n  kTextureFormats,\n  kCompressedTextureFormats,\n  kDepthStencilFormats,\n  kTextureUsages,\n} from '../../../../capability_info.js';\nimport { align } from '../../../../util/math.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nclass F extends ValidationTest {\n  TestCopyTextureToTexture(\n    source: GPUImageCopyTexture,\n    destination: GPUImageCopyTexture,\n    copySize: GPUExtent3D,\n    isSuccess: boolean\n  ): void {\n    const commandEncoder = this.device.createCommandEncoder();\n    commandEncoder.copyTextureToTexture(source, destination, copySize);\n\n    this.expectValidationError(() => {\n      commandEncoder.finish();\n    }, !isSuccess);\n  }\n\n  GetPhysicalSubresourceSize(\n    textureSize: Required<GPUExtent3DDict>,\n    format: GPUTextureFormat,\n    mipLevel: number\n  ): Required<GPUExtent3DDict> {\n    const virtualWidthAtLevel = Math.max(textureSize.width >> mipLevel, 1);\n    const virtualHeightAtLevel = Math.max(textureSize.height >> mipLevel, 1);\n    const physicalWidthAtLevel = align(virtualWidthAtLevel, kTextureFormatInfo[format].blockWidth);\n    const physicalHeightAtLevel = align(\n      virtualHeightAtLevel,\n      kTextureFormatInfo[format].blockHeight\n    );\n    return {\n      width: physicalWidthAtLevel,\n      height: physicalHeightAtLevel,\n      depthOrArrayLayers: textureSize.depthOrArrayLayers,\n    };\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('copy_with_invalid_texture').fn(async t => {\n  const validTexture = t.device.createTexture({\n    size: { width: 4, height: 4, depthOrArrayLayers: 1 },\n    format: 'rgba8unorm',\n    usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n  });\n\n  const errorTexture = t.getErrorTexture();\n\n  t.TestCopyTextureToTexture(\n    { texture: errorTexture },\n    { texture: validTexture },\n    { width: 1, height: 1, depthOrArrayLayers: 1 },\n    false\n  );\n  t.TestCopyTextureToTexture(\n    { texture: validTexture },\n    { texture: errorTexture },\n    { width: 1, height: 1, depthOrArrayLayers: 1 },\n    false\n  );\n});\n\ng.test('mipmap_level')\n  .paramsSubcasesOnly([\n    { srcLevelCount: 1, dstLevelCount: 1, srcCopyLevel: 0, dstCopyLevel: 0 },\n    { srcLevelCount: 1, dstLevelCount: 1, srcCopyLevel: 1, dstCopyLevel: 0 },\n    { srcLevelCount: 1, dstLevelCount: 1, srcCopyLevel: 0, dstCopyLevel: 1 },\n    { srcLevelCount: 3, dstLevelCount: 3, srcCopyLevel: 0, dstCopyLevel: 0 },\n    { srcLevelCount: 3, dstLevelCount: 3, srcCopyLevel: 2, dstCopyLevel: 0 },\n    { srcLevelCount: 3, dstLevelCount: 3, srcCopyLevel: 3, dstCopyLevel: 0 },\n    { srcLevelCount: 3, dstLevelCount: 3, srcCopyLevel: 0, dstCopyLevel: 2 },\n    { srcLevelCount: 3, dstLevelCount: 3, srcCopyLevel: 0, dstCopyLevel: 3 },\n  ] as const)\n\n  .fn(async t => {\n    const { srcLevelCount, dstLevelCount, srcCopyLevel, dstCopyLevel } = t.params;\n\n    const srcTexture = t.device.createTexture({\n      size: { width: 32, height: 32, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_SRC,\n      mipLevelCount: srcLevelCount,\n    });\n    const dstTexture = t.device.createTexture({\n      size: { width: 32, height: 32, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_DST,\n      mipLevelCount: dstLevelCount,\n    });\n\n    const isSuccess = srcCopyLevel < srcLevelCount && dstCopyLevel < dstLevelCount;\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture, mipLevel: srcCopyLevel },\n      { texture: dstTexture, mipLevel: dstCopyLevel },\n      { width: 1, height: 1, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n  });\n\ng.test('texture_usage')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcUsage', kTextureUsages)\n      .combine('dstUsage', kTextureUsages)\n  )\n  .fn(async t => {\n    const { srcUsage, dstUsage } = t.params;\n\n    const srcTexture = t.device.createTexture({\n      size: { width: 4, height: 4, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: srcUsage,\n    });\n    const dstTexture = t.device.createTexture({\n      size: { width: 4, height: 4, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: dstUsage,\n    });\n\n    const isSuccess =\n      srcUsage === GPUTextureUsage.COPY_SRC && dstUsage === GPUTextureUsage.COPY_DST;\n\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture },\n      { texture: dstTexture },\n      { width: 1, height: 1, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n  });\n\ng.test('sample_count')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcSampleCount', [1, 4])\n      .combine('dstSampleCount', [1, 4])\n  )\n  .fn(async t => {\n    const { srcSampleCount, dstSampleCount } = t.params;\n\n    const srcTexture = t.device.createTexture({\n      size: { width: 4, height: 4, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_SRC,\n      sampleCount: srcSampleCount,\n    });\n    const dstTexture = t.device.createTexture({\n      size: { width: 4, height: 4, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_DST,\n      sampleCount: dstSampleCount,\n    });\n\n    const isSuccess = srcSampleCount === dstSampleCount;\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture },\n      { texture: dstTexture },\n      { width: 4, height: 4, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n  });\n\ng.test('multisampled_copy_restrictions')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcCopyOrigin', [\n        { x: 0, y: 0, z: 0 },\n        { x: 1, y: 0, z: 0 },\n        { x: 0, y: 1, z: 0 },\n        { x: 1, y: 1, z: 0 },\n      ])\n      .combine('dstCopyOrigin', [\n        { x: 0, y: 0, z: 0 },\n        { x: 1, y: 0, z: 0 },\n        { x: 0, y: 1, z: 0 },\n        { x: 1, y: 1, z: 0 },\n      ])\n      .expand('copyWidth', p => [32 - Math.max(p.srcCopyOrigin.x, p.dstCopyOrigin.x), 16])\n      .expand('copyHeight', p => [16 - Math.max(p.srcCopyOrigin.y, p.dstCopyOrigin.y), 8])\n  )\n  .fn(async t => {\n    const { srcCopyOrigin, dstCopyOrigin, copyWidth, copyHeight } = t.params;\n\n    const kWidth = 32;\n    const kHeight = 16;\n\n    // Currently we don't support multisampled 2D array textures and the mipmap level count of the\n    // multisampled textures must be 1.\n    const srcTexture = t.device.createTexture({\n      size: { width: kWidth, height: kHeight, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_SRC,\n      sampleCount: 4,\n    });\n    const dstTexture = t.device.createTexture({\n      size: { width: kWidth, height: kHeight, depthOrArrayLayers: 1 },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_DST,\n      sampleCount: 4,\n    });\n\n    const isSuccess = copyWidth === kWidth && copyHeight === kHeight;\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture, origin: srcCopyOrigin },\n      { texture: dstTexture, origin: dstCopyOrigin },\n      { width: copyWidth, height: copyHeight, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n  });\n\ng.test('texture_format_equality')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcFormat', kTextureFormats)\n      .combine('dstFormat', kTextureFormats)\n  )\n  .fn(async t => {\n    const { srcFormat, dstFormat } = t.params;\n    const srcFormatInfo = kTextureFormatInfo[srcFormat];\n    const dstFormatInfo = kTextureFormatInfo[dstFormat];\n    await t.selectDeviceOrSkipTestCase([srcFormatInfo.feature, dstFormatInfo.feature]);\n\n    const kTextureSize = { width: 16, height: 16, depthOrArrayLayers: 1 };\n\n    const srcTexture = t.device.createTexture({\n      size: kTextureSize,\n      format: srcFormat,\n      usage: GPUTextureUsage.COPY_SRC,\n    });\n\n    const dstTexture = t.device.createTexture({\n      size: kTextureSize,\n      format: dstFormat,\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    const isSuccess = srcFormat === dstFormat;\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture },\n      { texture: dstTexture },\n      kTextureSize,\n      isSuccess\n    );\n  });\n\ng.test('depth_stencil_copy_restrictions')\n  .params(u =>\n    u\n      .combine('format', kDepthStencilFormats)\n      .beginSubcases()\n      .combine('copyBoxOffsets', [\n        { x: 0, y: 0, width: 0, height: 0 },\n        { x: 1, y: 0, width: 0, height: 0 },\n        { x: 0, y: 1, width: 0, height: 0 },\n        { x: 0, y: 0, width: -1, height: 0 },\n        { x: 0, y: 0, width: 0, height: -1 },\n      ])\n      .combine('srcTextureSize', [\n        { width: 64, height: 64, depthOrArrayLayers: 1 },\n        { width: 64, height: 32, depthOrArrayLayers: 1 },\n        { width: 32, height: 32, depthOrArrayLayers: 1 },\n      ])\n      .combine('dstTextureSize', [\n        { width: 64, height: 64, depthOrArrayLayers: 1 },\n        { width: 64, height: 32, depthOrArrayLayers: 1 },\n        { width: 32, height: 32, depthOrArrayLayers: 1 },\n      ])\n      .combine('srcCopyLevel', [1, 2])\n      .combine('dstCopyLevel', [0, 1])\n  )\n  .fn(async t => {\n    const {\n      format,\n      copyBoxOffsets,\n      srcTextureSize,\n      dstTextureSize,\n      srcCopyLevel,\n      dstCopyLevel,\n    } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const kMipLevelCount = 3;\n\n    const srcTexture = t.device.createTexture({\n      size: { width: srcTextureSize.width, height: srcTextureSize.height, depthOrArrayLayers: 1 },\n      format,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_SRC,\n    });\n    const dstTexture = t.device.createTexture({\n      size: { width: dstTextureSize.width, height: dstTextureSize.height, depthOrArrayLayers: 1 },\n      format,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    const srcSizeAtLevel = t.GetPhysicalSubresourceSize(srcTextureSize, format, srcCopyLevel);\n    const dstSizeAtLevel = t.GetPhysicalSubresourceSize(dstTextureSize, format, dstCopyLevel);\n\n    const copyOrigin = { x: copyBoxOffsets.x, y: copyBoxOffsets.y, z: 0 };\n\n    const copyWidth =\n      Math.min(srcSizeAtLevel.width, dstSizeAtLevel.width) + copyBoxOffsets.width - copyOrigin.x;\n    const copyHeight =\n      Math.min(srcSizeAtLevel.height, dstSizeAtLevel.height) + copyBoxOffsets.height - copyOrigin.y;\n\n    // Depth/stencil copies must copy whole subresources.\n    const isSuccess =\n      copyOrigin.x === 0 &&\n      copyOrigin.y === 0 &&\n      copyWidth === srcSizeAtLevel.width &&\n      copyHeight === srcSizeAtLevel.height &&\n      copyWidth === dstSizeAtLevel.width &&\n      copyHeight === dstSizeAtLevel.height;\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: srcCopyLevel },\n      { texture: dstTexture, origin: copyOrigin, mipLevel: dstCopyLevel },\n      { width: copyWidth, height: copyHeight, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture, origin: copyOrigin, mipLevel: srcCopyLevel },\n      { texture: dstTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: dstCopyLevel },\n      { width: copyWidth, height: copyHeight, depthOrArrayLayers: 1 },\n      isSuccess\n    );\n  });\n\ng.test('copy_ranges')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('copyBoxOffsets', [\n        { x: 0, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 1, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 1, y: 0, z: 0, width: -1, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 1, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 1, z: 0, width: 0, height: -1, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 1, width: 0, height: 1, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 2, width: 0, height: 1, depthOrArrayLayers: 0 },\n        { x: 0, y: 0, z: 0, width: 1, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: 0, height: 1, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: 1 },\n        { x: 0, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: 0 },\n        { x: 0, y: 0, z: 1, width: 0, height: 0, depthOrArrayLayers: -1 },\n        { x: 0, y: 0, z: 2, width: 0, height: 0, depthOrArrayLayers: -1 },\n      ])\n      .combine('srcCopyLevel', [0, 1, 3])\n      .combine('dstCopyLevel', [0, 1, 3])\n  )\n  .fn(async t => {\n    const { copyBoxOffsets, srcCopyLevel, dstCopyLevel } = t.params;\n\n    const kTextureSize = { width: 16, height: 8, depthOrArrayLayers: 3 };\n    const kMipLevelCount = 4;\n    const kFormat = 'rgba8unorm';\n\n    const srcTexture = t.device.createTexture({\n      size: kTextureSize,\n      format: kFormat,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_SRC,\n    });\n    const dstTexture = t.device.createTexture({\n      size: kTextureSize,\n      format: kFormat,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    const srcSizeAtLevel = t.GetPhysicalSubresourceSize(kTextureSize, kFormat, srcCopyLevel);\n    const dstSizeAtLevel = t.GetPhysicalSubresourceSize(kTextureSize, kFormat, dstCopyLevel);\n\n    const copyOrigin = { x: copyBoxOffsets.x, y: copyBoxOffsets.y, z: copyBoxOffsets.z };\n\n    const copyWidth = Math.max(\n      Math.min(srcSizeAtLevel.width, dstSizeAtLevel.width) + copyBoxOffsets.width - copyOrigin.x,\n      0\n    );\n    const copyHeight = Math.max(\n      Math.min(srcSizeAtLevel.height, dstSizeAtLevel.height) + copyBoxOffsets.height - copyOrigin.y,\n      0\n    );\n    const copyDepth =\n      kTextureSize.depthOrArrayLayers + copyBoxOffsets.depthOrArrayLayers - copyOrigin.z;\n\n    {\n      const isSuccess =\n        copyWidth <= srcSizeAtLevel.width &&\n        copyHeight <= srcSizeAtLevel.height &&\n        copyOrigin.x + copyWidth <= dstSizeAtLevel.width &&\n        copyOrigin.y + copyHeight <= dstSizeAtLevel.height &&\n        copyOrigin.z + copyDepth <= kTextureSize.depthOrArrayLayers;\n\n      t.TestCopyTextureToTexture(\n        { texture: srcTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: srcCopyLevel },\n        { texture: dstTexture, origin: copyOrigin, mipLevel: dstCopyLevel },\n        { width: copyWidth, height: copyHeight, depthOrArrayLayers: copyDepth },\n        isSuccess\n      );\n    }\n\n    {\n      const isSuccess =\n        copyOrigin.x + copyWidth <= srcSizeAtLevel.width &&\n        copyOrigin.y + copyHeight <= srcSizeAtLevel.height &&\n        copyWidth <= dstSizeAtLevel.width &&\n        copyHeight <= dstSizeAtLevel.height &&\n        copyOrigin.z + copyDepth <= kTextureSize.depthOrArrayLayers;\n\n      t.TestCopyTextureToTexture(\n        { texture: srcTexture, origin: copyOrigin, mipLevel: srcCopyLevel },\n        { texture: dstTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: dstCopyLevel },\n        { width: copyWidth, height: copyHeight, depthOrArrayLayers: copyDepth },\n        isSuccess\n      );\n    }\n  });\n\ng.test('copy_within_same_texture')\n  .paramsSubcasesOnly(u =>\n    u //\n      .combine('srcCopyOriginZ', [0, 2, 4])\n      .combine('dstCopyOriginZ', [0, 2, 4])\n      .combine('copyExtentDepth', [1, 2, 3])\n  )\n  .fn(async t => {\n    const { srcCopyOriginZ, dstCopyOriginZ, copyExtentDepth } = t.params;\n\n    const kArrayLayerCount = 7;\n\n    const testTexture = t.device.createTexture({\n      size: { width: 16, height: 16, depthOrArrayLayers: kArrayLayerCount },\n      format: 'rgba8unorm',\n      usage: GPUTextureUsage.COPY_SRC | GPUTextureUsage.COPY_DST,\n    });\n\n    const isSuccess =\n      Math.min(srcCopyOriginZ, dstCopyOriginZ) + copyExtentDepth <=\n      Math.max(srcCopyOriginZ, dstCopyOriginZ);\n    t.TestCopyTextureToTexture(\n      { texture: testTexture, origin: { x: 0, y: 0, z: srcCopyOriginZ } },\n      { texture: testTexture, origin: { x: 0, y: 0, z: dstCopyOriginZ } },\n      { width: 16, height: 16, depthOrArrayLayers: copyExtentDepth },\n      isSuccess\n    );\n  });\n\ng.test('copy_aspects')\n  .desc(\n    `\nTest the validations on the member 'aspect' of GPUImageCopyTexture in CopyTextureToTexture().\n- for all the color and depth-stencil formats: the texture copy aspects must be both 'all'.\n- for all the depth-only formats: the texture copy aspects must be either 'all' or 'depth-only'.\n- for all the stencil-only formats: the texture copy aspects must be either 'all' or 'stencil-only'.\n`\n  )\n  .params(u =>\n    u\n      .combine('format', ['rgba8unorm', ...kDepthStencilFormats] as const)\n      .beginSubcases()\n      .combine('sourceAspect', ['all', 'depth-only', 'stencil-only'] as const)\n      .combine('destinationAspect', ['all', 'depth-only', 'stencil-only'] as const)\n  )\n  .fn(async t => {\n    const { format, sourceAspect, destinationAspect } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const kTextureSize = { width: 16, height: 8, depthOrArrayLayers: 1 };\n\n    const srcTexture = t.device.createTexture({\n      size: kTextureSize,\n      format,\n      usage: GPUTextureUsage.COPY_SRC,\n    });\n    const dstTexture = t.device.createTexture({\n      size: kTextureSize,\n      format,\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    // TODO(jiawei.shao@intel.com): get the valid aspects from capability_info.ts.\n    const kValidAspectsForFormat = {\n      rgba8unorm: ['all'],\n\n      // kUnsizedDepthStencilFormats\n      depth24plus: ['all', 'depth-only'],\n      'depth24plus-stencil8': ['all'],\n      'depth24unorm-stencil8': ['all'],\n      'depth32float-stencil8': ['all'],\n\n      // kSizedDepthStencilFormats\n      depth32float: ['all', 'depth-only'],\n      stencil8: ['all', 'stencil-only'],\n      depth16unorm: ['all', 'depth-only'],\n    };\n\n    const isSourceAspectValid = kValidAspectsForFormat[format].includes(sourceAspect);\n    const isDestinationAspectValid = kValidAspectsForFormat[format].includes(destinationAspect);\n\n    t.TestCopyTextureToTexture(\n      { texture: srcTexture, origin: { x: 0, y: 0, z: 0 }, aspect: sourceAspect },\n      { texture: dstTexture, origin: { x: 0, y: 0, z: 0 }, aspect: destinationAspect },\n      kTextureSize,\n      isSourceAspectValid && isDestinationAspectValid\n    );\n  });\n\ng.test('copy_ranges_with_compressed_texture_formats')\n  .params(u =>\n    u\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .combine('copyBoxOffsets', [\n        { x: 0, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 1, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 4, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: -1, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: -4, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 1, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 4, z: 0, width: 0, height: 0, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: 0, height: -1, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: 0, height: -4, depthOrArrayLayers: -2 },\n        { x: 0, y: 0, z: 0, width: 0, height: 0, depthOrArrayLayers: 0 },\n        { x: 0, y: 0, z: 1, width: 0, height: 0, depthOrArrayLayers: -1 },\n      ])\n      .combine('srcCopyLevel', [0, 1, 2])\n      .combine('dstCopyLevel', [0, 1, 2])\n  )\n  .fn(async t => {\n    const { format, copyBoxOffsets, srcCopyLevel, dstCopyLevel } = t.params;\n    await t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n\n    const kTextureSize = { width: 60, height: 48, depthOrArrayLayers: 3 };\n    const kMipLevelCount = 4;\n\n    const srcTexture = t.device.createTexture({\n      size: kTextureSize,\n      format,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_SRC,\n    });\n    const dstTexture = t.device.createTexture({\n      size: kTextureSize,\n      format,\n      mipLevelCount: kMipLevelCount,\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    const srcSizeAtLevel = t.GetPhysicalSubresourceSize(kTextureSize, format, srcCopyLevel);\n    const dstSizeAtLevel = t.GetPhysicalSubresourceSize(kTextureSize, format, dstCopyLevel);\n\n    const copyOrigin = { x: copyBoxOffsets.x, y: copyBoxOffsets.y, z: copyBoxOffsets.z };\n\n    const copyWidth = Math.max(\n      Math.min(srcSizeAtLevel.width, dstSizeAtLevel.width) + copyBoxOffsets.width - copyOrigin.x,\n      0\n    );\n    const copyHeight = Math.max(\n      Math.min(srcSizeAtLevel.height, dstSizeAtLevel.height) + copyBoxOffsets.height - copyOrigin.y,\n      0\n    );\n    const copyDepth =\n      kTextureSize.depthOrArrayLayers + copyBoxOffsets.depthOrArrayLayers - copyOrigin.z;\n\n    const texelBlockWidth = kTextureFormatInfo[format].blockWidth;\n    const texelBlockHeight = kTextureFormatInfo[format].blockHeight;\n\n    const isSuccessForCompressedFormats =\n      copyOrigin.x % texelBlockWidth === 0 &&\n      copyOrigin.y % texelBlockHeight === 0 &&\n      copyWidth % texelBlockWidth === 0 &&\n      copyHeight % texelBlockHeight === 0;\n\n    {\n      const isSuccess =\n        isSuccessForCompressedFormats &&\n        copyWidth <= srcSizeAtLevel.width &&\n        copyHeight <= srcSizeAtLevel.height &&\n        copyOrigin.x + copyWidth <= dstSizeAtLevel.width &&\n        copyOrigin.y + copyHeight <= dstSizeAtLevel.height &&\n        copyOrigin.z + copyDepth <= kTextureSize.depthOrArrayLayers;\n\n      t.TestCopyTextureToTexture(\n        { texture: srcTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: srcCopyLevel },\n        { texture: dstTexture, origin: copyOrigin, mipLevel: dstCopyLevel },\n        { width: copyWidth, height: copyHeight, depthOrArrayLayers: copyDepth },\n        isSuccess\n      );\n    }\n\n    {\n      const isSuccess =\n        isSuccessForCompressedFormats &&\n        copyOrigin.x + copyWidth <= srcSizeAtLevel.width &&\n        copyOrigin.y + copyHeight <= srcSizeAtLevel.height &&\n        copyWidth <= dstSizeAtLevel.width &&\n        copyHeight <= dstSizeAtLevel.height &&\n        copyOrigin.z + copyDepth <= kTextureSize.depthOrArrayLayers;\n\n      t.TestCopyTextureToTexture(\n        { texture: srcTexture, origin: copyOrigin, mipLevel: srcCopyLevel },\n        { texture: dstTexture, origin: { x: 0, y: 0, z: 0 }, mipLevel: dstCopyLevel },\n        { width: copyWidth, height: copyHeight, depthOrArrayLayers: copyDepth },\n        isSuccess\n      );\n    }\n  });\n"],"file":"copyTextureToTexture.spec.js"}