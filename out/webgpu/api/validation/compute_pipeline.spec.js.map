{"version":3,"sources":["../../../../src/webgpu/api/validation/compute_pipeline.spec.ts"],"names":["description","makeTestGroup","getShaderWithEntryPoint","ValidationTest","F","getShaderModule","shaderStage","entryPoint","device","createShaderModule","code","g","test","desc","params","u","combine","fn","t","isAsync","doCreateComputePipelineTest","layout","compute","module","createInvalidShaderModule","shaderModuleStage","descriptor","paramsSubcasesOnly","beforeAllSubcases","selectMismatchedDeviceOrSkipTestCase","undefined","mismatched","mismatchedDevice","createPipelineLayout","bindGroupLayouts","combineWithParams","type","_typeSize","beginSubcases","countDeltaFromLimit","countAtLimit","Math","floor","limits","maxComputeWorkgroupStorageSize","count","size","join","maxComputeInvocationsPerWorkgroup","_success","maxComputeWorkgroupSizeX","maxComputeWorkgroupSizeY","maxComputeWorkgroupSizeZ","constants","c0","c1","c9","c3","c2","c8","c5","kOverridesWorkgroupSizeShaders","u32","i32","x","y","z","testFn","kVec4Size","maxVec4Count","kMat4Size","maxMat4Count","vec4Count","mat4Count","a","b"],"mappings":"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","sourcesContent":["export const description = `\ncreateComputePipeline and createComputePipelineAsync validation tests.\n\nNote: entry point matching tests are in shader_module/entry_point.spec.ts\n`;\n\nimport { makeTestGroup } from '../../../common/framework/test_group.js';\nimport { TShaderStage, getShaderWithEntryPoint } from '../../util/shader.js';\n\nimport { ValidationTest } from './validation_test.js';\n\nclass F extends ValidationTest {\n  getShaderModule(\n    shaderStage: TShaderStage = 'compute',\n    entryPoint: string = 'main'\n  ): GPUShaderModule {\n    return this.device.createShaderModule({\n      code: getShaderWithEntryPoint(shaderStage, entryPoint),\n    });\n  }\n}\n\nexport const g = makeTestGroup(F);\n\ng.test('basic')\n  .desc(\n    `\nControl case for createComputePipeline and createComputePipelineAsync.\nCall the API with valid compute shader and matching valid entryPoint, making sure that the test function working well.\n`\n  )\n  .params(u => u.combine('isAsync', [true, false]))\n  .fn(async t => {\n    const { isAsync } = t.params;\n    t.doCreateComputePipelineTest(isAsync, true, {\n      layout: 'auto',\n      compute: { module: t.getShaderModule('compute', 'main'), entryPoint: 'main' },\n    });\n  });\n\ng.test('shader_module,invalid')\n  .desc(\n    `\nTests calling createComputePipeline(Async) with a invalid compute shader, and check that the APIs catch this error.\n`\n  )\n  .params(u => u.combine('isAsync', [true, false]))\n  .fn(async t => {\n    const { isAsync } = t.params;\n    t.doCreateComputePipelineTest(isAsync, false, {\n      layout: 'auto',\n      compute: {\n        module: t.createInvalidShaderModule(),\n        entryPoint: 'main',\n      },\n    });\n  });\n\ng.test('shader_module,compute')\n  .desc(\n    `\nTests calling createComputePipeline(Async) with valid but different stage shader and matching entryPoint,\nand check that the APIs only accept compute shader.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combine('shaderModuleStage', ['compute', 'vertex', 'fragment'] as TShaderStage[])\n  )\n  .fn(async t => {\n    const { isAsync, shaderModuleStage } = t.params;\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.getShaderModule(shaderModuleStage, 'main'),\n        entryPoint: 'main',\n      },\n    };\n    t.doCreateComputePipelineTest(isAsync, shaderModuleStage === 'compute', descriptor);\n  });\n\ng.test('shader_module,device_mismatch')\n  .desc(\n    'Tests createComputePipeline(Async) cannot be called with a shader module created from another device'\n  )\n  .paramsSubcasesOnly(u => u.combine('isAsync', [true, false]).combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => {\n    t.selectMismatchedDeviceOrSkipTestCase(undefined);\n  })\n  .fn(async t => {\n    const { isAsync, mismatched } = t.params;\n\n    const device = mismatched ? t.mismatchedDevice : t.device;\n\n    const module = device.createShaderModule({\n      code: '@compute @workgroup_size(1) fn main() {}',\n    });\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module,\n        entryPoint: 'main',\n      },\n    };\n\n    t.doCreateComputePipelineTest(isAsync, !mismatched, descriptor);\n  });\n\ng.test('pipeline_layout,device_mismatch')\n  .desc(\n    'Tests createComputePipeline(Async) cannot be called with a pipeline layout created from another device'\n  )\n  .paramsSubcasesOnly(u => u.combine('isAsync', [true, false]).combine('mismatched', [true, false]))\n  .beforeAllSubcases(t => {\n    t.selectMismatchedDeviceOrSkipTestCase(undefined);\n  })\n  .fn(async t => {\n    const { isAsync, mismatched } = t.params;\n    const device = mismatched ? t.mismatchedDevice : t.device;\n\n    const layout = device.createPipelineLayout({ bindGroupLayouts: [] });\n\n    const descriptor = {\n      layout,\n      compute: {\n        module: t.getShaderModule('compute', 'main'),\n        entryPoint: 'main',\n      },\n    };\n\n    t.doCreateComputePipelineTest(isAsync, !mismatched, descriptor);\n  });\n\ng.test('limits,workgroup_storage_size')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for compute using <= device.limits.maxComputeWorkgroupStorageSize bytes of workgroup storage.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combineWithParams([\n        { type: 'vec4<f32>', _typeSize: 16 },\n        { type: 'mat4x4<f32>', _typeSize: 64 },\n      ])\n      .beginSubcases()\n      .combine('countDeltaFromLimit', [0, 1])\n  )\n  .fn(async t => {\n    const { isAsync, type, _typeSize, countDeltaFromLimit } = t.params;\n    const countAtLimit = Math.floor(t.device.limits.maxComputeWorkgroupStorageSize / _typeSize);\n    const count = countAtLimit + countDeltaFromLimit;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: `\n          var<workgroup> data: array<${type}, ${count}>;\n          @compute @workgroup_size(64) fn main () {\n            _ = data;\n          }\n          `,\n        }),\n        entryPoint: 'main',\n      },\n    };\n    t.doCreateComputePipelineTest(isAsync, count <= countAtLimit, descriptor);\n  });\n\ng.test('limits,invocations_per_workgroup')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for compute using <= device.limits.maxComputeInvocationsPerWorkgroup per workgroup.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combine('size', [\n        // Assume maxComputeWorkgroupSizeX/Y >= 129, maxComputeWorkgroupSizeZ >= 33\n        [128, 1, 2],\n        [129, 1, 2],\n        [2, 128, 1],\n        [2, 129, 1],\n        [1, 8, 32],\n        [1, 8, 33],\n      ])\n  )\n  .fn(async t => {\n    const { isAsync, size } = t.params;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: `\n          @compute @workgroup_size(${size.join(',')}) fn main () {\n          }\n          `,\n        }),\n        entryPoint: 'main',\n      },\n    };\n\n    t.doCreateComputePipelineTest(\n      isAsync,\n      size[0] * size[1] * size[2] <= t.device.limits.maxComputeInvocationsPerWorkgroup,\n      descriptor\n    );\n  });\n\ng.test('limits,invocations_per_workgroup,each_component')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for compute workgroup_size attribute has each component no more than their limits.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combine('size', [\n        // Assume maxComputeInvocationsPerWorkgroup >= 256\n        [64],\n        [256, 1, 1],\n        [257, 1, 1],\n        [1, 256, 1],\n        [1, 257, 1],\n        [1, 1, 63],\n        [1, 1, 64],\n        [1, 1, 65],\n      ])\n  )\n  .fn(async t => {\n    const { isAsync, size } = t.params;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: `\n          @compute @workgroup_size(${size.join(',')}) fn main () {\n          }\n          `,\n        }),\n        entryPoint: 'main',\n      },\n    };\n\n    size[1] = size[1] ?? 1;\n    size[2] = size[2] ?? 1;\n\n    const _success =\n      size[0] <= t.device.limits.maxComputeWorkgroupSizeX &&\n      size[1] <= t.device.limits.maxComputeWorkgroupSizeY &&\n      size[2] <= t.device.limits.maxComputeWorkgroupSizeZ;\n    t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n  });\n\ng.test('overrides,identifier')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for overridable constants identifiers.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combineWithParams([\n        { constants: {}, _success: true },\n        { constants: { c0: 0 }, _success: true },\n        { constants: { c0: 0, c1: 1 }, _success: true },\n        { constants: { c9: 0 }, _success: false },\n        { constants: { 1: 0 }, _success: true },\n        { constants: { c3: 0 }, _success: false }, // pipeline constant id is specified for c3\n        { constants: { 2: 0 }, _success: false },\n        { constants: { 1000: 0 }, _success: true },\n        { constants: { 9999: 0 }, _success: false },\n        { constants: { 1000: 0, c2: 0 }, _success: false },\n      ] as { constants: Record<string, GPUPipelineConstantValue>; _success: boolean }[])\n  )\n  .fn(async t => {\n    const { isAsync, constants, _success } = t.params;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: `\n            override c0: bool = true;      // type: bool\n            override c1: u32 = 0u;          // default override\n            @id(1000) override c2: u32 = 10u;  // default\n            @id(1) override c3: u32 = 11u;     // default\n            @compute @workgroup_size(1) fn main () {\n              // make sure the overridable constants are not optimized out\n              _ = u32(c0);\n              _ = u32(c1);\n              _ = u32(c2);\n              _ = u32(c3);\n            }`,\n        }),\n        entryPoint: 'main',\n        constants,\n      },\n    };\n\n    t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n  });\n\ng.test('overrides,uninitialized')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for uninitialized overridable constants.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combineWithParams([\n        { constants: {}, _success: false },\n        { constants: { c0: 0, c2: 0, c8: 0 }, _success: false }, // c5 is missing\n        { constants: { c0: 0, c2: 0, c5: 0, c8: 0 }, _success: true },\n        { constants: { c0: 0, c2: 0, c5: 0, c8: 0, c1: 0 }, _success: true },\n      ] as { constants: Record<string, GPUPipelineConstantValue>; _success: boolean }[])\n  )\n  .fn(async t => {\n    const { isAsync, constants, _success } = t.params;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: `\n            override c0: bool;              // type: bool\n            override c1: bool = false;      // default override\n            override c2: f32;               // type: float32\n            override c3: f32 = 0.0;         // default override\n            override c4: f32 = 4.0;         // default\n            override c5: i32;               // type: int32\n            override c6: i32 = 0;           // default override\n            override c7: i32 = 7;           // default\n            override c8: u32;               // type: uint32\n            override c9: u32 = 0u;          // default override\n            @id(1000) override c10: u32 = 10u;  // default\n            @compute @workgroup_size(1) fn main () {\n              // make sure the overridable constants are not optimized out\n              _ = u32(c0);\n              _ = u32(c1);\n              _ = u32(c2);\n              _ = u32(c3);\n              _ = u32(c4);\n              _ = u32(c5);\n              _ = u32(c6);\n              _ = u32(c7);\n              _ = u32(c8);\n              _ = u32(c9);\n              _ = u32(c10);\n            }`,\n        }),\n        entryPoint: 'main',\n        constants,\n      },\n    };\n\n    t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n  });\n\nconst kOverridesWorkgroupSizeShaders = {\n  u32: `\noverride x: u32 = 1u;\noverride y: u32 = 1u;\noverride z: u32 = 1u;\n@compute @workgroup_size(x, y, z) fn main () {\n  _ = 0u;\n}\n`,\n  i32: `\noverride x: i32 = 1;\noverride y: i32 = 1;\noverride z: i32 = 1;\n@compute @workgroup_size(x, y, z) fn main () {\n  _ = 0u;\n}\n`,\n};\n\ng.test('overrides,workgroup_size')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for overridable constants used for workgroup size.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combine('type', ['u32', 'i32'] as const)\n      .combineWithParams([\n        { constants: {}, _success: true },\n        { constants: { x: 0, y: 0, z: 0 }, _success: false },\n        { constants: { x: 1, y: -1, z: 1 }, _success: false },\n        { constants: { x: 1, y: 0, z: 0 }, _success: false },\n        { constants: { x: 16, y: 1, z: 1 }, _success: true },\n      ] as { constants: Record<string, GPUPipelineConstantValue>; _success: boolean }[])\n  )\n  .fn(async t => {\n    const { isAsync, type, constants, _success } = t.params;\n\n    const descriptor = {\n      layout: 'auto' as const,\n      compute: {\n        module: t.device.createShaderModule({\n          code: kOverridesWorkgroupSizeShaders[type],\n        }),\n        entryPoint: 'main',\n        constants,\n      },\n    };\n\n    t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n  });\n\ng.test('overrides,workgroup_size,limits')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for overridable constants for workgroupSize exceeds device limits.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n      .combine('type', ['u32', 'i32'] as const)\n  )\n  .fn(async t => {\n    const { isAsync, type } = t.params;\n\n    const limits = t.device.limits;\n\n    const testFn = (x: number, y: number, z: number, _success: boolean) => {\n      const descriptor = {\n        layout: 'auto' as const,\n        compute: {\n          module: t.device.createShaderModule({\n            code: kOverridesWorkgroupSizeShaders[type],\n          }),\n          entryPoint: 'main',\n          constants: {\n            x,\n            y,\n            z,\n          },\n        },\n      };\n\n      t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n    };\n\n    testFn(limits.maxComputeWorkgroupSizeX, 1, 1, true);\n    testFn(limits.maxComputeWorkgroupSizeX + 1, 1, 1, false);\n    testFn(1, limits.maxComputeWorkgroupSizeY, 1, true);\n    testFn(1, limits.maxComputeWorkgroupSizeY + 1, 1, false);\n    testFn(1, 1, limits.maxComputeWorkgroupSizeZ, true);\n    testFn(1, 1, limits.maxComputeWorkgroupSizeZ + 1, false);\n    testFn(\n      limits.maxComputeWorkgroupSizeX,\n      limits.maxComputeWorkgroupSizeY,\n      limits.maxComputeWorkgroupSizeZ,\n      limits.maxComputeWorkgroupSizeX *\n        limits.maxComputeWorkgroupSizeY *\n        limits.maxComputeWorkgroupSizeZ <=\n        limits.maxComputeInvocationsPerWorkgroup\n    );\n  });\n\ng.test('overrides,workgroup_size,limits,workgroup_storage_size')\n  .desc(\n    `\nTests calling createComputePipeline(Async) validation for overridable constants for workgroupStorageSize exceeds device limits.\n`\n  )\n  .params(u =>\n    u //\n      .combine('isAsync', [true, false])\n  )\n  .fn(async t => {\n    const { isAsync } = t.params;\n\n    const limits = t.device.limits;\n\n    const kVec4Size = 16;\n    const maxVec4Count = limits.maxComputeWorkgroupStorageSize / kVec4Size;\n    const kMat4Size = 64;\n    const maxMat4Count = limits.maxComputeWorkgroupStorageSize / kMat4Size;\n\n    const testFn = (vec4Count: number, mat4Count: number, _success: boolean) => {\n      const descriptor = {\n        layout: 'auto' as const,\n        compute: {\n          module: t.device.createShaderModule({\n            code: `\n              override a: u32;\n              override b: u32;\n              ${vec4Count <= 0 ? '' : 'var<workgroup> vec4_data: array<vec4<f32>, a>;'}\n              ${mat4Count <= 0 ? '' : 'var<workgroup> mat4_data: array<mat4x4<f32>, b>;'}\n              @compute @workgroup_size(1) fn main() {\n                ${vec4Count <= 0 ? '' : '_ = vec4_data;'}\n                ${vec4Count <= 0 ? '' : '_ = mat4_data;'}\n              }`,\n          }),\n          entryPoint: 'main',\n          constants: {\n            a: vec4Count,\n            b: mat4Count,\n          },\n        },\n      };\n\n      t.doCreateComputePipelineTest(isAsync, _success, descriptor);\n    };\n\n    testFn(1, 1, true);\n    testFn(maxVec4Count + 1, 0, false);\n    testFn(0, maxMat4Count + 1, false);\n  });\n"],"file":"compute_pipeline.spec.js"}