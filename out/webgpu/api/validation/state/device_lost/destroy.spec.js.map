{"version":3,"file":"destroy.spec.js","names":["description","makeTestGroup","allBindingEntries","bindingTypeInfo","kBindableResources","kBufferUsageKeys","kBufferUsageInfo","kBufferUsageCopy","kBufferUsageCopyInfo","kCompressedTextureFormats","kQueryTypes","kTextureUsageType","kTextureUsageTypeInfo","kTextureUsageCopy","kTextureUsageCopyInfo","kRegularTextureFormats","kRenderableColorTextureFormats","kShaderStageKeys","kTextureFormatInfo","canCopyFromCanvasContext","createCanvas","kAllCanvasTypes","kValidCanvasContextIds","ValidationTest","kCommandValidationStages","DeviceDestroyTests","executeAfterDestroy","fn","awaitLost","expectDeviceLost","expectValidationError","device","destroy","lostInfo","lost","expect","reason","executeCommandsAfterDestroy","stage","encoderType","createEncoder","validateFinish","encoder","finish","validateFinishAndSubmit","commands","queue","submit","g","test","desc","params","u","combine","beginSubcases","filter","usageType","usageCopy","t","mappedAtCreation","createBuffer","size","usage","format","info","renderable","storage","blockWidth","blockHeight","createTexture","width","height","beforeAllSubcases","selectDeviceOrSkipTestCase","feature","texture","createView","createSampler","entry","visibility","validStages","createBindGroupLayout","entries","binding","resourceType","resource","layout","getBindingResource","createBindGroup","bindGroupLayout","createPipelineLayout","bindGroupLayouts","createShaderModule","code","getNoOpShaderCode","cShader","createComputePipeline","compute","module","entryPoint","vShader","fShader","createRenderPipeline","vertex","fragment","targets","writeMask","createCommandEncoder","createRenderBundleEncoder","colorFormats","type","selectDeviceForQueryTypeOrSkipTestCase","createQuerySet","count","kBufferSize","src","GPUBufferUsage","COPY_SRC","dst","COPY_DST","maker","copyBufferToBuffer","bytesPerBlock","buffer","GPUTextureUsage","copySize","copyBufferToTexture","copyTextureToBuffer","copyTextureToTexture","clearBuffer","queryTypes","push","querySet","writeTimestamp","kQueryCount","createQuerySetWithState","destination","createBufferWithState","QUERY_RESOLVE","resolveQuerySet","pipeline","setPipeline","dispatchWorkgroups","draw","numElements","data","Uint8Array","writeBuffer","writeTexture","contextType","canvasType","canvas","ctx","getContext","skip","tryTrackForCleanup","copyExternalImageToTexture","source","createImageBitmap","imageBitmap","ImageData","Uint8ClampedArray"],"sources":["../../../../../../src/webgpu/api/validation/state/device_lost/destroy.spec.ts"],"sourcesContent":["export const description = `\nTests for device lost induced via destroy.\n  - Tests that prior to device destruction, valid APIs do not generate errors (control case).\n  - After device destruction, runs the same APIs. No expected observable results, so test crash or future failures are the only current failure indicators.\n`;\n\nimport { makeTestGroup } from '../../../../../common/framework/test_group.js';\nimport {\n  allBindingEntries,\n  bindingTypeInfo,\n  kBindableResources,\n  kBufferUsageKeys,\n  kBufferUsageInfo,\n  kBufferUsageCopy,\n  kBufferUsageCopyInfo,\n  kCompressedTextureFormats,\n  kQueryTypes,\n  kTextureUsageType,\n  kTextureUsageTypeInfo,\n  kTextureUsageCopy,\n  kTextureUsageCopyInfo,\n  kRegularTextureFormats,\n  kRenderableColorTextureFormats,\n  kShaderStageKeys,\n  kTextureFormatInfo,\n} from '../../../../capability_info.js';\nimport { CommandBufferMaker, EncoderType } from '../../../../util/command_buffer_maker.js';\nimport {\n  canCopyFromCanvasContext,\n  createCanvas,\n  kAllCanvasTypes,\n  kValidCanvasContextIds,\n} from '../../../../util/create_elements.js';\nimport { ValidationTest } from '../../validation_test.js';\n\nconst kCommandValidationStages = ['finish', 'submit'];\ntype CommandValidationStage = typeof kCommandValidationStages[number];\n\nclass DeviceDestroyTests extends ValidationTest {\n  /**\n   * Expects that `fn` does not produce any errors before the device is destroyed, and then calls\n   * `fn` after the device is destroyed without any specific expectation. If `awaitLost` is true, we\n   * also wait for device.lost to resolve before executing `fn` in the destroy case.\n   */\n  async executeAfterDestroy(fn: () => void, awaitLost: boolean): Promise<void> {\n    this.expectDeviceLost('destroyed');\n\n    this.expectValidationError(fn, false);\n    this.device.destroy();\n    if (awaitLost) {\n      const lostInfo = await this.device.lost;\n      this.expect(lostInfo.reason === 'destroyed');\n    }\n    fn();\n  }\n\n  /**\n   * Expects that encoders can finish and submit the resulting commands before the device is\n   * destroyed, then repeats the same process after the device is destroyed without any specific\n   * expectations.\n   * There are two valid stages: 'finish' and 'submit'.\n   *   'finish': Tests [encode, finish] and [encoder, destroy, finish]\n   *   'submit': Tests [encoder, finish, submit] and [encoder, finish, destroy, submit]\n   */\n  async executeCommandsAfterDestroy<T extends EncoderType>(\n    stage: CommandValidationStage,\n    awaitLost: boolean,\n    encoderType: T,\n    fn: (maker: CommandBufferMaker<T>) => CommandBufferMaker<T>\n  ): Promise<void> {\n    this.expectDeviceLost('destroyed');\n\n    switch (stage) {\n      case 'finish': {\n        // Control case\n        fn(this.createEncoder(encoderType)).validateFinish(true);\n        // Validation case\n        const encoder = fn(this.createEncoder(encoderType));\n        await this.executeAfterDestroy(() => {\n          encoder.finish();\n        }, awaitLost);\n        break;\n      }\n      case 'submit': {\n        // Control case\n        fn(this.createEncoder(encoderType)).validateFinishAndSubmit(true, true);\n        // Validation case\n        const commands = fn(this.createEncoder(encoderType)).validateFinish(true);\n        await this.executeAfterDestroy(() => {\n          this.queue.submit([commands]);\n        }, awaitLost);\n        break;\n      }\n    }\n  }\n}\n\nexport const g = makeTestGroup(DeviceDestroyTests);\n\ng.test('createBuffer')\n  .desc(\n    `\nTests creating buffers on destroyed device. Tests valid combinations of:\n  - Various usages\n  - Mapped at creation or not\n  `\n  )\n  .params(u =>\n    u\n      .combine('usageType', kBufferUsageKeys)\n      .beginSubcases()\n      .combine('usageCopy', kBufferUsageCopy)\n      .combine('awaitLost', [true, false])\n      .filter(({ usageType, usageCopy }) => {\n        if (usageType === 'COPY_SRC' || usageType === 'COPY_DST') {\n          return false;\n        }\n        if (usageType === 'MAP_READ') {\n          return usageCopy === 'COPY_NONE' || usageCopy === 'COPY_DST';\n        }\n        if (usageType === 'MAP_WRITE') {\n          return usageCopy === 'COPY_NONE' || usageCopy === 'COPY_SRC';\n        }\n        return true;\n      })\n      .combine('mappedAtCreation', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, usageType, usageCopy, mappedAtCreation } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createBuffer({\n        size: 16,\n        usage: kBufferUsageInfo[usageType] | kBufferUsageCopyInfo[usageCopy],\n        mappedAtCreation,\n      });\n    }, awaitLost);\n  });\n\ng.test('createTexture,2d,uncompressed_format')\n  .desc(\n    `\nTests creating 2d uncompressed textures on destroyed device. Tests valid combinations of:\n  - Various uncompressed texture formats\n  - Various usages\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kRegularTextureFormats)\n      .beginSubcases()\n      .combine('usageType', kTextureUsageType)\n      .combine('usageCopy', kTextureUsageCopy)\n      .combine('awaitLost', [true, false])\n      .filter(({ format, usageType }) => {\n        const info = kTextureFormatInfo[format];\n        return !(\n          (!info.renderable && usageType === 'render') ||\n          (!info.storage && usageType === 'storage')\n        );\n      })\n  )\n  .fn(async t => {\n    const { awaitLost, format, usageType, usageCopy } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n    await t.executeAfterDestroy(() => {\n      t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: kTextureUsageTypeInfo[usageType] | kTextureUsageCopyInfo[usageCopy],\n        format,\n      });\n    }, awaitLost);\n  });\n\ng.test('createTexture,2d,compressed_format')\n  .desc(\n    `\nTests creating 2d compressed textures on destroyed device. Tests valid combinations of:\n  - Various compressed texture formats\n  - Various usages\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .combine('usageType', kTextureUsageType)\n      .combine('usageCopy', kTextureUsageCopy)\n      .combine('awaitLost', [true, false])\n      .filter(({ format, usageType }) => {\n        const info = kTextureFormatInfo[format];\n        return !(\n          (!info.renderable && usageType === 'render') ||\n          (!info.storage && usageType === 'storage')\n        );\n      })\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n  })\n  .fn(async t => {\n    const { awaitLost, format, usageType, usageCopy } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n    await t.executeAfterDestroy(() => {\n      t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: kTextureUsageTypeInfo[usageType] | kTextureUsageCopyInfo[usageCopy],\n        format,\n      });\n    }, awaitLost);\n  });\n\ng.test('createView,2d,uncompressed_format')\n  .desc(\n    `\nTests creating texture views on 2d uncompressed textures from destroyed device. Tests valid combinations of:\n  - Various uncompressed texture formats\n  - Various usages\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kRegularTextureFormats)\n      .beginSubcases()\n      .combine('usageType', kTextureUsageType)\n      .combine('usageCopy', kTextureUsageCopy)\n      .combine('awaitLost', [true, false])\n      .filter(({ format, usageType }) => {\n        const info = kTextureFormatInfo[format];\n        return !(\n          (!info.renderable && usageType === 'render') ||\n          (!info.storage && usageType === 'storage')\n        );\n      })\n  )\n  .fn(async t => {\n    const { awaitLost, format, usageType, usageCopy } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n    const texture = t.device.createTexture({\n      size: { width: blockWidth, height: blockHeight },\n      usage: kTextureUsageTypeInfo[usageType] | kTextureUsageCopyInfo[usageCopy],\n      format,\n    });\n    await t.executeAfterDestroy(() => {\n      texture.createView({ format });\n    }, awaitLost);\n  });\n\ng.test('createView,2d,compressed_format')\n  .desc(\n    `\nTests creating texture views on 2d compressed textures from destroyed device. Tests valid combinations of:\n  - Various compressed texture formats\n  - Various usages\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .combine('usageType', kTextureUsageType)\n      .combine('usageCopy', kTextureUsageCopy)\n      .combine('awaitLost', [true, false])\n      .filter(({ format, usageType }) => {\n        const info = kTextureFormatInfo[format];\n        return !(\n          (!info.renderable && usageType === 'render') ||\n          (!info.storage && usageType === 'storage')\n        );\n      })\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n  })\n  .fn(async t => {\n    const { awaitLost, format, usageType, usageCopy } = t.params;\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n    const texture = t.device.createTexture({\n      size: { width: blockWidth, height: blockHeight },\n      usage: kTextureUsageTypeInfo[usageType] | kTextureUsageCopyInfo[usageCopy],\n      format,\n    });\n    await t.executeAfterDestroy(() => {\n      texture.createView({ format });\n    }, awaitLost);\n  });\n\ng.test('createSampler')\n  .desc(\n    `\nTests creating samplers on destroyed device.\n  `\n  )\n  .params(u => u.beginSubcases().combine('awaitLost', [true, false]))\n  .fn(async t => {\n    const { awaitLost } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createSampler();\n    }, awaitLost);\n  });\n\ng.test('createBindGroupLayout')\n  .desc(\n    `\nTests creating bind group layouts on destroyed device. Tests valid combinations of:\n  - Various valid binding entries\n  - Maximum set of visibility for each binding entry\n  `\n  )\n  .params(u =>\n    u.combine('entry', allBindingEntries(false)).beginSubcases().combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, entry } = t.params;\n    const visibility = bindingTypeInfo(entry).validStages;\n    await t.executeAfterDestroy(() => {\n      t.device.createBindGroupLayout({\n        entries: [{ binding: 0, visibility, ...entry }],\n      });\n    }, awaitLost);\n  });\n\ng.test('createBindGroup')\n  .desc(\n    `\nTests creating bind group on destroyed device. Tests valid combinations of:\n  - Various bound resource types\n  - Various valid binding entries\n  - Maximum set of visibility for each binding entry\n  `\n  )\n  .desc(`A destroyed device should not be able to create any valid bind groups.`)\n  .params(u =>\n    u\n      .combine('resourceType', kBindableResources)\n      .combine('entry', allBindingEntries(false))\n      .filter(({ resourceType, entry }) => {\n        const info = bindingTypeInfo(entry);\n        switch (info.resource) {\n          // Either type of sampler may be bound to a filtering sampler binding.\n          case 'filtSamp':\n            return resourceType === 'filtSamp' || resourceType === 'nonFiltSamp';\n          // But only non-filtering samplers can be used with non-filtering sampler bindings.\n          case 'nonFiltSamp':\n            return resourceType === 'nonFiltSamp';\n          default:\n            return info.resource === resourceType;\n        }\n      })\n      .beginSubcases()\n      .combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, resourceType, entry } = t.params;\n    const visibility = bindingTypeInfo(entry).validStages;\n    const layout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility, ...entry }],\n    });\n    const resource = t.getBindingResource(resourceType);\n    await t.executeAfterDestroy(() => {\n      t.device.createBindGroup({ layout, entries: [{ binding: 0, resource }] });\n    }, awaitLost);\n  });\n\ng.test('createPipelineLayout')\n  .desc(\n    `\nTests creating pipeline layouts on destroyed device. Tests valid combinations of:\n  - Various bind groups with valid binding entries\n  - Maximum set of visibility for each binding entry\n  `\n  )\n  .params(u =>\n    u.combine('entry', allBindingEntries(false)).beginSubcases().combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, entry } = t.params;\n    const visibility = bindingTypeInfo(entry).validStages;\n    const bindGroupLayout = t.device.createBindGroupLayout({\n      entries: [{ binding: 0, visibility, ...entry }],\n    });\n    await t.executeAfterDestroy(() => {\n      t.device.createPipelineLayout({\n        bindGroupLayouts: [bindGroupLayout],\n      });\n    }, awaitLost);\n  });\n\ng.test('createShaderModule')\n  .desc(\n    `\nTests creating shader modules on destroyed device.\n  - Tests all shader stages: vertex, fragment, compute\n  `\n  )\n  .params(u =>\n    u.combine('stage', kShaderStageKeys).beginSubcases().combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, stage } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createShaderModule({ code: t.getNoOpShaderCode(stage) });\n    }, awaitLost);\n  });\n\ng.test('createComputePipeline')\n  .desc(\n    `\nTests creating compute pipeline on destroyed device.\n  - Tests with a valid no-op compute shader\n  `\n  )\n  .params(u => u.beginSubcases().combine('awaitLost', [true, false]))\n  .fn(async t => {\n    const { awaitLost } = t.params;\n    const cShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('COMPUTE') });\n    await t.executeAfterDestroy(() => {\n      t.device.createComputePipeline({\n        layout: 'auto',\n        compute: { module: cShader, entryPoint: 'main' },\n      });\n    }, awaitLost);\n  });\n\ng.test('createRenderPipeline')\n  .desc(\n    `\nTests creating render pipeline on destroyed device.\n  - Tests with valid no-op vertex and fragment shaders\n  `\n  )\n  .params(u => u.beginSubcases().combine('awaitLost', [true, false]))\n  .fn(async t => {\n    const { awaitLost } = t.params;\n    const vShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('VERTEX') });\n    const fShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('FRAGMENT') });\n    await t.executeAfterDestroy(() => {\n      t.device.createRenderPipeline({\n        layout: 'auto',\n        vertex: { module: vShader, entryPoint: 'main' },\n        fragment: {\n          module: fShader,\n          entryPoint: 'main',\n          targets: [{ format: 'rgba8unorm', writeMask: 0 }],\n        },\n      });\n    }, awaitLost);\n  });\n\ng.test('createCommandEncoder')\n  .desc(\n    `\nTests creating command encoders on destroyed device.\n  `\n  )\n  .params(u => u.beginSubcases().combine('awaitLost', [true, false]))\n  .fn(async t => {\n    const { awaitLost } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createCommandEncoder();\n    }, awaitLost);\n  });\n\ng.test('createRenderBundleEncoder')\n  .desc(\n    `\nTests creating render bundle encoders on destroyed device.\n  - Tests various renderable texture color formats\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kRenderableColorTextureFormats)\n      .beginSubcases()\n      .combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { awaitLost, format } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createRenderBundleEncoder({ colorFormats: [format] });\n    }, awaitLost);\n  });\n\ng.test('createQuerySet')\n  .desc(\n    `\nTests creating query sets on destroyed device.\n  - Tests various query set types\n  `\n  )\n  .params(u => u.combine('type', kQueryTypes).beginSubcases().combine('awaitLost', [true, false]))\n  .beforeAllSubcases(t => {\n    const { type } = t.params;\n    t.selectDeviceForQueryTypeOrSkipTestCase(type);\n  })\n  .fn(async t => {\n    const { awaitLost, type } = t.params;\n    await t.executeAfterDestroy(() => {\n      t.device.createQuerySet({ type, count: 4 });\n    }, awaitLost);\n  });\n\ng.test('command,copyBufferToBuffer')\n  .desc(\n    `\nTests copyBufferToBuffer command with various uncompressed formats on destroyed device.\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const kBufferSize = 16;\n    const src = t.device.createBuffer({\n      size: kBufferSize,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    const dst = t.device.createBuffer({\n      size: kBufferSize,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.copyBufferToBuffer(src, 0, dst, 0, kBufferSize);\n      return maker;\n    });\n  });\n\ng.test('command,copyBufferToTexture')\n  .desc(\n    `\nTests copyBufferToTexture command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const format = 'rgba32uint';\n    const { bytesPerBlock, blockWidth, blockHeight } = kTextureFormatInfo[format];\n    const src = {\n      buffer: t.device.createBuffer({\n        size: bytesPerBlock,\n        usage: GPUBufferUsage.COPY_SRC,\n      }),\n    };\n    const dst = {\n      texture: t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: GPUTextureUsage.COPY_DST,\n        format,\n      }),\n    };\n    const copySize = { width: blockWidth, height: blockHeight };\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.copyBufferToTexture(src, dst, copySize);\n      return maker;\n    });\n  });\n\ng.test('command,copyTextureToBuffer')\n  .desc(\n    `\nTests copyTextureToBuffer command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const format = 'rgba32uint';\n    const { bytesPerBlock, blockWidth, blockHeight } = kTextureFormatInfo[format];\n    const src = {\n      texture: t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: GPUTextureUsage.COPY_SRC,\n        format,\n      }),\n    };\n    const dst = {\n      buffer: t.device.createBuffer({\n        size: bytesPerBlock,\n        usage: GPUBufferUsage.COPY_DST,\n      }),\n    };\n    const copySize = { width: blockWidth, height: blockHeight };\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.copyTextureToBuffer(src, dst, copySize);\n      return maker;\n    });\n  });\n\ng.test('command,copyTextureToTexture')\n  .desc(\n    `\nTests copyTextureToTexture command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const format = 'rgba32uint';\n    const { blockWidth, blockHeight } = kTextureFormatInfo[format];\n    const src = {\n      texture: t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: GPUTextureUsage.COPY_SRC,\n        format,\n      }),\n    };\n    const dst = {\n      texture: t.device.createTexture({\n        size: { width: blockWidth, height: blockHeight },\n        usage: GPUBufferUsage.COPY_DST,\n        format,\n      }),\n    };\n    const copySize = { width: blockWidth, height: blockHeight };\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.copyTextureToTexture(src, dst, copySize);\n      return maker;\n    });\n  });\n\ng.test('command,clearBuffer')\n  .desc(\n    `\nTests encoding and finishing a clearBuffer command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const kBufferSize = 16;\n    const buffer = t.device.createBuffer({\n      size: kBufferSize,\n      usage: GPUBufferUsage.COPY_SRC,\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.clearBuffer(buffer, 0, kBufferSize);\n      return maker;\n    });\n  });\n\ng.test('command,writeTimestamp')\n  .desc(\n    `\nTests encoding and finishing a writeTimestamp command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u\n      .combine('type', kQueryTypes)\n      .beginSubcases()\n      .combine('stage', kCommandValidationStages)\n      .combine('awaitLost', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { type } = t.params;\n\n    // writeTimestamp is only available for devices that enable the 'timestamp-query' feature.\n    const queryTypes: GPUQueryType[] = ['timestamp'];\n    if (type !== 'timestamp') {\n      queryTypes.push(type);\n    }\n\n    t.selectDeviceForQueryTypeOrSkipTestCase(queryTypes);\n  })\n  .fn(async t => {\n    const { type, stage, awaitLost } = t.params;\n    const querySet = t.device.createQuerySet({ type, count: 2 });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.writeTimestamp(querySet, 0);\n      return maker;\n    });\n  });\n\ng.test('command,resolveQuerySet')\n  .desc(\n    `\nTests encoding and finishing a resolveQuerySet command on destroyed device.\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const kQueryCount = 2;\n    const querySet = t.createQuerySetWithState('valid');\n    const destination = t.createBufferWithState('valid', {\n      size: kQueryCount * 8,\n      usage: GPUBufferUsage.QUERY_RESOLVE,\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'non-pass', maker => {\n      maker.encoder.resolveQuerySet(querySet, 0, 1, destination, 0);\n      return maker;\n    });\n  });\n\ng.test('command,computePass,dispatch')\n  .desc(\n    `\nTests encoding and dispatching a simple valid compute pass on destroyed device.\n  - Binds valid pipeline and bindgroups, then dispatches\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const cShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('COMPUTE') });\n    const pipeline = t.device.createComputePipeline({\n      layout: 'auto',\n      compute: { module: cShader, entryPoint: 'main' },\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'compute pass', maker => {\n      maker.encoder.setPipeline(pipeline);\n      maker.encoder.dispatchWorkgroups(1);\n      return maker;\n    });\n  });\n\ng.test('command,renderPass,draw')\n  .desc(\n    `\nTests encoding and finishing a simple valid render pass on destroyed device.\n  - Binds valid pipeline and bindgroups, then draws\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const vShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('VERTEX') });\n    const fShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('FRAGMENT') });\n    const pipeline = t.device.createRenderPipeline({\n      layout: 'auto',\n      vertex: { module: vShader, entryPoint: 'main' },\n      fragment: {\n        module: fShader,\n        entryPoint: 'main',\n        targets: [{ format: 'rgba8unorm', writeMask: 0 }],\n      },\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'render pass', maker => {\n      maker.encoder.setPipeline(pipeline);\n      maker.encoder.draw(0);\n      return maker;\n    });\n  });\n\ng.test('command,renderPass,renderBundle')\n  .desc(\n    `\nTests encoding and drawing a render pass including a render bundle on destroyed device.\n  - Binds valid pipeline and bindgroups, executes render bundle, then draws\n  - Tests finishing encoding on destroyed device\n  - Tests submitting command on destroyed device\n  `\n  )\n  .params(u =>\n    u.beginSubcases().combine('stage', kCommandValidationStages).combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { stage, awaitLost } = t.params;\n    const vShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('VERTEX') });\n    const fShader = t.device.createShaderModule({ code: t.getNoOpShaderCode('FRAGMENT') });\n    const pipeline = t.device.createRenderPipeline({\n      layout: 'auto',\n      vertex: { module: vShader, entryPoint: 'main' },\n      fragment: {\n        module: fShader,\n        entryPoint: 'main',\n        targets: [{ format: 'rgba8unorm', writeMask: 0 }],\n      },\n    });\n    await t.executeCommandsAfterDestroy(stage, awaitLost, 'render bundle', maker => {\n      maker.encoder.setPipeline(pipeline);\n      maker.encoder.draw(0);\n      return maker;\n    });\n  });\n\ng.test('queue,writeBuffer')\n  .desc(\n    `\nTests writeBuffer on queue on destroyed device.\n  `\n  )\n  .params(u =>\n    u.combine('numElements', [4, 8, 16]).beginSubcases().combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { numElements, awaitLost } = t.params;\n    const buffer = t.device.createBuffer({\n      size: numElements,\n      usage: GPUBufferUsage.COPY_DST,\n    });\n    const data = new Uint8Array(numElements);\n    await t.executeAfterDestroy(() => {\n      t.device.queue.writeBuffer(buffer, 0, data);\n    }, awaitLost);\n  });\n\ng.test('queue,writeTexture,2d,uncompressed_format')\n  .desc(\n    `\nTests writeTexture on queue on destroyed device with uncompressed formats.\n  `\n  )\n  .params(u =>\n    u.combine('format', kRegularTextureFormats).beginSubcases().combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { format, awaitLost } = t.params;\n    const { blockWidth, blockHeight, bytesPerBlock } = kTextureFormatInfo[format];\n    const data = new Uint8Array(bytesPerBlock);\n    const texture = t.device.createTexture({\n      size: { width: blockWidth, height: blockHeight },\n      usage: GPUTextureUsage.COPY_DST,\n      format,\n    });\n    await t.executeAfterDestroy(() => {\n      t.device.queue.writeTexture(\n        { texture },\n        data,\n        {},\n        { width: blockWidth, height: blockHeight }\n      );\n    }, awaitLost);\n  });\n\ng.test('queue,writeTexture,2d,compressed_format')\n  .desc(\n    `\nTests writeTexture on queue on destroyed device with compressed formats.\n  `\n  )\n  .params(u =>\n    u\n      .combine('format', kCompressedTextureFormats)\n      .beginSubcases()\n      .combine('awaitLost', [true, false])\n  )\n  .beforeAllSubcases(t => {\n    const { format } = t.params;\n    t.selectDeviceOrSkipTestCase(kTextureFormatInfo[format].feature);\n  })\n  .fn(async t => {\n    const { format, awaitLost } = t.params;\n    const { blockWidth, blockHeight, bytesPerBlock } = kTextureFormatInfo[format];\n    const data = new Uint8Array(bytesPerBlock);\n    const texture = t.device.createTexture({\n      size: { width: blockWidth, height: blockHeight },\n      usage: GPUTextureUsage.COPY_DST,\n      format,\n    });\n    await t.executeAfterDestroy(() => {\n      t.device.queue.writeTexture(\n        { texture },\n        data,\n        {},\n        { width: blockWidth, height: blockHeight }\n      );\n    }, awaitLost);\n  });\n\ng.test('queue,copyExternalImageToTexture,canvas')\n  .desc(\n    `\nTests copyExternalImageToTexture from canvas on queue on destroyed device.\n  `\n  )\n  .params(u =>\n    u\n      .combine('canvasType', kAllCanvasTypes)\n      .combine('contextType', kValidCanvasContextIds)\n      .filter(({ contextType }) => {\n        return canCopyFromCanvasContext(contextType);\n      })\n      .beginSubcases()\n      .combine('awaitLost', [true, false])\n  )\n  .fn(async t => {\n    const { canvasType, contextType, awaitLost } = t.params;\n    const canvas = createCanvas(t, canvasType, 1, 1);\n    const texture = t.device.createTexture({\n      size: { width: 1, height: 1 },\n      format: 'bgra8unorm',\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    const ctx = ((canvas as unknown) as HTMLCanvasElement).getContext(contextType);\n    if (ctx === null) {\n      t.skip('Failed to get context for canvas element');\n      return;\n    }\n    t.tryTrackForCleanup(ctx);\n\n    await t.executeAfterDestroy(() => {\n      t.device.queue.copyExternalImageToTexture(\n        { source: canvas },\n        { texture },\n        { width: 1, height: 1 }\n      );\n    }, awaitLost);\n  });\n\ng.test('queue,copyExternalImageToTexture,imageBitmap')\n  .desc(\n    `\nTests copyExternalImageToTexture from canvas on queue on destroyed device.\n  `\n  )\n  .params(u => u.beginSubcases().combine('awaitLost', [true, false]))\n  .fn(async t => {\n    const { awaitLost } = t.params;\n    if (typeof createImageBitmap === 'undefined') {\n      t.skip('Creating ImageBitmaps is not supported.');\n    }\n    const imageBitmap = await createImageBitmap(new ImageData(new Uint8ClampedArray(4), 1, 1));\n\n    const texture = t.device.createTexture({\n      size: { width: 1, height: 1 },\n      format: 'bgra8unorm',\n      usage: GPUTextureUsage.COPY_DST,\n    });\n\n    await t.executeAfterDestroy(() => {\n      t.device.queue.copyExternalImageToTexture(\n        { source: imageBitmap },\n        { texture },\n        { width: 1, height: 1 }\n      );\n    }, awaitLost);\n  });\n"],"mappings":";AAAA;AAAA,GAAA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA,CAAC,CAED,SAASC,aAAa,QAAQ,+CAA+C;AAC7E;AACEC,iBAAiB;AACjBC,eAAe;AACfC,kBAAkB;AAClBC,gBAAgB;AAChBC,gBAAgB;AAChBC,gBAAgB;AAChBC,oBAAoB;AACpBC,yBAAyB;AACzBC,WAAW;AACXC,iBAAiB;AACjBC,qBAAqB;AACrBC,iBAAiB;AACjBC,qBAAqB;AACrBC,sBAAsB;AACtBC,8BAA8B;AAC9BC,gBAAgB;AAChBC,kBAAkB;AACb,gCAAgC;;AAEvC;AACEC,wBAAwB;AACxBC,YAAY;AACZC,eAAe;AACfC,sBAAsB;AACjB,qCAAqC;AAC5C,SAASC,cAAc,QAAQ,0BAA0B;;AAEzD,MAAMC,wBAAwB,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC;;;AAGrD,MAAMC,kBAAkB,SAASF,cAAc,CAAC;EAC9C;AACF;AACA;AACA;AACA;EACE,MAAMG,mBAAmB,CAACC,EAAc,EAAEC,SAAkB,EAAiB;IAC3E,IAAI,CAACC,gBAAgB,CAAC,WAAW,CAAC;;IAElC,IAAI,CAACC,qBAAqB,CAACH,EAAE,EAAE,KAAK,CAAC;IACrC,IAAI,CAACI,MAAM,CAACC,OAAO,EAAE;IACrB,IAAIJ,SAAS,EAAE;MACb,MAAMK,QAAQ,GAAG,MAAM,IAAI,CAACF,MAAM,CAACG,IAAI;MACvC,IAAI,CAACC,MAAM,CAACF,QAAQ,CAACG,MAAM,KAAK,WAAW,CAAC;IAC9C;IACAT,EAAE,EAAE;EACN;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACE,MAAMU,2BAA2B;EAC/BC,KAA6B;EAC7BV,SAAkB;EAClBW,WAAc;EACdZ,EAA2D;EAC5C;IACf,IAAI,CAACE,gBAAgB,CAAC,WAAW,CAAC;;IAElC,QAAQS,KAAK;MACX,KAAK,QAAQ,CAAE;UACb;UACAX,EAAE,CAAC,IAAI,CAACa,aAAa,CAACD,WAAW,CAAC,CAAC,CAACE,cAAc,CAAC,IAAI,CAAC;UACxD;UACA,MAAMC,OAAO,GAAGf,EAAE,CAAC,IAAI,CAACa,aAAa,CAACD,WAAW,CAAC,CAAC;UACnD,MAAM,IAAI,CAACb,mBAAmB,CAAC,MAAM;YACnCgB,OAAO,CAACC,MAAM,EAAE;UAClB,CAAC,EAAEf,SAAS,CAAC;UACb;QACF;MACA,KAAK,QAAQ,CAAE;UACb;UACAD,EAAE,CAAC,IAAI,CAACa,aAAa,CAACD,WAAW,CAAC,CAAC,CAACK,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC;UACvE;UACA,MAAMC,QAAQ,GAAGlB,EAAE,CAAC,IAAI,CAACa,aAAa,CAACD,WAAW,CAAC,CAAC,CAACE,cAAc,CAAC,IAAI,CAAC;UACzE,MAAM,IAAI,CAACf,mBAAmB,CAAC,MAAM;YACnC,IAAI,CAACoB,KAAK,CAACC,MAAM,CAAC,CAACF,QAAQ,CAAC,CAAC;UAC/B,CAAC,EAAEjB,SAAS,CAAC;UACb;QACF,CAAC;;EAEL;AACF;;AAEA,OAAO,MAAMoB,CAAC,GAAG/C,aAAa,CAACwB,kBAAkB,CAAC;;AAElDuB,CAAC,CAACC,IAAI,CAAC,cAAc,CAAC;AACnBC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,WAAW,EAAEhD,gBAAgB,CAAC;AACtCiD,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE9C,gBAAgB,CAAC;AACtC8C,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnCE,MAAM,CAAC,CAAC,EAAEC,SAAS,EAAEC,SAAS,CAAC,CAAC,KAAK;EACpC,IAAID,SAAS,KAAK,UAAU,IAAIA,SAAS,KAAK,UAAU,EAAE;IACxD,OAAO,KAAK;EACd;EACA,IAAIA,SAAS,KAAK,UAAU,EAAE;IAC5B,OAAOC,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,UAAU;EAC9D;EACA,IAAID,SAAS,KAAK,WAAW,EAAE;IAC7B,OAAOC,SAAS,KAAK,WAAW,IAAIA,SAAS,KAAK,UAAU;EAC9D;EACA,OAAO,IAAI;AACb,CAAC,CAAC;AACDJ,OAAO,CAAC,kBAAkB,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAC9C;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAE4B,SAAS,EAAEC,SAAS,EAAEE,gBAAgB,CAAC,CAAC,GAAGD,CAAC,CAACP,MAAM;EACtE,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;MACpBC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAExD,gBAAgB,CAACkD,SAAS,CAAC,GAAGhD,oBAAoB,CAACiD,SAAS,CAAC;MACpEE;IACF,CAAC,CAAC;EACJ,CAAC,EAAE/B,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,sCAAsC,CAAC;AAC3CC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAEtC,sBAAsB,CAAC;AACzCuC,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE1C,iBAAiB,CAAC;AACvC0C,OAAO,CAAC,WAAW,EAAExC,iBAAiB,CAAC;AACvCwC,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnCE,MAAM,CAAC,CAAC,EAAEQ,MAAM,EAAEP,SAAS,CAAC,CAAC,KAAK;EACjC,MAAMQ,IAAI,GAAG9C,kBAAkB,CAAC6C,MAAM,CAAC;EACvC,OAAO;EACJ,CAACC,IAAI,CAACC,UAAU,IAAIT,SAAS,KAAK,QAAQ;EAC1C,CAACQ,IAAI,CAACE,OAAO,IAAIV,SAAS,KAAK,SAAU,CAC3C;;AACH,CAAC,CAAC,CACL;;AACA7B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEmC,MAAM,EAAEP,SAAS,EAAEC,SAAS,CAAC,CAAC,GAAGC,CAAC,CAACP,MAAM;EAC5D,MAAM,EAAEgB,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC9D,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MACrBR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAElD,qBAAqB,CAAC4C,SAAS,CAAC,GAAG1C,qBAAqB,CAAC2C,SAAS,CAAC;MAC1EM;IACF,CAAC,CAAC;EACJ,CAAC,EAAEnC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,oCAAoC,CAAC;AACzCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAE5C,yBAAyB,CAAC;AAC5C6C,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE1C,iBAAiB,CAAC;AACvC0C,OAAO,CAAC,WAAW,EAAExC,iBAAiB,CAAC;AACvCwC,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnCE,MAAM,CAAC,CAAC,EAAEQ,MAAM,EAAEP,SAAS,CAAC,CAAC,KAAK;EACjC,MAAMQ,IAAI,GAAG9C,kBAAkB,CAAC6C,MAAM,CAAC;EACvC,OAAO;EACJ,CAACC,IAAI,CAACC,UAAU,IAAIT,SAAS,KAAK,QAAQ;EAC1C,CAACQ,IAAI,CAACE,OAAO,IAAIV,SAAS,KAAK,SAAU,CAC3C;;AACH,CAAC,CAAC,CACL;;AACAgB,iBAAiB,CAAC,CAAAd,CAAC,KAAI;EACtB,MAAM,EAAEK,MAAM,CAAC,CAAC,GAAGL,CAAC,CAACP,MAAM;EAC3BO,CAAC,CAACe,0BAA0B,CAACvD,kBAAkB,CAAC6C,MAAM,CAAC,CAACW,OAAO,CAAC;AAClE,CAAC,CAAC;AACD/C,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEmC,MAAM,EAAEP,SAAS,EAAEC,SAAS,CAAC,CAAC,GAAGC,CAAC,CAACP,MAAM;EAC5D,MAAM,EAAEgB,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC9D,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MACrBR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAElD,qBAAqB,CAAC4C,SAAS,CAAC,GAAG1C,qBAAqB,CAAC2C,SAAS,CAAC;MAC1EM;IACF,CAAC,CAAC;EACJ,CAAC,EAAEnC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,mCAAmC,CAAC;AACxCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAEtC,sBAAsB,CAAC;AACzCuC,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE1C,iBAAiB,CAAC;AACvC0C,OAAO,CAAC,WAAW,EAAExC,iBAAiB,CAAC;AACvCwC,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnCE,MAAM,CAAC,CAAC,EAAEQ,MAAM,EAAEP,SAAS,CAAC,CAAC,KAAK;EACjC,MAAMQ,IAAI,GAAG9C,kBAAkB,CAAC6C,MAAM,CAAC;EACvC,OAAO;EACJ,CAACC,IAAI,CAACC,UAAU,IAAIT,SAAS,KAAK,QAAQ;EAC1C,CAACQ,IAAI,CAACE,OAAO,IAAIV,SAAS,KAAK,SAAU,CAC3C;;AACH,CAAC,CAAC,CACL;;AACA7B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEmC,MAAM,EAAEP,SAAS,EAAEC,SAAS,CAAC,CAAC,GAAGC,CAAC,CAACP,MAAM;EAC5D,MAAM,EAAEgB,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC9D,MAAMY,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;IAChDN,KAAK,EAAElD,qBAAqB,CAAC4C,SAAS,CAAC,GAAG1C,qBAAqB,CAAC2C,SAAS,CAAC;IAC1EM;EACF,CAAC,CAAC;EACF,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCiD,OAAO,CAACC,UAAU,CAAC,EAAEb,MAAM,CAAC,CAAC,CAAC;EAChC,CAAC,EAAEnC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,iCAAiC,CAAC;AACtCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAE5C,yBAAyB,CAAC;AAC5C6C,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE1C,iBAAiB,CAAC;AACvC0C,OAAO,CAAC,WAAW,EAAExC,iBAAiB,CAAC;AACvCwC,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;AACnCE,MAAM,CAAC,CAAC,EAAEQ,MAAM,EAAEP,SAAS,CAAC,CAAC,KAAK;EACjC,MAAMQ,IAAI,GAAG9C,kBAAkB,CAAC6C,MAAM,CAAC;EACvC,OAAO;EACJ,CAACC,IAAI,CAACC,UAAU,IAAIT,SAAS,KAAK,QAAQ;EAC1C,CAACQ,IAAI,CAACE,OAAO,IAAIV,SAAS,KAAK,SAAU,CAC3C;;AACH,CAAC,CAAC,CACL;;AACAgB,iBAAiB,CAAC,CAAAd,CAAC,KAAI;EACtB,MAAM,EAAEK,MAAM,CAAC,CAAC,GAAGL,CAAC,CAACP,MAAM;EAC3BO,CAAC,CAACe,0BAA0B,CAACvD,kBAAkB,CAAC6C,MAAM,CAAC,CAACW,OAAO,CAAC;AAClE,CAAC,CAAC;AACD/C,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEmC,MAAM,EAAEP,SAAS,EAAEC,SAAS,CAAC,CAAC,GAAGC,CAAC,CAACP,MAAM;EAC5D,MAAM,EAAEgB,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC9D,MAAMY,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;IAChDN,KAAK,EAAElD,qBAAqB,CAAC4C,SAAS,CAAC,GAAG1C,qBAAqB,CAAC2C,SAAS,CAAC;IAC1EM;EACF,CAAC,CAAC;EACF,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCiD,OAAO,CAACC,UAAU,CAAC,EAAEb,MAAM,CAAC,CAAC,CAAC;EAChC,CAAC,EAAEnC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,eAAe,CAAC;AACpBC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAClE1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC9B,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC8C,aAAa,EAAE;EAC1B,CAAC,EAAEjD,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,uBAAuB,CAAC;AAC5BC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,OAAO,EAAEnD,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAACoD,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEkD,KAAK,CAAC,CAAC,GAAGpB,CAAC,CAACP,MAAM;EACrC,MAAM4B,UAAU,GAAG5E,eAAe,CAAC2E,KAAK,CAAC,CAACE,WAAW;EACrD,MAAMtB,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACkD,qBAAqB,CAAC;MAC7BC,OAAO,EAAE,CAAC,EAAEC,OAAO,EAAE,CAAC,EAAEJ,UAAU,EAAE,GAAGD,KAAK,CAAC,CAAC;IAChD,CAAC,CAAC;EACJ,CAAC,EAAElD,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,iBAAiB,CAAC;AACtBC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA,GAAG,CACA;;AACAA,IAAI,CAAE,wEAAuE,CAAC;AAC9EC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,cAAc,EAAEjD,kBAAkB,CAAC;AAC3CiD,OAAO,CAAC,OAAO,EAAEnD,iBAAiB,CAAC,KAAK,CAAC,CAAC;AAC1CqD,MAAM,CAAC,CAAC,EAAE6B,YAAY,EAAEN,KAAK,CAAC,CAAC,KAAK;EACnC,MAAMd,IAAI,GAAG7D,eAAe,CAAC2E,KAAK,CAAC;EACnC,QAAQd,IAAI,CAACqB,QAAQ;IACnB;IACA,KAAK,UAAU;MACb,OAAOD,YAAY,KAAK,UAAU,IAAIA,YAAY,KAAK,aAAa;IACtE;IACA,KAAK,aAAa;MAChB,OAAOA,YAAY,KAAK,aAAa;IACvC;MACE,OAAOpB,IAAI,CAACqB,QAAQ,KAAKD,YAAY,CAAC;;AAE5C,CAAC,CAAC;AACD9B,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACvC;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEwD,YAAY,EAAEN,KAAK,CAAC,CAAC,GAAGpB,CAAC,CAACP,MAAM;EACnD,MAAM4B,UAAU,GAAG5E,eAAe,CAAC2E,KAAK,CAAC,CAACE,WAAW;EACrD,MAAMM,MAAM,GAAG5B,CAAC,CAAC3B,MAAM,CAACkD,qBAAqB,CAAC;IAC5CC,OAAO,EAAE,CAAC,EAAEC,OAAO,EAAE,CAAC,EAAEJ,UAAU,EAAE,GAAGD,KAAK,CAAC,CAAC;EAChD,CAAC,CAAC;EACF,MAAMO,QAAQ,GAAG3B,CAAC,CAAC6B,kBAAkB,CAACH,YAAY,CAAC;EACnD,MAAM1B,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACyD,eAAe,CAAC,EAAEF,MAAM,EAAEJ,OAAO,EAAE,CAAC,EAAEC,OAAO,EAAE,CAAC,EAAEE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3E,CAAC,EAAEzD,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,sBAAsB,CAAC;AAC3BC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,OAAO,EAAEnD,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAACoD,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEkD,KAAK,CAAC,CAAC,GAAGpB,CAAC,CAACP,MAAM;EACrC,MAAM4B,UAAU,GAAG5E,eAAe,CAAC2E,KAAK,CAAC,CAACE,WAAW;EACrD,MAAMS,eAAe,GAAG/B,CAAC,CAAC3B,MAAM,CAACkD,qBAAqB,CAAC;IACrDC,OAAO,EAAE,CAAC,EAAEC,OAAO,EAAE,CAAC,EAAEJ,UAAU,EAAE,GAAGD,KAAK,CAAC,CAAC;EAChD,CAAC,CAAC;EACF,MAAMpB,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC2D,oBAAoB,CAAC;MAC5BC,gBAAgB,EAAE,CAACF,eAAe;IACpC,CAAC,CAAC;EACJ,CAAC,EAAE7D,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,oBAAoB,CAAC;AACzBC,IAAI;AACF;AACL;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,OAAO,EAAEpC,gBAAgB,CAAC,CAACqC,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACzF;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEU,KAAK,CAAC,CAAC,GAAGoB,CAAC,CAACP,MAAM;EACrC,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAACxD,KAAK,CAAC,CAAC,CAAC,CAAC;EACnE,CAAC,EAAEV,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,uBAAuB,CAAC;AAC5BC,IAAI;AACF;AACL;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAClE1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC9B,MAAM4C,OAAO,GAAGrC,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;EACrF,MAAMpC,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACiE,qBAAqB,CAAC;MAC7BV,MAAM,EAAE,MAAM;MACdW,OAAO,EAAE,EAAEC,MAAM,EAAEH,OAAO,EAAEI,UAAU,EAAE,MAAM,CAAC;IACjD,CAAC,CAAC;EACJ,CAAC,EAAEvE,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,sBAAsB,CAAC;AAC3BC,IAAI;AACF;AACL;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAClE1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC9B,MAAMiD,OAAO,GAAG1C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpF,MAAMO,OAAO,GAAG3C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;EACtF,MAAMpC,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACuE,oBAAoB,CAAC;MAC5BhB,MAAM,EAAE,MAAM;MACdiB,MAAM,EAAE,EAAEL,MAAM,EAAEE,OAAO,EAAED,UAAU,EAAE,MAAM,CAAC,CAAC;MAC/CK,QAAQ,EAAE;QACRN,MAAM,EAAEG,OAAO;QACfF,UAAU,EAAE,MAAM;QAClBM,OAAO,EAAE,CAAC,EAAE1C,MAAM,EAAE,YAAY,EAAE2C,SAAS,EAAE,CAAC,CAAC,CAAC;MAClD;IACF,CAAC,CAAC;EACJ,CAAC,EAAE9E,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,sBAAsB,CAAC;AAC3BC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAClE1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC9B,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC4E,oBAAoB,EAAE;EACjC,CAAC,EAAE/E,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,2BAA2B,CAAC;AAChCC,IAAI;AACF;AACL;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAErC,8BAA8B,CAAC;AACjDsC,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACvC;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEmC,MAAM,CAAC,CAAC,GAAGL,CAAC,CAACP,MAAM;EACtC,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAAC6E,yBAAyB,CAAC,EAAEC,YAAY,EAAE,CAAC9C,MAAM,CAAC,CAAC,CAAC,CAAC;EAChE,CAAC,EAAEnC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,gBAAgB,CAAC;AACrBC,IAAI;AACF;AACL;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACC,OAAO,CAAC,MAAM,EAAE3C,WAAW,CAAC,CAAC4C,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAC/FmB,iBAAiB,CAAC,CAAAd,CAAC,KAAI;EACtB,MAAM,EAAEoD,IAAI,CAAC,CAAC,GAAGpD,CAAC,CAACP,MAAM;EACzBO,CAAC,CAACqD,sCAAsC,CAACD,IAAI,CAAC;AAChD,CAAC,CAAC;AACDnF,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,EAAEkF,IAAI,CAAC,CAAC,GAAGpD,CAAC,CAACP,MAAM;EACpC,MAAMO,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACiF,cAAc,CAAC,EAAEF,IAAI,EAAEG,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;EAC7C,CAAC,EAAErF,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,4BAA4B,CAAC;AACjCC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAM+D,WAAW,GAAG,EAAE;EACtB,MAAMC,GAAG,GAAGzD,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;IAChCC,IAAI,EAAEqD,WAAW;IACjBpD,KAAK,EAAEsD,cAAc,CAACC;EACxB,CAAC,CAAC;EACF,MAAMC,GAAG,GAAG5D,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;IAChCC,IAAI,EAAEqD,WAAW;IACjBpD,KAAK,EAAEsD,cAAc,CAACG;EACxB,CAAC,CAAC;EACF,MAAM7D,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAAC+E,kBAAkB,CAACN,GAAG,EAAE,CAAC,EAAEG,GAAG,EAAE,CAAC,EAAEJ,WAAW,CAAC;IAC7D,OAAOM,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,6BAA6B,CAAC;AAClCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMY,MAAM,GAAG,YAAY;EAC3B,MAAM,EAAE2D,aAAa,EAAEvD,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC7E,MAAMoD,GAAG,GAAG;IACVQ,MAAM,EAAEjE,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;MAC5BC,IAAI,EAAE6D,aAAa;MACnB5D,KAAK,EAAEsD,cAAc,CAACC;IACxB,CAAC;EACH,CAAC;EACD,MAAMC,GAAG,GAAG;IACV3C,OAAO,EAAEjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MAC9BR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAE8D,eAAe,CAACL,QAAQ;MAC/BxD;IACF,CAAC;EACH,CAAC;EACD,MAAM8D,QAAQ,GAAG,EAAEvD,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;EAC3D,MAAMV,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAACoF,mBAAmB,CAACX,GAAG,EAAEG,GAAG,EAAEO,QAAQ,CAAC;IACrD,OAAOL,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,6BAA6B,CAAC;AAClCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMY,MAAM,GAAG,YAAY;EAC3B,MAAM,EAAE2D,aAAa,EAAEvD,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC7E,MAAMoD,GAAG,GAAG;IACVxC,OAAO,EAAEjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MAC9BR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAE8D,eAAe,CAACP,QAAQ;MAC/BtD;IACF,CAAC;EACH,CAAC;EACD,MAAMuD,GAAG,GAAG;IACVK,MAAM,EAAEjE,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;MAC5BC,IAAI,EAAE6D,aAAa;MACnB5D,KAAK,EAAEsD,cAAc,CAACG;IACxB,CAAC;EACH,CAAC;EACD,MAAMM,QAAQ,GAAG,EAAEvD,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;EAC3D,MAAMV,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAACqF,mBAAmB,CAACZ,GAAG,EAAEG,GAAG,EAAEO,QAAQ,CAAC;IACrD,OAAOL,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,8BAA8B,CAAC;AACnCC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMY,MAAM,GAAG,YAAY;EAC3B,MAAM,EAAEI,UAAU,EAAEC,WAAW,CAAC,CAAC,GAAGlD,kBAAkB,CAAC6C,MAAM,CAAC;EAC9D,MAAMoD,GAAG,GAAG;IACVxC,OAAO,EAAEjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MAC9BR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAE8D,eAAe,CAACP,QAAQ;MAC/BtD;IACF,CAAC;EACH,CAAC;EACD,MAAMuD,GAAG,GAAG;IACV3C,OAAO,EAAEjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;MAC9BR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;MAChDN,KAAK,EAAEsD,cAAc,CAACG,QAAQ;MAC9BxD;IACF,CAAC;EACH,CAAC;EACD,MAAM8D,QAAQ,GAAG,EAAEvD,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;EAC3D,MAAMV,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAACsF,oBAAoB,CAACb,GAAG,EAAEG,GAAG,EAAEO,QAAQ,CAAC;IACtD,OAAOL,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,qBAAqB,CAAC;AAC1BC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAM+D,WAAW,GAAG,EAAE;EACtB,MAAMS,MAAM,GAAGjE,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;IACnCC,IAAI,EAAEqD,WAAW;IACjBpD,KAAK,EAAEsD,cAAc,CAACC;EACxB,CAAC,CAAC;EACF,MAAM3D,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAACuF,WAAW,CAACN,MAAM,EAAE,CAAC,EAAET,WAAW,CAAC;IACjD,OAAOM,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,wBAAwB,CAAC;AAC7BC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,MAAM,EAAE3C,WAAW,CAAC;AAC5B4C,aAAa,EAAE;AACfD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC;AAC1C6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACvC;;AACAmB,iBAAiB,CAAC,CAAAd,CAAC,KAAI;EACtB,MAAM,EAAEoD,IAAI,CAAC,CAAC,GAAGpD,CAAC,CAACP,MAAM;;EAEzB;EACA,MAAM+E,UAA0B,GAAG,CAAC,WAAW,CAAC;EAChD,IAAIpB,IAAI,KAAK,WAAW,EAAE;IACxBoB,UAAU,CAACC,IAAI,CAACrB,IAAI,CAAC;EACvB;;EAEApD,CAAC,CAACqD,sCAAsC,CAACmB,UAAU,CAAC;AACtD,CAAC,CAAC;AACDvG,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEoD,IAAI,EAAExE,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC3C,MAAMiF,QAAQ,GAAG1E,CAAC,CAAC3B,MAAM,CAACiF,cAAc,CAAC,EAAEF,IAAI,EAAEG,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;EAC5D,MAAMvD,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAAC2F,cAAc,CAACD,QAAQ,EAAE,CAAC,CAAC;IACzC,OAAOZ,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;AAC9BC,IAAI;AACF;AACL;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMmF,WAAW,GAAG,CAAC;EACrB,MAAMF,QAAQ,GAAG1E,CAAC,CAAC6E,uBAAuB,CAAC,OAAO,CAAC;EACnD,MAAMC,WAAW,GAAG9E,CAAC,CAAC+E,qBAAqB,CAAC,OAAO,EAAE;IACnD5E,IAAI,EAAEyE,WAAW,GAAG,CAAC;IACrBxE,KAAK,EAAEsD,cAAc,CAACsB;EACxB,CAAC,CAAC;EACF,MAAMhF,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,UAAU,EAAE,CAAA4F,KAAK,KAAI;IACzEA,KAAK,CAAC9E,OAAO,CAACiG,eAAe,CAACP,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAEI,WAAW,EAAE,CAAC,CAAC;IAC7D,OAAOhB,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,8BAA8B,CAAC;AACnCC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAM4C,OAAO,GAAGrC,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;EACrF,MAAM8C,QAAQ,GAAGlF,CAAC,CAAC3B,MAAM,CAACiE,qBAAqB,CAAC;IAC9CV,MAAM,EAAE,MAAM;IACdW,OAAO,EAAE,EAAEC,MAAM,EAAEH,OAAO,EAAEI,UAAU,EAAE,MAAM,CAAC;EACjD,CAAC,CAAC;EACF,MAAMzC,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,cAAc,EAAE,CAAA4F,KAAK,KAAI;IAC7EA,KAAK,CAAC9E,OAAO,CAACmG,WAAW,CAACD,QAAQ,CAAC;IACnCpB,KAAK,CAAC9E,OAAO,CAACoG,kBAAkB,CAAC,CAAC,CAAC;IACnC,OAAOtB,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;AAC9BC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMiD,OAAO,GAAG1C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpF,MAAMO,OAAO,GAAG3C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;EACtF,MAAM8C,QAAQ,GAAGlF,CAAC,CAAC3B,MAAM,CAACuE,oBAAoB,CAAC;IAC7ChB,MAAM,EAAE,MAAM;IACdiB,MAAM,EAAE,EAAEL,MAAM,EAAEE,OAAO,EAAED,UAAU,EAAE,MAAM,CAAC,CAAC;IAC/CK,QAAQ,EAAE;MACRN,MAAM,EAAEG,OAAO;MACfF,UAAU,EAAE,MAAM;MAClBM,OAAO,EAAE,CAAC,EAAE1C,MAAM,EAAE,YAAY,EAAE2C,SAAS,EAAE,CAAC,CAAC,CAAC;IAClD;EACF,CAAC,CAAC;EACF,MAAMhD,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,aAAa,EAAE,CAAA4F,KAAK,KAAI;IAC5EA,KAAK,CAAC9E,OAAO,CAACmG,WAAW,CAACD,QAAQ,CAAC;IACnCpB,KAAK,CAAC9E,OAAO,CAACqG,IAAI,CAAC,CAAC,CAAC;IACrB,OAAOvB,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,iCAAiC,CAAC;AACtCC,IAAI;AACF;AACL;AACA;AACA;AACA;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,OAAO,EAAE7B,wBAAwB,CAAC,CAAC6B,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACjG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEpB,KAAK,EAAEV,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACrC,MAAMiD,OAAO,GAAG1C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpF,MAAMO,OAAO,GAAG3C,CAAC,CAAC3B,MAAM,CAAC6D,kBAAkB,CAAC,EAAEC,IAAI,EAAEnC,CAAC,CAACoC,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;EACtF,MAAM8C,QAAQ,GAAGlF,CAAC,CAAC3B,MAAM,CAACuE,oBAAoB,CAAC;IAC7ChB,MAAM,EAAE,MAAM;IACdiB,MAAM,EAAE,EAAEL,MAAM,EAAEE,OAAO,EAAED,UAAU,EAAE,MAAM,CAAC,CAAC;IAC/CK,QAAQ,EAAE;MACRN,MAAM,EAAEG,OAAO;MACfF,UAAU,EAAE,MAAM;MAClBM,OAAO,EAAE,CAAC,EAAE1C,MAAM,EAAE,YAAY,EAAE2C,SAAS,EAAE,CAAC,CAAC,CAAC;IAClD;EACF,CAAC,CAAC;EACF,MAAMhD,CAAC,CAACrB,2BAA2B,CAACC,KAAK,EAAEV,SAAS,EAAE,eAAe,EAAE,CAAA4F,KAAK,KAAI;IAC9EA,KAAK,CAAC9E,OAAO,CAACmG,WAAW,CAACD,QAAQ,CAAC;IACnCpB,KAAK,CAAC9E,OAAO,CAACqG,IAAI,CAAC,CAAC,CAAC;IACrB,OAAOvB,KAAK;EACd,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEJxE,CAAC,CAACC,IAAI,CAAC,mBAAmB,CAAC;AACxBC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAACC,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACzF;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEsF,WAAW,EAAEpH,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC3C,MAAMwE,MAAM,GAAGjE,CAAC,CAAC3B,MAAM,CAAC6B,YAAY,CAAC;IACnCC,IAAI,EAAEmF,WAAW;IACjBlF,KAAK,EAAEsD,cAAc,CAACG;EACxB,CAAC,CAAC;EACF,MAAM0B,IAAI,GAAG,IAAIC,UAAU,CAACF,WAAW,CAAC;EACxC,MAAMtF,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACe,KAAK,CAACqG,WAAW,CAACxB,MAAM,EAAE,CAAC,EAAEsB,IAAI,CAAC;EAC7C,CAAC,EAAErH,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,2CAA2C,CAAC;AAChDC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC,CAACC,OAAO,CAAC,QAAQ,EAAEtC,sBAAsB,CAAC,CAACuC,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAChG;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEK,MAAM,EAAEnC,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACtC,MAAM,EAAEgB,UAAU,EAAEC,WAAW,EAAEsD,aAAa,CAAC,CAAC,GAAGxG,kBAAkB,CAAC6C,MAAM,CAAC;EAC7E,MAAMkF,IAAI,GAAG,IAAIC,UAAU,CAACxB,aAAa,CAAC;EAC1C,MAAM/C,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;IAChDN,KAAK,EAAE8D,eAAe,CAACL,QAAQ;IAC/BxD;EACF,CAAC,CAAC;EACF,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACe,KAAK,CAACsG,YAAY;IACzB,EAAEzE,OAAO,CAAC,CAAC;IACXsE,IAAI;IACJ,CAAC,CAAC;IACF,EAAE3E,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC,CAC3C;;EACH,CAAC,EAAExC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,yCAAyC,CAAC;AAC9CC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,QAAQ,EAAE5C,yBAAyB,CAAC;AAC5C6C,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACvC;;AACAmB,iBAAiB,CAAC,CAAAd,CAAC,KAAI;EACtB,MAAM,EAAEK,MAAM,CAAC,CAAC,GAAGL,CAAC,CAACP,MAAM;EAC3BO,CAAC,CAACe,0BAA0B,CAACvD,kBAAkB,CAAC6C,MAAM,CAAC,CAACW,OAAO,CAAC;AAClE,CAAC,CAAC;AACD/C,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAEK,MAAM,EAAEnC,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACtC,MAAM,EAAEgB,UAAU,EAAEC,WAAW,EAAEsD,aAAa,CAAC,CAAC,GAAGxG,kBAAkB,CAAC6C,MAAM,CAAC;EAC7E,MAAMkF,IAAI,GAAG,IAAIC,UAAU,CAACxB,aAAa,CAAC;EAC1C,MAAM/C,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC;IAChDN,KAAK,EAAE8D,eAAe,CAACL,QAAQ;IAC/BxD;EACF,CAAC,CAAC;EACF,MAAML,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACe,KAAK,CAACsG,YAAY;IACzB,EAAEzE,OAAO,CAAC,CAAC;IACXsE,IAAI;IACJ,CAAC,CAAC;IACF,EAAE3E,KAAK,EAAEH,UAAU,EAAEI,MAAM,EAAEH,WAAW,CAAC,CAAC,CAC3C;;EACH,CAAC,EAAExC,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,yCAAyC,CAAC;AAC9CC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC;AACPA,CAAC;AACEC,OAAO,CAAC,YAAY,EAAEhC,eAAe,CAAC;AACtCgC,OAAO,CAAC,aAAa,EAAE/B,sBAAsB,CAAC;AAC9CiC,MAAM,CAAC,CAAC,EAAE8F,WAAW,CAAC,CAAC,KAAK;EAC3B,OAAOlI,wBAAwB,CAACkI,WAAW,CAAC;AAC9C,CAAC,CAAC;AACD/F,aAAa,EAAE;AACfD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CACvC;;AACA1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE4F,UAAU,EAAED,WAAW,EAAEzH,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EACvD,MAAMoG,MAAM,GAAGnI,YAAY,CAACsC,CAAC,EAAE4F,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC;EAChD,MAAM3E,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAE,CAAC,EAAEC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC7BR,MAAM,EAAE,YAAY;IACpBD,KAAK,EAAE8D,eAAe,CAACL;EACzB,CAAC,CAAC;;EAEF,MAAMiC,GAAG,GAAKD,MAAM,CAAmCE,UAAU,CAACJ,WAAW,CAAC;EAC9E,IAAIG,GAAG,KAAK,IAAI,EAAE;IAChB9F,CAAC,CAACgG,IAAI,CAAC,0CAA0C,CAAC;IAClD;EACF;EACAhG,CAAC,CAACiG,kBAAkB,CAACH,GAAG,CAAC;;EAEzB,MAAM9F,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACe,KAAK,CAAC8G,0BAA0B;IACvC,EAAEC,MAAM,EAAEN,MAAM,CAAC,CAAC;IAClB,EAAE5E,OAAO,CAAC,CAAC;IACX,EAAEL,KAAK,EAAE,CAAC,EAAEC,MAAM,EAAE,CAAC,CAAC,CAAC,CACxB;;EACH,CAAC,EAAE3C,SAAS,CAAC;AACf,CAAC,CAAC;;AAEJoB,CAAC,CAACC,IAAI,CAAC,8CAA8C,CAAC;AACnDC,IAAI;AACF;AACL;AACA,GAAG,CACA;;AACAC,MAAM,CAAC,CAAAC,CAAC,KAAIA,CAAC,CAACE,aAAa,EAAE,CAACD,OAAO,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AAClE1B,EAAE,CAAC,OAAM+B,CAAC,KAAI;EACb,MAAM,EAAE9B,SAAS,CAAC,CAAC,GAAG8B,CAAC,CAACP,MAAM;EAC9B,IAAI,OAAO2G,iBAAiB,KAAK,WAAW,EAAE;IAC5CpG,CAAC,CAACgG,IAAI,CAAC,yCAAyC,CAAC;EACnD;EACA,MAAMK,WAAW,GAAG,MAAMD,iBAAiB,CAAC,IAAIE,SAAS,CAAC,IAAIC,iBAAiB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;;EAE1F,MAAMtF,OAAO,GAAGjB,CAAC,CAAC3B,MAAM,CAACsC,aAAa,CAAC;IACrCR,IAAI,EAAE,EAAES,KAAK,EAAE,CAAC,EAAEC,MAAM,EAAE,CAAC,CAAC,CAAC;IAC7BR,MAAM,EAAE,YAAY;IACpBD,KAAK,EAAE8D,eAAe,CAACL;EACzB,CAAC,CAAC;;EAEF,MAAM7D,CAAC,CAAChC,mBAAmB,CAAC,MAAM;IAChCgC,CAAC,CAAC3B,MAAM,CAACe,KAAK,CAAC8G,0BAA0B;IACvC,EAAEC,MAAM,EAAEE,WAAW,CAAC,CAAC;IACvB,EAAEpF,OAAO,CAAC,CAAC;IACX,EAAEL,KAAK,EAAE,CAAC,EAAEC,MAAM,EAAE,CAAC,CAAC,CAAC,CACxB;;EACH,CAAC,EAAE3C,SAAS,CAAC;AACf,CAAC,CAAC"}