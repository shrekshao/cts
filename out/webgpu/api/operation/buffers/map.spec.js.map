{"version":3,"sources":["../../../../../src/webgpu/api/operation/buffers/map.spec.ts"],"names":["description","makeTestGroup","assert","memcpy","checkElementsEqual","MappingTest","g","kSubcases","size","range","undefined","reifyMapRange","bufferSize","offset","mapRegionBoundModes","getRegionForMap","mapAsyncRegionLeft","mapAsyncRegionRight","regionLeft","regionRight","test","desc","params","u","combine","beginSubcases","combineWithParams","fn","t","rangeOffset","rangeSize","buffer","device","createBuffer","usage","GPUBufferUsage","COPY_SRC","MAP_WRITE","mapRegion","mapAsync","GPUMapMode","WRITE","arrayBuffer","getMappedRange","checkMapWrite","range1","range2","mappedAtCreation","rangeOffset1","rangeSize1","rangeOffset2","rangeSize2","init","byteLength","expectedBuffer","ArrayBuffer","expected","Uint32Array","BYTES_PER_ELEMENT","data","i","length","unmap","init2","expected2","data2","expectGPUBufferValuesEqual","COPY_DST","MAP_READ","READ","actual","Uint8Array","expectOK","expectedArrayBuffer","uint8Expected","int8Expected","Int8Array","uint16Expected","Uint16Array","int16Expected","Int16Array","uint32Expected","int32Expected","Int32Array","float32Expected","Float32Array","float64Expected","Float64Array","Number","MAX_VALUE","MIN_VALUE","src","dst","mappedArrayBuffer","mappable"],"mappings":";AAAA;AACA,GADA,OAAO,MAAMA,WAAW,GAAI;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZO,CAcP,SAASC,aAAT,QAA8B,4CAA9B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAA+B,iCAA/B;AACA,SAASC,kBAAT,QAAmC,iCAAnC;;AAEA,SAASC,WAAT,QAA4B,mBAA5B;;AAEA,OAAO,MAAMC,CAAC,GAAGL,aAAa,CAACI,WAAD,CAAvB;;AAEP,MAAME,SAAS,GAAG;AAChB,EAAEC,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,EAAlB,EADgB;AAEhB,EAAED,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,CAACC,SAAD,CAAlB,EAFgB;AAGhB,EAAEF,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,CAACC,SAAD,EAAYA,SAAZ,CAAlB,EAHgB;AAIhB,EAAEF,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,CAAC,CAAD,CAAlB,EAJgB;AAKhB,EAAED,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,CAAC,CAAD,EAAIC,SAAJ,CAAlB,EALgB;AAMhB,EAAEF,IAAI,EAAE,CAAR,EAAWC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAlB,EANgB;AAOhB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,EAAnB,EAPgB;AAQhB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAACC,SAAD,CAAnB,EARgB;AAShB,EAAEF,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAACC,SAAD,EAAYA,SAAZ,CAAnB,EATgB;AAUhB,EAAEF,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,CAAnB,EAVgB;AAWhB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAIC,SAAJ,CAAnB,EAXgB;AAYhB,EAAEF,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAnB,EAZgB;AAahB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAnB,EAbgB;AAchB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,CAAnB,EAdgB;AAehB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAIC,SAAJ,CAAnB,EAfgB;AAgBhB,EAAEF,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAnB,EAhBgB;AAiBhB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAnB,EAjBgB;AAkBhB,EAAED,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAnB,EAlBgB;AAmBhB,EAAED,IAAI,EAAE,MAAM,IAAd,EAAoBC,KAAK,EAAE,EAA3B,EAnBgB,CAAlB;;;AAsBA,SAASE,aAAT,CAAuBC,UAAvB,EAA2CH,KAA3C,EAAiG;AAC/F,QAAMI,MAAM,GAAGJ,KAAK,CAAC,CAAD,CAAL,IAAY,CAA3B;AACA,SAAO,CAACI,MAAD,EAASJ,KAAK,CAAC,CAAD,CAAL,IAAYG,UAAU,GAAGC,MAAlC,CAAP;AACD;;AAED,MAAMC,mBAAmB,GAAG,CAAC,gBAAD,EAAmB,iBAAnB,EAAsC,SAAtC,CAA5B;;;AAGA,SAASC,eAAT;AACEH,UADF;AAEEH,KAFF;AAGE;AACEO,EAAAA,kBADF;AAEEC,EAAAA,mBAFF,EAHF;;;;;AAUE;AACA,QAAMC,UAAU,GAAGF,kBAAkB,KAAK,SAAvB,GAAmCP,KAAK,CAAC,CAAD,CAAxC,GAA8C,CAAjE;AACA,QAAMU,WAAW,GAAGF,mBAAmB,KAAK,SAAxB,GAAoCR,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAApD,GAA0DG,UAA9E;AACA,SAAO;AACLI,EAAAA,kBAAkB,KAAK,gBAAvB,GAA0CN,SAA1C,GAAsDQ,UADjD;AAELD,EAAAA,mBAAmB,KAAK,gBAAxB,GAA2CP,SAA3C,GAAuDS,WAAW,GAAGD,UAFhE,CAAP;;AAID;;AAEDZ,CAAC,CAACc,IAAF,CAAO,gBAAP;AACGC,IADH;AAEK;AACL,gFAHA;;AAKGC,MALH,CAKU,CAAAC,CAAC;AACPA,CAAC;AACEC,OADH,CACW,oBADX,EACiCV,mBADjC;AAEGU,OAFH,CAEW,qBAFX,EAEkCV,mBAFlC;AAGGW,aAHH;AAIGC,iBAJH,CAIqBnB,SAJrB,CANJ;;AAYGoB,EAZH,CAYM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQC,KAAR,KAAkBmB,CAAC,CAACN,MAA1B;AACA,QAAM,CAACO,WAAD,EAAcC,SAAd,IAA2BnB,aAAa,CAACH,IAAD,EAAOC,KAAP,CAA9C;;AAEA,QAAMsB,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCzB,IAAAA,IADmC;AAEnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE,SAFb,EAAtB,CAAf;;;AAKA,QAAMC,SAAS,GAAGvB,eAAe,CAACP,IAAD,EAAO,CAACqB,WAAD,EAAcC,SAAd,CAAP,EAAiCF,CAAC,CAACN,MAAnC,CAAjC;AACA,QAAMS,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAACC,KAA3B,EAAkC,GAAGH,SAArC,CAAN;AACA,QAAMI,WAAW,GAAGX,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAApB;AACAmB,EAAAA,CAAC,CAACgB,aAAF,CAAgBb,MAAhB,EAAwBF,WAAxB,EAAqCa,WAArC,EAAkDZ,SAAlD;AACD,CAzBH;;AA2BAxB,CAAC,CAACc,IAAF,CAAO,2CAAP;AACGC,IADH;AAEK;AACL;AACA;AACA,sCALA;;AAOGC,MAPH,CAOU,CAAAC,CAAC;AACPA,CAAC;AACEE,aADH;AAEGD,OAFH,CAEW,kBAFX,EAE+B,CAAC,KAAD,EAAQ,IAAR,CAF/B;AAGGE,iBAHH,CAGqB;AACjB,EAAElB,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,EAApB,EAAwBC,MAAM,EAAE,CAAC,CAAD,CAAhC,EADiB;AAEjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,EAApB,EAAwBC,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAhC,EAFiB;AAGjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAApB,EAA4BC,MAAM,EAAE,CAAC,CAAD,CAApC,EAHiB;AAIjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,CAAC,CAAD,CAApB,EAAyBC,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAjC,EAJiB;AAKjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,EAApB,EAAwBC,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAhC,EALiB;AAMjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAApB,EAA6BC,MAAM,EAAE,CAAC,EAAD,EAAK,CAAL,CAArC,EANiB;AAOjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,CAAC,EAAD,EAAK,EAAL,CAApB,EAA8BC,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAtC,EAPiB;AAQjB,EAAEtC,IAAI,EAAE,EAAR,EAAYqC,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAApB,EAA4BC,MAAM,EAAE,CAAC,EAAD,EAAK,CAAL,CAApC,EARiB,CAHrB,CARJ;;;AAsBGnB,EAtBH,CAsBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQqC,MAAR,EAAgBC,MAAhB,EAAwBC,gBAAxB,KAA6CnB,CAAC,CAACN,MAArD;AACA,QAAM,CAAC0B,YAAD,EAAeC,UAAf,IAA6BtC,aAAa,CAACH,IAAD,EAAOqC,MAAP,CAAhD;AACA,QAAM,CAACK,YAAD,EAAeC,UAAf,IAA6BxC,aAAa,CAACH,IAAD,EAAOsC,MAAP,CAAhD;;AAEA,QAAMf,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCc,IAAAA,gBADmC;AAEnCvC,IAAAA,IAFmC;AAGnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE,SAHb,EAAtB,CAAf;;;AAMA;AACA,MAAI,CAACU,gBAAL,EAAuB;AACrB,UAAMhB,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAACC,KAA3B,CAAN;AACD;;AAED;AACA,QAAMW,IAAI,GAAGrB,MAAM,CAACY,cAAP,CAAsB,GAAGE,MAAzB,CAAb;;AAEA3C,EAAAA,MAAM,CAACkD,IAAI,CAACC,UAAL,KAAoBJ,UAArB,CAAN;AACA,QAAMK,cAAc,GAAG,IAAIC,WAAJ,CAAgB/C,IAAhB,CAAvB;AACA,QAAMgD,QAAQ,GAAG,IAAIC,WAAJ;AACfH,EAAAA,cADe;AAEfN,EAAAA,YAFe;AAGfC,EAAAA,UAAU,GAAGQ,WAAW,CAACC,iBAHV,CAAjB;;AAKA,QAAMC,IAAI,GAAG,IAAIF,WAAJ,CAAgBL,IAAhB,CAAb;AACA,OAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpCD,IAAAA,IAAI,CAACC,CAAD,CAAJ,GAAUJ,QAAQ,CAACI,CAAD,CAAR,GAAcA,CAAC,GAAG,CAA5B;AACD;AACD7B,EAAAA,MAAM,CAAC+B,KAAP;;AAEA;AACA,QAAM/B,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAACC,KAA3B,EAAkC,GAAGK,MAArC,CAAN;AACA,QAAMiB,KAAK,GAAGhC,MAAM,CAACY,cAAP,CAAsB,GAAGG,MAAzB,CAAd;;AAEA5C,EAAAA,MAAM,CAAC6D,KAAK,CAACV,UAAN,KAAqBF,UAAtB,CAAN;AACA,QAAMa,SAAS,GAAG,IAAIP,WAAJ;AAChBH,EAAAA,cADgB;AAEhBJ,EAAAA,YAFgB;AAGhBC,EAAAA,UAAU,GAAGM,WAAW,CAACC,iBAHT,CAAlB;;AAKA,QAAMO,KAAK,GAAG,IAAIR,WAAJ,CAAgBM,KAAhB,CAAd;AACA,OAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGK,KAAK,CAACJ,MAA1B,EAAkC,EAAED,CAApC,EAAuC;AACrCK,IAAAA,KAAK,CAACL,CAAD,CAAL,GAAWI,SAAS,CAACJ,CAAD,CAAT,GAAe,CAA1B;AACD;AACD7B,EAAAA,MAAM,CAAC+B,KAAP;;AAEA;AACAlC,EAAAA,CAAC,CAACsC,0BAAF,CAA6BnC,MAA7B,EAAqCyB,QAArC,EAA+CR,YAA/C;AACD,CAxEH;;AA0EA1C,CAAC,CAACc,IAAF,CAAO,eAAP;AACGC,IADH;AAEK;AACL,yCAHA;;AAKGC,MALH,CAKU,CAAAC,CAAC;AACPA,CAAC;AACEC,OADH,CACW,oBADX,EACiCV,mBADjC;AAEGU,OAFH,CAEW,qBAFX,EAEkCV,mBAFlC;AAGGW,aAHH;AAIGC,iBAJH,CAIqBnB,SAJrB,CANJ;;AAYGoB,EAZH,CAYM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQC,KAAR,KAAkBmB,CAAC,CAACN,MAA1B;AACA,QAAM,CAACO,WAAD,EAAcC,SAAd,IAA2BnB,aAAa,CAACH,IAAD,EAAOC,KAAP,CAA9C;;AAEA,QAAMsB,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCc,IAAAA,gBAAgB,EAAE,IADiB;AAEnCvC,IAAAA,IAFmC;AAGnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACgC,QAAf,GAA0BhC,cAAc,CAACiC,QAHb,EAAtB,CAAf;;AAKA,QAAMhB,IAAI,GAAGrB,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAAb;;AAEAP,EAAAA,MAAM,CAACkD,IAAI,CAACC,UAAL,KAAoBvB,SAArB,CAAN;AACA,QAAM0B,QAAQ,GAAG,IAAIC,WAAJ,CAAgB,IAAIF,WAAJ,CAAgBzB,SAAhB,CAAhB,CAAjB;AACA,QAAM6B,IAAI,GAAG,IAAIF,WAAJ,CAAgBL,IAAhB,CAAb;AACA,OAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpCD,IAAAA,IAAI,CAACC,CAAD,CAAJ,GAAUJ,QAAQ,CAACI,CAAD,CAAR,GAAcA,CAAC,GAAG,CAA5B;AACD;AACD7B,EAAAA,MAAM,CAAC+B,KAAP;;AAEA,QAAMxB,SAAS,GAAGvB,eAAe,CAACP,IAAD,EAAO,CAACqB,WAAD,EAAcC,SAAd,CAAP,EAAiCF,CAAC,CAACN,MAAnC,CAAjC;AACA,QAAMS,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAAC6B,IAA3B,EAAiC,GAAG/B,SAApC,CAAN;AACA,QAAMgC,MAAM,GAAG,IAAIC,UAAJ,CAAexC,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAAf,CAAf;AACAmB,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAACkE,MAAD,EAAS,IAAIC,UAAJ,CAAef,QAAQ,CAACzB,MAAxB,CAAT,CAA7B;AACD,CAnCH;;AAqCAzB,CAAC,CAACc,IAAF,CAAO,gCAAP;AACGC,IADH,CACS,gEADT;AAEGC,MAFH,CAEU,CAAAC,CAAC;AACPA,CAAC;AACEC,OADH,CACW,oBADX,EACiCV,mBADjC;AAEGU,OAFH,CAEW,qBAFX,EAEkCV,mBAFlC;AAGGW,aAHH;AAIGC,iBAJH,CAIqB;AACjB,EAAElB,IAAI,EAAE,EAAR,EAAYC,KAAK,EAAE,EAAnB,EADiB;AAEjB,EAAED,IAAI,EAAE,GAAR,EAAaC,KAAK,EAAE,EAApB,EAFiB;AAGjB,EAAED,IAAI,EAAE,GAAR,EAAaC,KAAK,EAAE,CAAC,CAAD,EAAI,EAAJ,CAApB,EAHiB;AAIjB,EAAED,IAAI,EAAE,GAAR,EAAaC,KAAK,EAAE,CAAC,EAAD,CAApB,EAJiB;AAKjB,EAAED,IAAI,EAAE,GAAR,EAAaC,KAAK,EAAE,CAAC,EAAD,EAAK,GAAL,CAApB,EALiB;AAMjB,EAAED,IAAI,EAAE,GAAR,EAAaC,KAAK,EAAE,CAAC,EAAD,CAApB,EANiB,CAJrB,CAHJ;;;AAgBGkB,EAhBH,CAgBM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQC,KAAR,KAAkBmB,CAAC,CAACN,MAA1B;AACA,QAAM,CAACO,WAAD,EAAcC,SAAd,IAA2BnB,aAAa,CAACH,IAAD,EAAOC,KAAP,CAA9C;;AAEA;AACA,QAAMgE,mBAAmB,GAAG,IAAIlB,WAAJ,CAAgB,EAAhB,CAA5B;AACA,QAAMmB,aAAa,GAAG,IAAIH,UAAJ,CAAeE,mBAAf,EAAoC,CAApC,EAAuC,CAAvC,CAAtB;AACAC,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,CAAnB;AACAA,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,GAAnB;;AAEA,QAAMC,YAAY,GAAG,IAAIC,SAAJ,CAAcH,mBAAd,EAAmC,CAAnC,EAAsC,CAAtC,CAArB;AACAE,EAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,CAAC,CAAnB;AACAA,EAAAA,YAAY,CAAC,CAAD,CAAZ,GAAkB,GAAlB;;AAEA,QAAME,cAAc,GAAG,IAAIC,WAAJ,CAAgBL,mBAAhB,EAAqC,CAArC,EAAwC,CAAxC,CAAvB;AACAI,EAAAA,cAAc,CAAC,CAAD,CAAd,GAAoB,CAApB;AACAA,EAAAA,cAAc,CAAC,CAAD,CAAd,GAAoB,KAApB;;AAEA,QAAME,aAAa,GAAG,IAAIC,UAAJ,CAAeP,mBAAf,EAAoC,CAApC,EAAuC,CAAvC,CAAtB;AACAM,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,CAAC,CAApB;AACAA,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,KAAnB;;AAEA,QAAME,cAAc,GAAG,IAAIxB,WAAJ,CAAgBgB,mBAAhB,EAAqC,EAArC,EAAyC,CAAzC,CAAvB;AACAQ,EAAAA,cAAc,CAAC,CAAD,CAAd,GAAoB,CAApB;AACAA,EAAAA,cAAc,CAAC,CAAD,CAAd,GAAoB,UAApB;;AAEA,QAAMC,aAAa,GAAG,IAAIC,UAAJ,CAAeV,mBAAf,EAAoC,EAApC,EAAwC,CAAxC,CAAtB;AACAS,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,CAAC,CAApB;AACAA,EAAAA,aAAa,CAAC,CAAD,CAAb,GAAmB,UAAnB;;AAEA,QAAME,eAAe,GAAG,IAAIC,YAAJ,CAAiBZ,mBAAjB,EAAsC,EAAtC,EAA0C,CAA1C,CAAxB;AACAW,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,CAArB;AACAA,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,CAAC,CAAtB;AACAA,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,UAArB;;AAEA,QAAME,eAAe,GAAG,IAAIC,YAAJ,CAAiBd,mBAAjB,EAAsC,EAAtC,EAA0C,CAA1C,CAAxB;AACAa,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,CAArB;AACAA,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,CAAC,CAAtB;AACAA,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqB,UAArB;AACAA,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqBE,MAAM,CAACC,SAA5B;AACAH,EAAAA,eAAe,CAAC,CAAD,CAAf,GAAqBE,MAAM,CAACE,SAA5B;;AAEA,QAAM3D,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCc,IAAAA,gBAAgB,EAAE,IADiB;AAEnCvC,IAAAA,IAFmC;AAGnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACgC,QAAf,GAA0BhC,cAAc,CAACiC,QAHb,EAAtB,CAAf;;AAKA,QAAMhB,IAAI,GAAGrB,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAAb;;AAEA;AACAP,EAAAA,MAAM,CAACkD,IAAI,CAACC,UAAL,KAAoBvB,SAArB,CAAN;AACA3B,EAAAA,MAAM,CAAC,EAAEwF,GAAG,EAAElB,mBAAP,EAAD,EAA+B,EAAEmB,GAAG,EAAExC,IAAP,EAA/B,CAAN;AACArB,EAAAA,MAAM,CAAC+B,KAAP;;AAEA,QAAMxB,SAAS,GAAGvB,eAAe,CAACP,IAAD,EAAO,CAACqB,WAAD,EAAcC,SAAd,CAAP,EAAiCF,CAAC,CAACN,MAAnC,CAAjC;AACA,QAAMS,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAAC6B,IAA3B,EAAiC,GAAG/B,SAApC,CAAN;AACA,QAAMuD,iBAAiB,GAAG9D,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAA1B;AACAmB,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAImE,UAAJ,CAAesB,iBAAf,EAAkC,CAAlC,EAAqC,CAArC,CAAD,EAA0CnB,aAA1C,CAA7B;AACA9C,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAIwE,SAAJ,CAAciB,iBAAd,EAAiC,CAAjC,EAAoC,CAApC,CAAD,EAAyClB,YAAzC,CAA7B;AACA/C,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAI0E,WAAJ,CAAgBe,iBAAhB,EAAmC,CAAnC,EAAsC,CAAtC,CAAD,EAA2ChB,cAA3C,CAA7B;AACAjD,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAI4E,UAAJ,CAAea,iBAAf,EAAkC,CAAlC,EAAqC,CAArC,CAAD,EAA0Cd,aAA1C,CAA7B;AACAnD,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAIqD,WAAJ,CAAgBoC,iBAAhB,EAAmC,EAAnC,EAAuC,CAAvC,CAAD,EAA4CZ,cAA5C,CAA7B;AACArD,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAI+E,UAAJ,CAAeU,iBAAf,EAAkC,EAAlC,EAAsC,CAAtC,CAAD,EAA2CX,aAA3C,CAA7B;AACAtD,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAIiF,YAAJ,CAAiBQ,iBAAjB,EAAoC,EAApC,EAAwC,CAAxC,CAAD,EAA6CT,eAA7C,CAA7B;AACAxD,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAAC,IAAImF,YAAJ,CAAiBM,iBAAjB,EAAoC,EAApC,EAAwC,CAAxC,CAAD,EAA6CP,eAA7C,CAA7B;AACD,CAjFH;;AAmFAhF,CAAC,CAACc,IAAF,CAAO,kBAAP;AACGC,IADH;AAEK;AACL;AACA,oGAJA;;AAMGC,MANH,CAMU,CAAAC,CAAC;AACPA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,UADX,EACuB,CAAC,KAAD,EAAQ,IAAR,CADvB;AAEGC,aAFH;AAGGC,iBAHH,CAGqBnB,SAHrB,CAPJ;;AAYGoB,EAZH,CAYM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQC,KAAR,EAAeqF,QAAf,KAA4BlE,CAAC,CAACN,MAApC;AACA,QAAM,GAAGQ,SAAH,IAAgBnB,aAAa,CAACH,IAAD,EAAOC,KAAP,CAAnC;;AAEA,QAAMsB,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCc,IAAAA,gBAAgB,EAAE,IADiB;AAEnCvC,IAAAA,IAFmC;AAGnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,IAA2B0D,QAAQ,GAAG3D,cAAc,CAACE,SAAlB,GAA8B,CAAjE,CAH4B,EAAtB,CAAf;;AAKA,QAAMK,WAAW,GAAGX,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAApB;AACAmB,EAAAA,CAAC,CAACgB,aAAF,CAAgBb,MAAhB,EAAwBtB,KAAK,CAAC,CAAD,CAAL,IAAY,CAApC,EAAuCiC,WAAvC,EAAoDZ,SAApD;AACD,CAvBH;;AAyBAxB,CAAC,CAACc,IAAF,CAAO,oBAAP;AACGC,IADH;AAEK;AACL;AACA,oCAJA;;AAMGC,MANH,CAMU,CAAAC,CAAC;AACPA,CAAC,CAAC;AAAD,CACEC,OADH,CACW,oBADX,EACiCV,mBADjC;AAEGU,OAFH,CAEW,qBAFX,EAEkCV,mBAFlC;AAGGW,aAHH;AAIGD,OAJH,CAIW,kBAJX,EAI+B,CAAC,KAAD,EAAQ,IAAR,CAJ/B;AAKGE,iBALH,CAKqBnB,SALrB,CAPJ;;AAcGoB,EAdH,CAcM,MAAMC,CAAN,IAAW;AACb,QAAM,EAAEpB,IAAF,EAAQC,KAAR,EAAesC,gBAAf,KAAoCnB,CAAC,CAACN,MAA5C;AACA,QAAM,CAACO,WAAD,EAAcC,SAAd,IAA2BnB,aAAa,CAACH,IAAD,EAAOC,KAAP,CAA9C;;AAEA,QAAMsB,MAAM,GAAGH,CAAC,CAACI,MAAF,CAASC,YAAT,CAAsB;AACnCc,IAAAA,gBADmC;AAEnCvC,IAAAA,IAFmC;AAGnC0B,IAAAA,KAAK,EAAEC,cAAc,CAACC,QAAf,GAA0BD,cAAc,CAACE,SAHb,EAAtB,CAAf;;;AAMA;AACA,MAAI,CAACU,gBAAL,EAAuB;AACrB,UAAMhB,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAACC,KAA3B,CAAN;AACD;;AAED;AACA,QAAMW,IAAI,GAAGrB,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAAb;;AAEAP,EAAAA,MAAM,CAACkD,IAAI,CAACC,UAAL,KAAoBvB,SAArB,CAAN;AACA,QAAM0B,QAAQ,GAAG,IAAIC,WAAJ,CAAgB,IAAIF,WAAJ,CAAgBzB,SAAhB,CAAhB,CAAjB;AACA,QAAM6B,IAAI,GAAG,IAAIF,WAAJ,CAAgBL,IAAhB,CAAb;AACA,OAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,IAAI,CAACE,MAAzB,EAAiC,EAAED,CAAnC,EAAsC;AACpCD,IAAAA,IAAI,CAACC,CAAD,CAAJ,GAAUJ,QAAQ,CAACI,CAAD,CAAR,GAAcA,CAAC,GAAG,CAA5B;AACD;AACD7B,EAAAA,MAAM,CAAC+B,KAAP;;AAEA;AACA;AACA,QAAMxB,SAAS,GAAGvB,eAAe,CAACP,IAAD,EAAO,CAACqB,WAAD,EAAcC,SAAd,CAAP,EAAiCF,CAAC,CAACN,MAAnC,CAAjC;AACA,QAAMS,MAAM,CAACQ,QAAP,CAAgBC,UAAU,CAACC,KAA3B,EAAkC,GAAGH,SAArC,CAAN;AACA,QAAMgC,MAAM,GAAG,IAAIC,UAAJ,CAAexC,MAAM,CAACY,cAAP,CAAsB,GAAGlC,KAAzB,CAAf,CAAf;AACAmB,EAAAA,CAAC,CAAC4C,QAAF,CAAWpE,kBAAkB,CAACkE,MAAD,EAAS,IAAIC,UAAJ,CAAef,QAAQ,CAACzB,MAAxB,CAAT,CAA7B;AACD,CA9CH","sourcesContent":["export const description = `\nTest the operation of buffer mapping, specifically the data contents written via\nmap-write/mappedAtCreation, and the contents of buffers returned by getMappedRange on\nbuffers which are mapped-read/mapped-write/mappedAtCreation.\n\nrange: used for getMappedRange\nmapRegion: used for mapAsync\n\nmapRegionBoundModes is used to get mapRegion from range:\n - default-expand: expand mapRegion to buffer bound by setting offset/size to undefined\n - explicit-expand: expand mapRegion to buffer bound by explicitly calculating offset/size\n - minimal: make mapRegion to be the same as range which is the minimal range to make getMappedRange input valid\n`;\n\nimport { makeTestGroup } from '../../../../common/framework/test_group.js';\nimport { assert, memcpy } from '../../../../common/util/util.js';\nimport { checkElementsEqual } from '../../../util/check_contents.js';\n\nimport { MappingTest } from './mapping_test.js';\n\nexport const g = makeTestGroup(MappingTest);\n\nconst kSubcases = [\n  { size: 0, range: [] },\n  { size: 0, range: [undefined] },\n  { size: 0, range: [undefined, undefined] },\n  { size: 0, range: [0] },\n  { size: 0, range: [0, undefined] },\n  { size: 0, range: [0, 0] },\n  { size: 12, range: [] },\n  { size: 12, range: [undefined] },\n  { size: 12, range: [undefined, undefined] },\n  { size: 12, range: [0] },\n  { size: 12, range: [0, undefined] },\n  { size: 12, range: [0, 12] },\n  { size: 12, range: [0, 0] },\n  { size: 12, range: [8] },\n  { size: 12, range: [8, undefined] },\n  { size: 12, range: [8, 4] },\n  { size: 28, range: [8, 8] },\n  { size: 28, range: [8, 12] },\n  { size: 512 * 1024, range: [] },\n] as const;\n\nfunction reifyMapRange(bufferSize: number, range: readonly [number?, number?]): [number, number] {\n  const offset = range[0] ?? 0;\n  return [offset, range[1] ?? bufferSize - offset];\n}\n\nconst mapRegionBoundModes = ['default-expand', 'explicit-expand', 'minimal'] as const;\ntype MapRegionBoundMode = typeof mapRegionBoundModes[number];\n\nfunction getRegionForMap(\n  bufferSize: number,\n  range: [number, number],\n  {\n    mapAsyncRegionLeft,\n    mapAsyncRegionRight,\n  }: {\n    mapAsyncRegionLeft: MapRegionBoundMode;\n    mapAsyncRegionRight: MapRegionBoundMode;\n  }\n) {\n  const regionLeft = mapAsyncRegionLeft === 'minimal' ? range[0] : 0;\n  const regionRight = mapAsyncRegionRight === 'minimal' ? range[0] + range[1] : bufferSize;\n  return [\n    mapAsyncRegionLeft === 'default-expand' ? undefined : regionLeft,\n    mapAsyncRegionRight === 'default-expand' ? undefined : regionRight - regionLeft,\n  ] as const;\n}\n\ng.test('mapAsync,write')\n  .desc(\n    `Use map-write to write to various ranges of variously-sized buffers, then expectContents\n(which does copyBufferToBuffer + map-read) to ensure the contents were written.`\n  )\n  .params(u =>\n    u\n      .combine('mapAsyncRegionLeft', mapRegionBoundModes)\n      .combine('mapAsyncRegionRight', mapRegionBoundModes)\n      .beginSubcases()\n      .combineWithParams(kSubcases)\n  )\n  .fn(async t => {\n    const { size, range } = t.params;\n    const [rangeOffset, rangeSize] = reifyMapRange(size, range);\n\n    const buffer = t.device.createBuffer({\n      size,\n      usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.MAP_WRITE,\n    });\n\n    const mapRegion = getRegionForMap(size, [rangeOffset, rangeSize], t.params);\n    await buffer.mapAsync(GPUMapMode.WRITE, ...mapRegion);\n    const arrayBuffer = buffer.getMappedRange(...range);\n    t.checkMapWrite(buffer, rangeOffset, arrayBuffer, rangeSize);\n  });\n\ng.test('mapAsync,write,unchanged_ranges_preserved')\n  .desc(\n    `Use mappedAtCreation or mapAsync to write to various ranges of variously-sized buffers, then\nuse mapAsync to map a different range and zero it out. Finally use expectGPUBufferValuesEqual\n(which does copyBufferToBuffer + map-read) to verify that contents originally written outside the\nsecond mapped range were not altered.`\n  )\n  .params(u =>\n    u\n      .beginSubcases()\n      .combine('mappedAtCreation', [false, true])\n      .combineWithParams([\n        { size: 12, range1: [], range2: [8] },\n        { size: 12, range1: [], range2: [0, 8] },\n        { size: 12, range1: [0, 8], range2: [8] },\n        { size: 12, range1: [8], range2: [0, 8] },\n        { size: 28, range1: [], range2: [8, 8] },\n        { size: 28, range1: [8, 16], range2: [16, 8] },\n        { size: 32, range1: [16, 12], range2: [8, 16] },\n        { size: 32, range1: [8, 8], range2: [24, 4] },\n      ] as const)\n  )\n  .fn(async t => {\n    const { size, range1, range2, mappedAtCreation } = t.params;\n    const [rangeOffset1, rangeSize1] = reifyMapRange(size, range1);\n    const [rangeOffset2, rangeSize2] = reifyMapRange(size, range2);\n\n    const buffer = t.device.createBuffer({\n      mappedAtCreation,\n      size,\n      usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.MAP_WRITE,\n    });\n\n    // If the buffer is not mappedAtCreation map it now.\n    if (!mappedAtCreation) {\n      await buffer.mapAsync(GPUMapMode.WRITE);\n    }\n\n    // Set the initial contents of the buffer.\n    const init = buffer.getMappedRange(...range1);\n\n    assert(init.byteLength === rangeSize1);\n    const expectedBuffer = new ArrayBuffer(size);\n    const expected = new Uint32Array(\n      expectedBuffer,\n      rangeOffset1,\n      rangeSize1 / Uint32Array.BYTES_PER_ELEMENT\n    );\n    const data = new Uint32Array(init);\n    for (let i = 0; i < data.length; ++i) {\n      data[i] = expected[i] = i + 1;\n    }\n    buffer.unmap();\n\n    // Write to a second range of the buffer\n    await buffer.mapAsync(GPUMapMode.WRITE, ...range2);\n    const init2 = buffer.getMappedRange(...range2);\n\n    assert(init2.byteLength === rangeSize2);\n    const expected2 = new Uint32Array(\n      expectedBuffer,\n      rangeOffset2,\n      rangeSize2 / Uint32Array.BYTES_PER_ELEMENT\n    );\n    const data2 = new Uint32Array(init2);\n    for (let i = 0; i < data2.length; ++i) {\n      data2[i] = expected2[i] = 0;\n    }\n    buffer.unmap();\n\n    // Verify that the range of the buffer which was not overwritten was preserved.\n    t.expectGPUBufferValuesEqual(buffer, expected, rangeOffset1);\n  });\n\ng.test('mapAsync,read')\n  .desc(\n    `Use mappedAtCreation to initialize various ranges of variously-sized buffers, then\nmap-read and check the read-back result.`\n  )\n  .params(u =>\n    u\n      .combine('mapAsyncRegionLeft', mapRegionBoundModes)\n      .combine('mapAsyncRegionRight', mapRegionBoundModes)\n      .beginSubcases()\n      .combineWithParams(kSubcases)\n  )\n  .fn(async t => {\n    const { size, range } = t.params;\n    const [rangeOffset, rangeSize] = reifyMapRange(size, range);\n\n    const buffer = t.device.createBuffer({\n      mappedAtCreation: true,\n      size,\n      usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ,\n    });\n    const init = buffer.getMappedRange(...range);\n\n    assert(init.byteLength === rangeSize);\n    const expected = new Uint32Array(new ArrayBuffer(rangeSize));\n    const data = new Uint32Array(init);\n    for (let i = 0; i < data.length; ++i) {\n      data[i] = expected[i] = i + 1;\n    }\n    buffer.unmap();\n\n    const mapRegion = getRegionForMap(size, [rangeOffset, rangeSize], t.params);\n    await buffer.mapAsync(GPUMapMode.READ, ...mapRegion);\n    const actual = new Uint8Array(buffer.getMappedRange(...range));\n    t.expectOK(checkElementsEqual(actual, new Uint8Array(expected.buffer)));\n  });\n\ng.test('mapAsync,read,typedArrayAccess')\n  .desc(`Use various TypedArray types to read back from a mapped buffer`)\n  .params(u =>\n    u\n      .combine('mapAsyncRegionLeft', mapRegionBoundModes)\n      .combine('mapAsyncRegionRight', mapRegionBoundModes)\n      .beginSubcases()\n      .combineWithParams([\n        { size: 80, range: [] },\n        { size: 160, range: [] },\n        { size: 160, range: [0, 80] },\n        { size: 160, range: [80] },\n        { size: 160, range: [40, 120] },\n        { size: 160, range: [40] },\n      ] as const)\n  )\n  .fn(async t => {\n    const { size, range } = t.params;\n    const [rangeOffset, rangeSize] = reifyMapRange(size, range);\n\n    // Fill an array buffer with a variety of values of different types.\n    const expectedArrayBuffer = new ArrayBuffer(80);\n    const uint8Expected = new Uint8Array(expectedArrayBuffer, 0, 2);\n    uint8Expected[0] = 1;\n    uint8Expected[1] = 255;\n\n    const int8Expected = new Int8Array(expectedArrayBuffer, 2, 2);\n    int8Expected[0] = -1;\n    int8Expected[1] = 127;\n\n    const uint16Expected = new Uint16Array(expectedArrayBuffer, 4, 2);\n    uint16Expected[0] = 1;\n    uint16Expected[1] = 65535;\n\n    const int16Expected = new Int16Array(expectedArrayBuffer, 8, 2);\n    int16Expected[0] = -1;\n    int16Expected[1] = 32767;\n\n    const uint32Expected = new Uint32Array(expectedArrayBuffer, 12, 2);\n    uint32Expected[0] = 1;\n    uint32Expected[1] = 4294967295;\n\n    const int32Expected = new Int32Array(expectedArrayBuffer, 20, 2);\n    int32Expected[2] = -1;\n    int32Expected[3] = 2147483647;\n\n    const float32Expected = new Float32Array(expectedArrayBuffer, 28, 3);\n    float32Expected[0] = 1;\n    float32Expected[1] = -1;\n    float32Expected[2] = 12345.6789;\n\n    const float64Expected = new Float64Array(expectedArrayBuffer, 40, 5);\n    float64Expected[0] = 1;\n    float64Expected[1] = -1;\n    float64Expected[2] = 12345.6789;\n    float64Expected[3] = Number.MAX_VALUE;\n    float64Expected[4] = Number.MIN_VALUE;\n\n    const buffer = t.device.createBuffer({\n      mappedAtCreation: true,\n      size,\n      usage: GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ,\n    });\n    const init = buffer.getMappedRange(...range);\n\n    // Copy the expected values into the mapped range.\n    assert(init.byteLength === rangeSize);\n    memcpy({ src: expectedArrayBuffer }, { dst: init });\n    buffer.unmap();\n\n    const mapRegion = getRegionForMap(size, [rangeOffset, rangeSize], t.params);\n    await buffer.mapAsync(GPUMapMode.READ, ...mapRegion);\n    const mappedArrayBuffer = buffer.getMappedRange(...range);\n    t.expectOK(checkElementsEqual(new Uint8Array(mappedArrayBuffer, 0, 2), uint8Expected));\n    t.expectOK(checkElementsEqual(new Int8Array(mappedArrayBuffer, 2, 2), int8Expected));\n    t.expectOK(checkElementsEqual(new Uint16Array(mappedArrayBuffer, 4, 2), uint16Expected));\n    t.expectOK(checkElementsEqual(new Int16Array(mappedArrayBuffer, 8, 2), int16Expected));\n    t.expectOK(checkElementsEqual(new Uint32Array(mappedArrayBuffer, 12, 2), uint32Expected));\n    t.expectOK(checkElementsEqual(new Int32Array(mappedArrayBuffer, 20, 2), int32Expected));\n    t.expectOK(checkElementsEqual(new Float32Array(mappedArrayBuffer, 28, 3), float32Expected));\n    t.expectOK(checkElementsEqual(new Float64Array(mappedArrayBuffer, 40, 5), float64Expected));\n  });\n\ng.test('mappedAtCreation')\n  .desc(\n    `Use mappedAtCreation to write to various ranges of variously-sized buffers created either\nwith or without the MAP_WRITE usage (since this could affect the mappedAtCreation upload path),\nthen expectContents (which does copyBufferToBuffer + map-read) to ensure the contents were written.`\n  )\n  .params(u =>\n    u //\n      .combine('mappable', [false, true])\n      .beginSubcases()\n      .combineWithParams(kSubcases)\n  )\n  .fn(async t => {\n    const { size, range, mappable } = t.params;\n    const [, rangeSize] = reifyMapRange(size, range);\n\n    const buffer = t.device.createBuffer({\n      mappedAtCreation: true,\n      size,\n      usage: GPUBufferUsage.COPY_SRC | (mappable ? GPUBufferUsage.MAP_WRITE : 0),\n    });\n    const arrayBuffer = buffer.getMappedRange(...range);\n    t.checkMapWrite(buffer, range[0] ?? 0, arrayBuffer, rangeSize);\n  });\n\ng.test('remapped_for_write')\n  .desc(\n    `Use mappedAtCreation or mapAsync to write to various ranges of variously-sized buffers created\nwith the MAP_WRITE usage, then mapAsync again and ensure that the previously written values are\nstill present in the mapped buffer.`\n  )\n  .params(u =>\n    u //\n      .combine('mapAsyncRegionLeft', mapRegionBoundModes)\n      .combine('mapAsyncRegionRight', mapRegionBoundModes)\n      .beginSubcases()\n      .combine('mappedAtCreation', [false, true])\n      .combineWithParams(kSubcases)\n  )\n  .fn(async t => {\n    const { size, range, mappedAtCreation } = t.params;\n    const [rangeOffset, rangeSize] = reifyMapRange(size, range);\n\n    const buffer = t.device.createBuffer({\n      mappedAtCreation,\n      size,\n      usage: GPUBufferUsage.COPY_SRC | GPUBufferUsage.MAP_WRITE,\n    });\n\n    // If the buffer is not mappedAtCreation map it now.\n    if (!mappedAtCreation) {\n      await buffer.mapAsync(GPUMapMode.WRITE);\n    }\n\n    // Set the initial contents of the buffer.\n    const init = buffer.getMappedRange(...range);\n\n    assert(init.byteLength === rangeSize);\n    const expected = new Uint32Array(new ArrayBuffer(rangeSize));\n    const data = new Uint32Array(init);\n    for (let i = 0; i < data.length; ++i) {\n      data[i] = expected[i] = i + 1;\n    }\n    buffer.unmap();\n\n    // Check that upon remapping the for WRITE the values in the buffer are\n    // still the same.\n    const mapRegion = getRegionForMap(size, [rangeOffset, rangeSize], t.params);\n    await buffer.mapAsync(GPUMapMode.WRITE, ...mapRegion);\n    const actual = new Uint8Array(buffer.getMappedRange(...range));\n    t.expectOK(checkElementsEqual(actual, new Uint8Array(expected.buffer)));\n  });\n"],"file":"map.spec.js"}